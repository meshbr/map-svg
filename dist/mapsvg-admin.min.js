!function($){$._button||($._button=$.button),$.fn.inputToObject=function(e){var a={};return $(this).attr("name")&&("radio"!=$(this).attr("type")||$(this).prop("checked"))&&function e(a,t,o){1==t.length?a[t[0]]=o:(null==a[t[0]]&&(a[t[0]]={}),e(a[t[0]],t.slice(1),o))}(a,$(this).attr("name").replace(/]/g,"").split("["),e),a},MapSVG.isMac=function(){return 0<=navigator.platform.toUpperCase().indexOf("MAC")},MapSVG.isValidURL=function(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)};var WP=!0,msvg,editingMark,_data={},_this={};_data.optionsDelta={},_data.optionsMode={preview:{responsive:!0,disableLinks:!0},editRegions:{responsive:!0,disableLinks:!0,zoom:{on:!0,limit:[-1e3,1e3]},scroll:{on:!0},onClick:null,mouseOver:null,mouseOut:null,tooltips:{on:!0},templates:{tooltipRegion:"<b>{{id}}</b>{{#if title}}: {{title}} {{/if}}"},popovers:{on:!1},actions:{region:{click:{showDetails:!1,filterDirectory:!1,loadObjects:!1,showPopover:!1,goToLink:!1}},marker:{click:{showDetails:!1,showPopover:!1,goToLink:!1}}}},draw:{responsive:!0,disableLinks:!0,zoom:{on:!0,limit:[-10,10]},scroll:{on:!0,spacebar:!0},mouseOver:null,mouseOut:null,colorsIgnore:!0,tooltips:{on:!1},popovers:{on:!1},actions:{region:{click:{showDetails:!1,filterDirectory:!1,loadObjects:!1,showPopover:!1,goToLink:!1}},marker:{click:{showDetails:!1,showPopover:!1,goToLink:!1}}}},editData:{responsive:!0,disableLinks:!0,zoom:{on:!0,limit:[-1e3,1e3]},scroll:{on:!0},actions:{region:{click:{showDetails:!1,filterDirectory:!0,loadObjects:!1,showPopover:!1,goToLink:!1}},marker:{click:{showDetails:!1,showPopover:!1,goToLink:!1}}},tooltips:{on:!0},templates:{tooltipRegion:"Click to show linked DB Objects",tooltipMarker:"DB Object id: <b>{{id}}</b> (Click to edit)"},popovers:{on:!1}},editMarkers:{responsive:!0,disableLinks:!0,zoom:{on:!0,limit:[-1e3,1e3]},scroll:{on:!0},onClick:null,mouseOver:null,mouseOut:null,tooltips:{on:!0},templates:{tooltipMarker:"DB Object id: <b>{{id}}</b> (Click to edit)"},popovers:{on:!1},actions:{region:{click:{showDetails:!1,filterDirectory:!0,loadObjects:!1,showPopover:!1,goToLink:!1}},marker:{click:{showDetails:!1,showPopover:!1,goToLink:!1}}}}},_data.mode="preview",methods={getData:function(){return _data},getMapId:function(){return _data.options.map_id},selectCheckbox:function(){c=!!$(this).attr("checked"),$(".region_select").removeAttr("checked"),c&&$(this).attr("checked","true")},disableAll:function(){c=!!$(this).attr("checked"),c?$(".region_disable").attr("checked","true"):$(".region_disable").removeAttr("checked")},save:function(t){$(this);$("#mapsvg-save")._button("loading");var o=msvg.getOptions(!1,null,_data.optionsDelta),e={mapsvg_data:MapSVG.convertToText(o),title:o.title,map_id:_data.options.map_id,region_prefix:o.regionPrefix,source:o.source};return e.mapsvg_data=e.mapsvg_data.replace(/select/g,"!mapsvg-encoded-slct"),e.mapsvg_data=e.mapsvg_data.replace(/table/g,"!mapsvg-encoded-tbl"),e.mapsvg_data=e.mapsvg_data.replace(/database/g,"!mapsvg-encoded-db"),e.mapsvg_data=e.mapsvg_data.replace(/varchar/g,"!mapsvg-encoded-vc"),_this.mapsvgCssChanged&&(e.css=_this.mapsvgCss),void 0!==o.manualRegions&&(e.manualRegions=MapSVG.parseBoolean(_this.manualRegions)),$.post(ajaxurl,{action:"mapsvg_save",_wpnonce:_data.options._wpnonce,data:e},function(e){var a;$.isNumeric(e)?(a="Settings saved",$("#map-page-title").html(o.title),"new"==_data.options.map_id&&($("#mapsvg-shortcode").html('[mapsvg id="'+e+'"]'),a+='. Shortcode: [mapsvg id="'+e+'"]',_data.options.map_id=e,msvg.id=e)):a="Error!",t||$.growl.notice({title:"",message:a,duration:700})}).always(function(){$("#mapsvg-save")._button("reset")}).fail(function(e){e.responseText&&(e=JSON.parse(e.responseText))&&e.data&&e.data.error?$.growl.error({title:"",message:e.data.error}):$.growl.error({message:"Server error: settings were not saved"})})},mapDelete:function(e){e.preventDefault();var a=$(this).data("nonce"),t=$(this).closest("tr"),e=t.attr("data-id");t.fadeOut(),$.post(ajaxurl,{action:"mapsvg_delete",_wpnonce:a,id:e},function(){})},mapCopy:function(e){e.preventDefault();var a=$(this).data("nonce"),o=$(this).closest("tr"),t=o.attr("data-id"),e=o.attr("data-title");if(!(new_name=prompt("Enter new map title",e+" - copy")))return!1;$.post(ajaxurl,{action:"mapsvg_copy",_wpnonce:a,id:t,new_name:new_name},function(e){var a=o.clone(),t="?page=mapsvg-config&map_id="+e;a.attr("data-id",e).attr("data-title",new_name),a.find(".mapsvg-map-title a").attr("href",t).html(new_name),a.find(".mapsvg-action-buttons a.mapsvg-button-edit").attr("href",t),a.find(".mapsvg-shortcode").html('[mapsvg id="'+e+'"]'),a.prependTo(o.closest("tbody"))})},mapUpdate:function(e){e.preventDefault();var btn=$(this),table_row=$(this).closest("tr"),map_id=table_row.length?table_row.attr("data-id"):msvg.id,update_to=$(this).data("update-to");jQuery.get(ajaxurl,{action:"mapsvg_get",id:map_id},function(data){var disabledRegions=[];if(eval("var options = "+data),options.regions)for(var id in options.regions)options.regions[id].disabled&&disabledRegions.push(id);$.post(ajaxurl,{action:"mapsvg_update",id:map_id,update_to:update_to,disabledRegions:disabledRegions,_wpnonce:MapSVG.nonce,disabledColor:options.colors&&void 0!==options.colors.disabled?options.colors.disabled:""},function(){btn.fadeOut(),table_row.length||window.location.reload()}).fail(function(){$.growl.error({title:"Server Error",message:"Can't update the map"})})})},markerEditHandler:function(e){editingMark=this.getOptions(),hbData.isGeo&&e&&editingMark.object&&(e=msvg.database.getLoadedObject(editingMark.dataId),msvg.database.update(e))},regionEditHandler:function(){$("#mapsvg-region-"+this.id_no_spaces);$('#mapsvg-tabs-menu a[href="#tab_regions"]').tab("show"),_data.controllers.regions.controllers.list.editRegion(this,!0)},dataEditHandler:function(){var e=this;$('#mapsvg-tabs-menu a[href="#tab_database"]').tab("show");var a={};e instanceof MapSVG.Region?a.region_id=e.id:e instanceof MapSVG.Marker&&(a.id=e.object.id),_data.controllers.database.controllers.list.setFilters(a)},resizeDashboard:function(){var e=$("#wpbody-content").width(),a=$("#wpadminbar").height(),t=$(window).width()-e,o=$(window).height()-a;$("#mapsvg-admin").css({width:e,height:o,left:t,top:a}),($("#mapsvg-sizer").outerWidth()>$("#mapsvg-container").outerWidth()||$("#mapsvg-sizer").outerHeight()>$("#mapsvg-container").outerHeight()||$("#mapsvg-sizer").outerHeight()<$("#mapsvg-container").outerHeight()&&$("#mapsvg-sizer").outerWidth()<$("#mapsvg-container").outerWidth())&&_this.resizeSVGCanvas()},resizeSVGCanvas:function(){var e,a,t,o,s;msvg&&(a=$("#mapsvg-container").width(),o=$("#mapsvg-container").height(),t=msvg&&msvg.getData().viewBox,a=a-((e=Math.floor(msvg.getData().$leftSidebar.outerWidth()))+(s=Math.floor(msvg.getData().$rightSidebar.outerWidth()))),o=o-(msvg.getData().$header.is(":hidden")?0:Math.floor(msvg.getData().$header.outerHeight(!0))),(t=t[2]/t[3])<a/o?(o=t*o,Math.round(100*o/a),s=o+e+s,$("#mapsvg-sizer").css({width:s+"px"})):$("#mapsvg-sizer").css({width:"auto"}))},setPreviousMode:function(){_data.previousMode&&_this.setMode(_data.previousMode)},setMode:function(e,a){if(_data.mode!=e){if("draw"==_data.mode){if(_data.controllers.draw.changed&&!confirm("Changes in SVG file will be lost. Continue?"))return jQuery("#mapsvg-map-mode-2 label").toggleClass("active",!1),jQuery("#mapsvg-map-mode-2 input").prop("checked",!1),jQuery('#mapsvg-map-mode-2 [data-mode="draw"]').toggleClass("active",!0),void jQuery('#mapsvg-map-mode-2 [data-mode="draw"] input').prop("checked",!0);_data.controllers.draw.revert(),_this.unloadController(_data.controllers.draw)}_data.previousMode=_data.mode,_data.mode=e,msvg.update(_data.optionsDelta);var t=msvg.getOptions();_data.optionsDelta={},$.each(_data.optionsMode[_data.mode],function(e,a){_data.optionsDelta[e]=void 0!==t[e]?t[e]:null}),msvg.update(_data.optionsMode[e]);var o=e;$("#mapsvg-map-mode").find("label").removeClass("active").find("input").prop("checked",!1),$("#mapsvg-map-mode").find('label[data-mode="'+o+'"]').addClass("active"),$("body").off("click.switchTab"),msvg.off("zoom"),"editRegions"==e?(msvg.setMarkersEditMode(!1),msvg.setRegionsEditMode(!0),msvg.setDataEditMode(!1),_this.setDrawMode(!1),msvg.getData().$map.addClass("mapsvg-edit-regions"),$("body").on("click.switchTab",".mapsvg-region",function(){$('#mapsvg-tabs-menu a[href="#tab_regions"]').tab("show")}),msvg.getData().$map.removeClass("mapsvg-edit-objects")):"draw"==e?(msvg.setMarkersEditMode(!1),msvg.setRegionsEditMode(!1),msvg.setDataEditMode(!1),msvg.getData().$map.removeClass("mapsvg-edit-regions"),msvg.getData().$map.removeClass("mapsvg-edit-objects"),_this.setDrawMode(!0)):"editMarkers"==e?(msvg.setMarkersEditMode(!0),msvg.setRegionsEditMode(!1),msvg.setDataEditMode(!1),_this.setDrawMode(!1),msvg.getData().$map.removeClass("mapsvg-edit-regions"),msvg.getData().$map.removeClass("mapsvg-edit-objects")):"editData"==e?(msvg.setMarkersEditMode(!1),msvg.setRegionsEditMode(!1),msvg.setDataEditMode(!0),_this.setDrawMode(!1),msvg.getData().$map.removeClass("mapsvg-edit-regions"),msvg.getData().$map.addClass("mapsvg-edit-objects"),$("body").on("click.switchTab",".mapsvg-region",function(){$('#mapsvg-tabs-menu a[href="#tab_database"]').tab("show")}),$("body").on("click.switchTab",".mapsvg-marker",function(){$('#mapsvg-tabs-menu a[href="#tab_database"]').tab("show");var e=msvg.getMarker($(this).prop("id"));_data.controllers.database.controllers.list.editDataObject(e.object.id,!0)})):(msvg.setMarkersEditMode(!1),msvg.setRegionsEditMode(!1),msvg.setDataEditMode(!1),_this.setDrawMode(!1),_this.resizeSVGCanvas(),msvg.getData().$map.removeClass("mapsvg-edit-regions"),msvg.getData().$map.removeClass("mapsvg-edit-objects")),$("#mapsvg-admin").attr("data-mode",e),"draw"==_data.previousMode&&_this.loadController("tab_settings","settings")}},setDrawMode:function(e){e?(this.toggleContainers(!1),msvg.hideMarkersExceptOne(),_data.controllers.draw?_data.controllers.draw.show():_data.controllers.draw=new MapSVGAdminDrawController("mapsvg-container",this,msvg),_data.controllers.draw.viewDidAppear(),msvg.mapAdjustStrokes()):"draw"===_data.previousMode&&(this.toggleContainers(),msvg.showMarkers(),_data.controllers.draw&&_data.controllers.draw.close())},enableMarkersMode:function(e){var a=$("#mapsvg-map-mode").find('[data-mode="editMarkers"]');e?($("#mapsvg-map-mode").find("label").addClass("disabled"),a.removeClass("disabled").find("input")):($("#mapsvg-map-mode").find("label").removeClass("disabled"),a.addClass("disabled").find("input"))},addHandlebarsMethods:function(){},getPostTypes:function(){return _data.options.post_types},togglePanel:function(e,a){a?$("#mapsvg-panels").removeClass("hide-"+e):$("#mapsvg-panels").addClass("hide-"+e);e=$("#mapsvg-panels-view-"+e);e.hasClass("active")!=a&&(a?e.addClass("active"):e.removeClass("active"),e.prop("checked",a))},rememberPanelsState:function(){_data.panelsState={},_data.panelsState.left=!$("#mapsvg-panels").hasClass("hide-left"),_data.panelsState.right=!$("#mapsvg-panels").hasClass("hide-right")},restorePanelsState:function(){for(var e in _data.panelsState)_this.togglePanel(e,_data.panelsState[e]);_data.panelsState={}},toggleContainers:function(e){e=void 0===e?!_this.containersVisible:e,$(".mapsvg-top-container").toggleClass("mapsvg-hidden",!e),_this.containersVisible=e},setEventHandlersMainScreen:function(){$("#mapsvg-admin").on("click","#mapsvg-enter-purchase-code-link",function(){$("#mapsvg-alert-activate").show()}),$("#mapsvg-alert-activate").on("click",".close",function(){$("#mapsvg-alert-activate").hide()}),$("#mapsvg-admin").on("click","#mapsvg-btn-activate",function(e){e.preventDefault(),$(this)._button("loading");e=$('input[name="purchase_code"]').val();$.post(ajaxurl,{purchase_code:e,action:"mapsvg_save_purchase_code",_wpnonce:MapSVG.nonce},function(e){(e=JSON.parse(e)).error_message?$.growl.error({title:"",message:e.error_message}):e&&e.ok&&($("#mapsvg-alert-activate").hide(),alert('MapSVG is activated. You will receive updates notifications on the "Plugins" page and you will be able to update the plugin there.'))}).always(function(){$("#mapsvg-btn-activate")._button("reset")})}),$(".mapsvg-copy-shortcode").on("click",function(){var e=$(this).data("shortcode"),a=document.createElement("textarea");a.value=e,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),$.growl.notice({title:"",message:"Shortcode copied to clipboard",duration:700})}),$(".select-map-list").mselect2().on("select2:select",function(){var e=$(this).find("option:selected").data("link");e&&(window.location=e+"&noheader=true")});var s=[];$("#svg_file_uploader").on("change",function(e){$.each(e.target.files,function(e,o){if(-1==o.type.indexOf("svg"))return alert("You can upload only SVG files"),!1;var a=new FileReader;a.onload=function(e){object={},object.filename=o.name,object.data=e.target.result;var a=$("<div>"+object.data+"</div>");a.find("#mapsvg-google-map-background").length&&confirm("Remove Google Maps background image from SVG file?")&&a.find("#mapsvg-google-map-background").remove(),object.data=a.html(),object.data.replace("\x3c!--?xml","<?xml"),object.data.replace('"no"?--\x3e','"no"?>'),object.data.replace("mapsvg:geoviewbox","mapsvg:geoViewBox");var t=object.data.length/1048576,e=mapsvg_ini_vars.post_max_size.indexOf("M")?mapsvg_ini_vars.post_max_size.replace("M",""):mapsvg_ini_vars.post_max_size/1048576,a=t.toFixed(2)+"Mb";if(e<t)return $.growl.error({title:"Error",message:"Can't upload the file. File size ("+a+') exceeds php.ini "post_max_size" value ('+mapsvg_ini_vars.post_max_size+'). More info: <a href="https://mapsvg.com/docs/troubleshooting/uploading-big-files" target="_blank">Uploading big files</a>',duration:5e4}),btn._button("reset"),!1;s.push(object),$("#svg_file_uploader_form").submit()},a.readAsText(o)})}),$("#svg_file_uploader_form").on("submit",function(e){var a=$(this).find(".btn");a._button("loading");var t=new FormData;s.forEach(e=>{var a=new Blob([e.data],{type:"text/xml"});t.append("file",a,e.filename.replace(/\s/g,"_"))}),t.append("action","mapsvg_upload"),t.append("_wpnonce",MapSVG.nonce),$.ajax({url:ajaxurl,type:"POST",data:t,processData:!1,contentType:!1}).done(function(e,a,t){$.growl.notice({title:"",message:"File uploaded:<br>user-uploads/"+e}),$("#mapsvg-svg-file-select").find('[data-link="?page=mapsvg-config&map_id=new&package=uploads&path='+e+'"]').length||$("#mapsvg-svg-file-select").append('<option data-link="?page=mapsvg-config&map_id=new&package=uploads&path='+e+'">user-uploads/'+e+"</option>")}).fail(function(e){e.responseText&&(e=JSON.parse(e.responseText))&&e.data&&e.data.error&&$.growl.error({title:"",message:e.data.error})}).always(function(){$("#svg_file_uploader").val(""),a._button("reset")}),s=[],e.preventDefault()});var o=[];$("#image_file_uploader").on("change",function(e){$.each(e.target.files,function(e,t){if(-1==["image/png","image/jpeg"].indexOf(t.type))return alert("Supported file types: png / jpeg"),!1;var a=new FileReader;a.onload=function(e){var a=e.target.result,e=new Image;e.onload=function(){object={};var e=(new Date).valueOf();object.filename=t.name+"_"+e+".svg",object.data='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns:mapsvg="http://mapsvg.com" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+this.width+'" height="'+this.height+'"> <image id="mapsvg-image-background" class="mapsvg-image-background" xlink:href="'+a+'"  x="0" y="0" height="'+this.height+'" width="'+this.width+'"></image></svg>',o.push(object),$("#image_file_uploader_form").submit()},e.src=a},a.readAsDataURL(t)})}),$("#image_file_uploader_form").on("submit",function(e){var a=$(this).find(".btn");a._button("loading");var t=new FormData;o.forEach(e=>{var a=new Blob([e.data],{type:"text/xml"});t.append("file",a,e.filename.replace(/\s/g,"_"))}),t.append("action","mapsvg_upload"),t.append("_wpnonce",MapSVG.nonce),$.ajax({url:ajaxurl,type:"POST",data:t,contentType:!1,processData:!1}).done(function(e,a,t){window.location.href="?page=mapsvg-config&map_id=new&package=uploads&path="+e+"&noheader=true"}).fail(function(e){e.responseText&&(e=JSON.parse(e.responseText))&&e.data&&e.data.error&&$.growl.error({title:"",message:e.data.error})}).always(function(){a._button("reset")}),o=[],e.preventDefault()}),$("#new-google-map").on("click",function(e){if(!_data.options.mapsvg_google_api_key)return $("#myModal").modal().show(),!1}),$("#download_gmap").on("click",function(){_data.options.mapsvg_google_api_key?_this.showGoogleMapDownloader():$("#myModal").modal().show()}),$("#save-api-key").on("click",function(){var a=$("#mapsvg-google-api-key").val(),e=$("#mapsvg-google-geocoding-api-key").val();a&&a.length&&$.post(ajaxurl,{action:"mapsvg_save_google_api_key",maps_api_key:a,geocoding_api_key:e,_wpnonce:MapSVG.nonce}).done(function(e){(e=JSON.parse(e)).ok?($("#myModal").modal("hide"),_data.options.mapsvg_google_api_key=a):alert("Error")})}),$("#mapsvg-table-maps").on("click","a.mapsvg-delete",methods.mapDelete).on("click","a.mapsvg-copy",methods.mapCopy)},setEventHandlers:function(){$("#mapsvg-admin").on("mousewheel",".jspContainer",function(e){e.preventDefault()}),$("#mapsvg-admin").on("click",".mapsvg-template-link",function(){var e=$(this).data("template");_this.getData().controllers.templates?($('#mapsvg-tabs-menu a[href="#tab_templates"]').tab("show"),$("#tab_templates").find("select").val(e).trigger("change")):($('#mapsvg-tabs-menu a[href="#tab_templates"]').tab("show"),setTimeout(function(){$("#tab_templates").find("select").val(e).trigger("change")},500))}),$(".mapsvg-copy-shortcode").on("click",function(){var e=$(this).data("shortcode"),a=document.createElement("textarea");a.value=e,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),$.growl.notice({title:"",message:"Shortcode copied to clipboard",duration:700})}),$(window).on("keydown.save.mapsvg",function(e){(e.metaKey||e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),"draw"!=_data.mode?_this.save():_data.controllers.draw.saveSvg())}),_data.view.on("click","#mapsvg-save",function(){_this.save()}).on("change","#mapsvg-map-mode :radio",function(){var e=$("#mapsvg-map-mode :radio:checked").val();_this.setMode(e)}).on("change","#mapsvg-preview-containers-toggle :checkbox",function(){_this.toggleContainers($(this).is(":checked"))}).on("click","button",function(e){e.preventDefault()}),_data.view.on("change","#mapsvg-map-mode-2 :radio",function(){var e=$("#mapsvg-map-mode-2 :radio:checked").val();_this.setMode(e)}),$("#mapsvg-view-buttons").on("change",'[type="checkbox"]',function(){var e=$(this).prop("checked"),a=$(this).attr("name");_this.togglePanel(a,e)}),$("#mapsvg-tabs-menu").on("click","a",function(e){e.preventDefault(),$(this).tab("show")}),$("#mapsvg-tabs-menu").on("shown.bs.tab","a",function(e){$("#mapsvg-tabs-menu .menu-name").html($(this).text());var a=$(this).attr("href");_this.resizeDashboard();var t=$(a),a=a.replace("#",""),t=t.attr("data-controller");_this.loadController(a,t)})},addController:function(e,a,t){$("#"+a).length||(t=$("#mapsvg-tabs-menu .dropdown-menu").find('a[href="#'+t+'"]').parent(),$('<li><a href="#'+a+'">'+e+"</a></li>").insertAfter(t),$("#mapsvg-tabs").append('<div class="tab-pane" id="'+a+'" data-controller="'+a+'"></div>'))},loadController:function(e,a){var t;if(!_data.currentController||_data.currentController!=_data.controllers[a])return _data.controllers[a]||(t=a.charAt(0).toUpperCase()+a.slice(1),_data.controllers[a]=new window["MapSVGAdmin"+t+"Controller"](e,_this,msvg)),_data.currentController&&_data.currentController.viewDidDisappear(),_data.currentController=_data.controllers[a],_data.currentController.viewDidAppear(),$("#"+e).attr("data-controller")||$("#"+e).attr("data-controller",a),$("#"+e).hasClass("active")||$('#mapsvg-tabs-menu a[href="#'+e+'"]').tab("show"),_data.currentController},unloadController:function(e){"string"!=typeof e&&(e=e.nameCamel()),_data.controllers[e].destroy(),_data.controllers[e]=null,_data.currentController=null,"draw"==e&&(_data.controllers.drawRegion=null)},init:function(e){MapSVG.isMac()?$("body").addClass("mapsvg-os-mac"):$("body").addClass("mapsvg-os-other"),_data.options=e,_data.controllers={},_data.view=$("#mapsvg-admin");var t=!!_data.options.mapsvg_options.source;return $(document).ready(function(){if(WP&&t&&(new MapSVG.ResizeSensor($("#adminmenuwrap")[0],function(){_this.resizeDashboard()}),new MapSVG.ResizeSensor($("#wpwrap")[0],function(){_this.resizeDashboard()}),new MapSVG.ResizeSensor($("#mapsvg")[0],function(){_this.resizeDashboard()}),_this.resizeDashboard()),_data.view.tooltip({selector:".toggle-tooltip",trigger:"hover"}),$("body").on("click",".mapsvg-update",methods.mapUpdate),t){_this.addHandlebarsMethods();var a=_data.options.mapsvg_options.afterLoad;return _data.options.mapsvg_options.backend=!0,_data.options.mapsvg_options.manualRegions&&$('label[data-mode="addRegions"]').show(),_data.options.mapsvg_options.afterLoad=function(){var e;window.m||(window.m=msvg),new MapSVG.ResizeSensor($(".mapsvg-header")[0],function(){setTimeout(function(){_this.resizeSVGCanvas()},1)}),msvg.setMarkerEditHandler(methods.markerEditHandler),msvg.setRegionEditHandler(methods.regionEditHandler),msvg.setAfterLoad(a),hbData=msvg.getOptions(!0),_this.hbData=hbData,msvg.getData().presentAutoID&&$("#mapsvg-auto-id-warning").show(),_this.setMode("preview"),hbData.isGeo=msvg.getData().mapIsGeo,hbData.isGeo&&$("#mapsvg-admin").addClass("mapsvg-is-geo"),MapSVG.markerImages=_data.options.markerImages||[],_data.options.mapsvg_options.defaultMarkerImage||msvg.setDefaultMarkerImage(_data.options.markerImages[0].url),hbData.isSafari=navigator.vendor&&-1<navigator.vendor.indexOf("Apple")&&navigator.userAgent&&!navigator.userAgent.match("CriOS"),hbData.title=_data.options.map_title,hbData.title||(hbData.title=hbData.svgFilename.split("."),hbData.title.pop(),hbData.title=hbData.title.join("."),hbData.title=hbData.title.charAt(0).toUpperCase()+hbData.title.substr(1)),msvg.update({title:hbData.title}),_data.options.mapsvg_options.extension&&$().mapSvg.extensions&&$().mapSvg.extensions[_data.options.mapsvg_options.extension]&&(e=$().mapSvg.extensions[_data.options.mapsvg_options.extension])&&e.backend(msvg,_this),_data.controllers.settings=new MapSVGAdminSettingsController("tab_settings",_this,msvg),_data.controllers.database=new MapSVGAdminDatabaseController("tab_database",_this,msvg),_data.controllers.regions=new MapSVGAdminRegionsController("tab_regions",_this,msvg),$(document).on("focus",".select2-selection--single",function(e){select2_open=$(this).parent().parent().prev("select"),select2_open.mselect2("open")}),hbData.isSafari&&_data.view.find('input[type="text"]').closest(".form-group").wrap("<form />"),_this.setEventHandlers(),_this.resizeDashboard();try{a(msvg)}catch(e){}_data.options.mapsvg_options.extension&&$().mapSvg.extensions&&$().mapSvg.extensions[_data.options.mapsvg_options.extension]&&(e=$().mapSvg.extensions[_data.options.mapsvg_options.extension])&&e.backendAfterLoad(msvg)},_data.options.mapsvg_options.db_map_id=_this.getMapId(),_data.options.mapsvg_options.editMode=!0,_data.options.mapsvg_options.googleMaps||(_data.options.mapsvg_options.googleMaps={}),!_data.options.mapsvg_options.googleMaps.apiKey&&_data.options.mapsvg_google_api_key&&(_data.options.mapsvg_options.googleMaps={apiKey:_data.options.mapsvg_google_api_key}),_data.options.mapsvg_options.googleMaps.apiKey=_data.options.mapsvg_google_api_key,msvg=$("#mapsvg").mapSvg(_data.options.mapsvg_options),_this}_this.setEventHandlersMainScreen()}),_this},showGoogleMapDownloader:function(){var e,a;_this.googleMapsFullscreenWrapper||(_this.googleMapsFullscreenWrapper=$("#mapsvg-google-map-fullscreen-wrap"),_this.googleMapsFullscreenWrapper.on("click","#mapsvg-gm-download",function(e){e.preventDefault();$(this),window;html2canvas($("#mapsvg-google-map-fullscreen div[aria-label=Map]")[0],{useCORS:!0,onrendered:function(e){var a=e.toDataURL("image/png"),t=[(t=_this.gm.getBounds().toJSON()).west,t.north,t.east,t.south];$.post(ajaxurl,{action:"mapsvg_download_svg",png:a,bounds:t,width:e.width,height:e.height}).done(function(e){location.href=e})}})}).on("click","#mapsvg-gm-close",function(){_this.googleMapsFullscreenWrapper.hide(),$("body").css("overflow","auto")})),_this.googleMapsFullscreenWrapper.show(),$("body").css("overflow","hidden"),_this.gmloaded?_this.loadgm():(e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("formatted_address"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:ajaxurl+"?action=mapsvg_geocoding&address=%QUERY%",wildcard:"%QUERY%",transform:function(e){return e.error_message&&alert(e.error_message),e.results},rateLimitWait:500}}),(a=_this.googleMapsFullscreenWrapper.find("#mapsvg-gm-address-search")).typeahead(null,{name:"mapsvg-addresses",display:"formatted_address",source:e,minLength:2}),a.on("typeahead:select",function(e,a){a=a.geometry.bounds||a.geometry.viewport,a=new google.maps.LatLngBounds(a.southwest,a.northeast);_this.gm.fitBounds(a)}),_this.gmapikey=_data.options.mapsvg_google_api_key,window.gm_authFailure=function(){MapSVG.GoogleMapBadApiKey?MapSVG.GoogleMapBadApiKey():alert("Google Maps API key is incorrect.")},_data.googleMapsScript=document.createElement("script"),_data.googleMapsScript.onload=function(){_this.loadgm()},_data.googleMapsScript.src="https://maps.googleapis.com/maps/api/js?key="+_this.gmapikey+"&language=en",document.head.appendChild(_data.googleMapsScript),_this.gmloaded=!0)},loadgm:function(){_this.gm=new google.maps.Map($("#mapsvg-google-map-fullscreen")[0],{zoom:2,center:new google.maps.LatLng(-34.397,150.644),mapTypeId:"roadmap",fullscreenControl:!1,mapTypeControl:!0,scaleControl:!0,scrollwheel:!0,streetViewControl:!1,zoomControl:!0})}},_this=methods,$.fn.mapsvgadmin=function(e){return methods[e]?methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof e?methods.init.apply(this,arguments):e?void $.error("Method "+method+" does not exist on mapSvg plugin"):methods}}(jQuery);
!function($,window){var MapSVGAdminController=function(t,e,a,i){this.name=this.name||"controller",this.container="object"==typeof t?t:$("#"+t),this.admin=e,this.mapsvg=a,this.templates={},this.templatesURL=this.templatesURL||MapSVG.urls.templates,this.scrollable=void 0===this.scrollable||this.scrollable,this.controllers={},this.activeController=null,this.events=i||{},this._init()};MapSVGAdminController.prototype.nameCamel=function(){return this.name.split("-").map(function(t,e){return 0===e?t:t.charAt(0).toUpperCase()+t.slice(1)}).join("")},MapSVGAdminController.prototype.viewLoaded=function(){this.activeController&&this.activeController.viewDidAppear(),this.events.onload&&this.events.onload.call(this)},MapSVGAdminController.prototype.viewUnloaded=function(){this.events.unload&&this.events.unload.call(this)},MapSVGAdminController.prototype._viewLoaded=function(){this.loaded=!0,this.view.find(".mapsvg-select2").mselect2({minimumResultsForSearch:20}),this.scrollable&&this.updateScroll(),this.view.find(".mapsvg-onoff").bootstrapToggle({onstyle:"default",offstyle:"default"})},MapSVGAdminController.prototype.viewDidAppear=function(){var t=this;t.controllers&&t.activeController&&t.activeController.viewDidAppear(),this.scrollable&&t.updateScroll()},MapSVGAdminController.prototype.viewDidDisappear=function(){if(this.controllers)for(var t in this.controllers)this.controllers&&this.controllers[t]&&this.controllers[t].viewDidDisappear()},MapSVGAdminController.prototype.updateScroll=function(){var t,e;this.contentWrap&&this.scrollable&&(t=this.disableHorizontalScroll?{contentWidth:"0px"}:{},this.contentWrap.data("jsp")||this.contentWrap.jScrollPane(t),(e=this.contentWrap.data("jsp")).reinitialise(),setTimeout(function(){e.reinitialise()},500))},MapSVGAdminController.prototype._init=function(){var i=this;i.templatesLoaded?i.render():$.get(i.templatesURL+this.name+".html?"+Math.random(),function(t){$(t).each(function(t,e){var a=$(e).data("name");a&&(i.templates[a]=Handlebars.compile($(e).html()),$(e).data("partial")&&Handlebars.registerPartial(i.nameCamel()+MapSVG.ucfirst(a)+"Partial",$(e).html()))}),i.templatesLoaded=!0,i.render()}).fail(function(t){404==t.status&&alert("Can't load template files.")})},MapSVGAdminController.prototype.render=function(){this.view&&this.view.empty().remove(),this.view=$("<div />").attr("id","mapsvg-admin-controller-"+this.name).addClass("mapsvg-view"),this.contentWrap=$("<div />").attr("id","mapsvg-admin-content-"+this.name).addClass("mapsvg-view-wrap"),this.contentView=$("<div />").addClass("mapsvg-view-content"),this.scrollable&&(this.contentWrap.addClass("nano"),this.contentView.addClass("nano-content")),this.contentWrap.append(this.contentView),this.templates.toolbar&&(this.toolbarView=$("<div />").attr("id","mapsvg-admin-toolbar-"+this.name).addClass("mapsvg-view-toolbar"),this.view.append(this.toolbarView)),this.view.append(this.contentWrap),this.container.append(this.view),this.container.data("controller",this),this.redraw(),this.setEventHandlersCommon(),this.setEventHandlers(),this._viewLoaded(),this.viewLoaded()},MapSVGAdminController.prototype.redraw=function(){this.templateData=this.getTemplateData(),this.contentView.html(this.templates.main(this.templateData)),this.templates.toolbar&&this.toolbarView.html(this.templates.toolbar(this.templateData)),this.scrollable&&this.updateScroll()},MapSVGAdminController.prototype.setMainTemplate=function(t){t="image"==t?"image":"path",this.templates.main=this.templates[t]},MapSVGAdminController.prototype.getTemplateData=function(){return this.mapsvg.getOptions(!0,null,this.admin.getData().optionsDelta)},MapSVGAdminController.prototype.setEventHandlersCommon=function(){var i=this;new MapSVG.ResizeSensor(this.view[0],function(){i.scrollable&&i.updateScroll()}),i.view.on("click","a.mapsvg-toggle-visibility",function(){var t=$(this).data("toggle-visibility");$(t).toggle(),$(t).is(":visible")?$(this).text("Hide"):$(this).text("Read more")}),i.view.on("change paste",'[data-live="change"]',function(t){i.formToObjectUpdate(t)}).on("keyup paste",'[data-live="keyup"]',function(t){i.formToObjectUpdate(t)}).on("select",'[data-live="select"]',function(t){i.formToObjectUpdate(t)}).on("click",'[data-live="click"]',function(t){i.formToObjectUpdate(t)}).on("keypress","form.safarifix input",function(t){13!=t.which&&13!=t.keyCode||t.preventDefault()}).on("click","input.input-switch",function(){$(this).is(":checked")&&($(this).closest(".controls").find(".radio").next().attr("disabled","disabled"),$(this).parent().next().removeAttr("disabled"))}).on("change",".mapsvg-toggle-visibility",function(){$(this).closest(".btn-group");var t=!$(this).is(":checkbox")||MapSVG.parseBoolean($(this).prop("checked")),e=$(this).data("toggle-visibility"),a=$(this).data("toggle-visibility-reverse");e&&(t?$(e).show():$(e).hide()),a&&(t?$(a).hide():$(a).show()),i.scrollable&&i.updateScroll()}).on("click","button.mapsvg-toggle-visibility",function(t){t.preventDefault();t=$(this).data("toggle-visibility");$(t).toggle(),i.scrollable&&i.updateScroll()}).on("click",".disabled",function(t){return t.preventDefault(),!1}).on("click",".btn-group-checkbox a",function(){var t=$(this),e=t.attr("data-toggle");setTimeout(function(){t.hasClass("active")?t.closest(".btn-group-checkbox").find("input.input-toggle-"+e).val("true"):t.closest(".btn-group-checkbox").find("input.input-toggle-"+e).val("")},200)}).on("click",".mapsvg-tab-link",function(t){t.preventDefault(),$('#mapsvg-tabs-menu a[href="'+$(this).attr("href")+'"]').tab("show")})},MapSVGAdminController.prototype.setEventHandlers=function(){},MapSVGAdminController.prototype.show=function(){this.view.show()},MapSVGAdminController.prototype.hide=function(){this.view.hide()},MapSVGAdminController.prototype.destroy=function(){if(this.viewUnloaded(),this.view.empty().remove(),this.controllers)for(var t in this.controllers)this.controllers[t]&&this.controllers[t].view&&this.controllers[t].destroy()},MapSVGAdminController.prototype.objectUpdater=function(t){return this.admin.mapSvgUpdate(t)},MapSVGAdminController.prototype.formToObjectUpdate=function(t){var e=$(t.target);e.is(":radio")&&(e=e.closest(".form-group").find(":radio:checked"));parseInt($(e).data("delay"));e.closest(".form-group").removeClass("has-error");t=this.validateInput(e);if(!(t instanceof TypeError))return this.formToObjectUpdater(t);e.closest(".form-group").addClass("has-error")},MapSVGAdminController.prototype.formToObjectUpdater=function(t){var e,a=this;for(e in t)var i=e;var o=a.admin.getData().optionsMode[a.admin.getData().mode];o&&o.hasOwnProperty(i)?$.extend(!0,a.admin.getData().optionsDelta,t):a.mapsvg.update(t)},MapSVGAdminController.prototype.mapSvgUpdateFinal=function(t){var e=this,a=e.validateInput(t);if(a instanceof TypeError)t.closest(".form-group").addClass("has-error");else{for(var i in a)var o=i;e.admin.getData().optionsMode[e.admin.getData().mode].hasOwnProperty(o)?$.extend(!0,e.admin.getData().optionsDelta,a):e.mapsvg.update(a)}},MapSVGAdminController.prototype.validateInput=function(jQueryElem){var val;val=jQueryElem.is(":checkbox")?!!jQueryElem.is(":checked")&&(!jQueryElem.attr("value")||"on"==jQueryElem.attr("value")||jQueryElem.attr("value")):jQueryElem.val();var validate=jQueryElem.data("validate"),tmp;if(validate&&""!=val)if("function"==validate){if(val=""!=val?msvg.functionFromString(val):null,val instanceof TypeError||val instanceof SyntaxError)return val}else if("link"==validate){if(!MapSVG.isValidURL(val))return new TypeError('MapSVG error: wrong URL format. URL must start with "http://"')}else if("number"==validate){if(!$.isNumeric(val))return new TypeError("MapSVG error: value must be a number")}else if("object"==validate&&("["==data.substr(0,1)||"{"==data.substr(0,1)))try{eval("tmp = "+val);var val=tmp}catch(err){return new TypeError("MapSVG error: wrong object format for "+jQueryElem.attr("name"))}return jQueryElem.inputToObject(val)},window.MapSVGAdminController=MapSVGAdminController}(jQuery,window);
!function(t){function e(t,e,a){this.name="actions",MapSVGAdminController.call(this,t,e,a)}t.MapSVGAdminActionsController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.viewLoaded=function(){this.updateDirSource()},e.prototype.setEventHandlers=function(){var t=this;this.mapsvg.regionsDatabase.on("schemaChange",function(){t.render()}),this.mapsvg.database.on("schemaChange",function(){t.render()})},e.prototype.updateDirSource=function(t){t=t||this.mapsvg.getData().options.menu.source,this.view.find("#mapsvg-dir-object").html("database"==t?"Database object":"Region object"),this.view.find("#mapsvg-dir-source").html("database"==t?"Database":"Regions"),"database"==t?this.view.find("#mapsvg-dir-link").attr("href","#").data("template","detailsView").html("DB Object details view template"):this.view.find("#mapsvg-dir-link").attr("href","#").data("template","detailsViewRegion").html("Region details view template")},e.prototype.getTemplateData=function(){var t=MapSVGAdminController.prototype.getTemplateData.call(this);t.databaseFields=this.mapsvg.database.getSchema().map(function(t){if("text"==t.type||"textarea"==t.type||"post"==t.type)return"post"==t.type?"Object.post.url":"Object."+t.name}),t.regionFields=this.mapsvg.regionsDatabase.getSchema().map(function(t){if("text"==t.type||"textarea"==t.type||"post"==t.type)return"post"==t.type?"Region.post.url":"Region."+t.name}),t.zoomLevels=[];for(var e=1;e<21;)t.zoomLevels.push(e++);return t}}((jQuery,window));
!function(a,e){function o(e,o,r){this.name="colors",MapSVGAdminController.call(this,e,o,r)}e.MapSVGAdminColorsController=o,MapSVG.extend(o,e.MapSVGAdminController),o.prototype.setEventHandlers=function(){var r=this,e=r.mapsvg.options.colors.selected,o=r.mapsvg.options.colors.hover,s=r.mapsvg.options.colors.markers;a("#mapsvg-controls-hover-brightness").ionRangeSlider({type:"single",grid:!0,min:-100,max:100,from:a.isNumeric(o)?o:0}),a("#mapsvg-controls-selected-brightness").ionRangeSlider({type:"single",grid:!0,min:-100,max:100,from:a.isNumeric(e)?e:0}),a("#mapsvg-controls-markers-base-o").ionRangeSlider({type:"single",min:0,max:100,from:s.base.opacity}),a("#mapsvg-controls-markers-base-s").ionRangeSlider({type:"single",min:0,max:100,from:s.base.saturation}),a("#mapsvg-controls-markers-hovered-o").ionRangeSlider({type:"single",min:0,max:100,from:s.hovered.opacity}),a("#mapsvg-controls-markers-hovered-s").ionRangeSlider({type:"single",min:0,max:100,from:s.hovered.saturation}),a("#mapsvg-controls-markers-unhovered-o").ionRangeSlider({type:"single",min:0,max:100,from:s.unhovered.opacity}),a("#mapsvg-controls-markers-unhovered-s").ionRangeSlider({type:"single",min:0,max:100,from:s.unhovered.saturation}),a("#mapsvg-controls-markers-active-o").ionRangeSlider({type:"single",min:0,max:100,from:s.active.opacity}),a("#mapsvg-controls-markers-active-s").ionRangeSlider({type:"single",min:0,max:100,from:s.active.saturation}),a("#mapsvg-controls-markers-inactive-o").ionRangeSlider({type:"single",min:0,max:100,from:s.inactive.opacity}),a("#mapsvg-controls-markers-inactive-s").ionRangeSlider({type:"single",min:0,max:100,from:s.inactive.saturation}),a(".mapsvg-color-brightness").on("change",":radio",function(){var e=a(this).closest(".mapsvg-color-brightness :radio:checked").val(),o=a(this).closest(".form-group");"color"==e?(o.find(".cpicker").show(),o.find(".irs").hide()):(o.find(".cpicker").hide(),o.find(".irs").show())}),a.isNumeric(e)?(a("#mapsvg-colors-selected :radio").eq(0).prop("checked",!1).parent().removeClass("active"),a("#mapsvg-colors-selected :radio").eq(1).prop("checked",!0).parent().addClass("active"),a("#mapsvg-colors-selected .cpicker").hide(),a("#mapsvg-colors-selected .irs").show()):(a("#mapsvg-colors-selected :radio").eq(0).prop("checked",!0).parent().addClass("active"),a("#mapsvg-colors-selected :radio").eq(1).prop("checked",!1).parent().removeClass("active"),a("#mapsvg-colors-selected .cpicker").show().find("input").val(e),a("#mapsvg-colors-selected .irs").hide()),a.isNumeric(o)?(a("#mapsvg-colors-hover :radio").eq(0).prop("checked",!1).parent().removeClass("active"),a("#mapsvg-colors-hover :radio").eq(1).prop("checked",!0).parent().addClass("active"),a("#mapsvg-colors-hover .cpicker").hide(),a("#mapsvg-colors-hover .irs").show()):(a("#mapsvg-colors-hover :radio").eq(0).prop("checked",!0).parent().addClass("active"),a("#mapsvg-colors-hover :radio").eq(1).prop("checked",!1).parent().removeClass("active"),a("#mapsvg-colors-hover .cpicker").show().find("input").val(o),a("#mapsvg-colors-hover .irs").hide()),a("#mapsvg-controls-gauge").on("change",":radio",function(){var e=MapSVG.parseBoolean(a("#mapsvg-controls-gauge :radio:checked").val());a("#table-regions").removeClass("mapsvg-gauge-on"),e&&a("#table-regions").addClass("mapsvg-gauge-on"),e?a("#mapsvg-gauge-options").show():a("#mapsvg-gauge-options").hide(),r.admin.updateScroll()}),r.view.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(e){var o=a(this).find("input");""==o.val()&&a(this).find("i").css({"background-color":""}),r.formToObjectUpdate({target:o[0]})})}}(jQuery,window);
!function(s,e){function t(e,t,s){this.name="css",this.disableHorizontalScroll=!0,MapSVGAdminController.call(this,e,t,s)}e.MapSVGAdminCssController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.viewLoaded=function(){var t=this;this.editors={},this.textarea=this.view.find("#mapsvg-css-editor"),this.textarea.val(t.mapsvg.getData().options.css),this.editors.css=CodeMirror.fromTextArea(this.textarea[0],{mode:"css",matchBrackets:!0,lineNumbers:!0}),this.editors.css.on("change",function(){t.mapsvg.setCss(t.editors.css.getValue())}),s(e).on("resize.codemirror.css",function(){t.resizeEditor()}),t.resizeEditor(),t.exampleCode=null,t.cssCodeLoaded=!1,this.view.on("click","#mapsvg-css-menu a",function(e){e.preventDefault(),s(this).tab("show"),"#mapsvg-css-default"==s(this).attr("href")?t.cssCodeLoaded?t.highlighDefaultCss():s.get(t.mapsvg.getCssUrl(),function(e){s("#mapsvg-css-default-editor").val(e),t.highlighDefaultCss(),t.cssCodeLoaded=!0}):t.exampleCode&&t.exampleCode.toTextArea()}).on("shown.bs.tab",function(e){t.resizeEditor()})},t.prototype.resizeEditor=function(){this.view.find(".CodeMirror")[0].CodeMirror.setSize(null,this.contentWrap.height()),this.view.find(".CodeMirror").height(this.contentWrap.height())},t.prototype.highlighDefaultCss=function(){this.exampleCode=CodeMirror.fromTextArea(s("#mapsvg-css-default-editor")[0],{mode:"css",lineNumbers:!0,matchBrackets:!0,readOnly:!0}),this.resizeEditor()},t.prototype.init=function(){}}(jQuery,window);
!function(r,t){function a(t,a,e){this.name="database",this.scrollable=!1,this.isParent=!0,this.database=e.getDatabaseService(),MapSVGAdminController.call(this,t,a,e)}t.MapSVGAdminDatabaseController=a,MapSVG.extend(a,t.MapSVGAdminController),a.prototype.viewLoaded=function(){var t=this;this.controllers.list=new MapSVGAdminDatabaseListController("mapsvg-data-list",t.admin,t.mapsvg),this.controllers.structure=new MapSVGAdminDatabaseStructureController("mapsvg-data-structure",t.admin,t.mapsvg),this.controllers.settings=new MapSVGAdminDatabaseSettingsController("mapsvg-data-settings",t.admin,t.mapsvg),this.controllers.csv=new MapSVGAdminDatabaseCsvController("mapsvg-data-csv",t.admin,t.mapsvg),this.controllers.csv.toolbarView=this.toolbarView,this.controllers.list.toolbarView=this.toolbarView,this.controllers.structure.toolbarView=this.toolbarView,this.controllers.settings.toolbarView=this.toolbarView,t.activeController=this.controllers.list,MapSVGAdminController.prototype.viewLoaded.call(this)},a.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this);var t=this;t.activeController&&t.activeController instanceof MapSVGAdminDatabaseStructureController&&(t.admin.rememberPanelsState(),t.admin.togglePanel("left",!1))},a.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.admin.restorePanelsState()},a.prototype.setEventHandlers=function(){var e=this;e.database.on("dataLoaded",function(){e.setFilters()}),this.view.on("click",".mapsvg-filter-delete",function(){var t=r(this).data("filter");delete e.mapsvg.database.query.filters[t],"search"===t&&r("#mapsvg-data-search").val(""),e.mapsvg.loadDataObjects(),e.setFilters(),e.controllers.list.redrawDataList()}),r("#mapsvg-data-menu a").click(function(t){return t.preventDefault(),"#mapsvg-data-source"===r(this).attr("href")?(e.loadDataSourceController(),!1):void r(this).tab("show")}).on("shown.bs.tab",function(t){var a=r(r(this).attr("href")).data("controller");(e.activeController=a).viewDidAppear();t=r(t.relatedTarget).attr("href");t&&(t=r(t).attr("data-controller"),e.controllers[t].viewDidDisappear()),"#mapsvg-data-list"==r(this).attr("href")?e.toolbarView.find(".mapsvg-toolbar-buttons").show():e.toolbarView.find(".mapsvg-toolbar-buttons").hide(),"#mapsvg-data-structure"==r(this).attr("href")?(e.admin.rememberPanelsState(),e.admin.togglePanel("left",!1)):e.admin.restorePanelsState(),"#mapsvg-data-list"==r(this).attr("href")&&r(".mapsvg-toolbar-buttons").show()})},a.prototype.loadDataSourceController=function(){var t=this;t.dataSourceContainer&&t.dataSourceContainer.empty().remove(),t.dataSourceContainer=r('<div class="mapsvg-modal-edit"></div>'),this.contentView.append(t.dataSourceContainer),t.dataSourceContainer.html("test")},a.prototype.setFilters=function(t){var a=this,t=this.toolbarView.find(".mapsvg-toolbar-filters").empty();if(a.mapsvg.database.query.filters&&0<Object.keys(a.mapsvg.database.query.filters).length)for(var e in a.mapsvg.database.query.filters)t.append('<div class="mapsvg-filter-tag">'+e+": "+a.mapsvg.database.query.filters[e]+' <span class="mapsvg-filter-delete" data-filter="'+e+'">×</span></div>');var r=document.getElementById("mapsvg-admin-controller-database");r.style.display="none",r.offsetHeight,r.style.display="flex"}}(jQuery,window);
!function(n,e){function t(e,t,r){this.name="database-csv",this.database=r.getDatabaseService(),MapSVGAdminController.call(this,e,t,r)}e.MapSVGAdminDatabaseCsvController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.setEventHandlers=function(){var o=this;this.view.find("#mapsvg-btn-csv-upload").on("click",function(){n(this);var a=n('input[name="convert_latlng_to_address"]').is(":checked");n("#mapsvg-csv-file")[0].files[0]?Papa.parse(n("#mapsvg-csv-file")[0].files[0],{header:!0,transformHeader:function(e){return e.toLowerCase().split(" ").join("_")},skipEmptyLines:!0,complete:function(e){var t,r;0===e.errors.length?o.import(e.data,a):(t="Errors: \n",1===e.errors.length&&"UndetectableDelimiter"===e.errors[0].code?(r=e.meta.fields[0],r=void 0!==o.database.schema.getField(r),1===e.meta.fields.length&&!0==r?o.import(e.data,a):(t+=e.errors[0].message,alert(t))):(t+=e.errors.map(function(e){return e.message+(void 0!==e.row?" (row: "+e.row+")":"")}).slice(0,5).join("\n"),5<e.errors.length&&(t+="\n...and "+(e.errors.length-5)+" more. "),alert(t)))}}):n.growl.error({title:"",message:"Please choose a file"})})},t.prototype.import=function(e,t){var r=n("#mapsvg-btn-csv-upload");r._button("loading");this.database.import(e,t).done(function(e){n.growl.notice({title:"",message:"File uploaded"})}).always(function(){r._button("reset")}).fail(function(){n.growl.error({title:"",message:"Server error"})})}}(jQuery,window);
!function(r,a){function t(a,t,e){var i=this;this.name="database-list",this.database=e.getDatabaseService(),this.database.on("schemaChange",function(){i.redrawDataList()}),i.database.on("dataLoaded",function(){i.redrawDataList()}),MapSVGAdminController.call(this,a,t,e)}a.MapSVGAdminDatabaseListController=t,MapSVG.extend(t,a.MapSVGAdminController),t.prototype.viewLoaded=function(){this.redrawDataList(),this.btnAdd=r("#mapsvg-btn-data-add")},t.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this),this.databaseTimestamp<this.database.lastChangeTime&&this.redrawDataList()},t.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.closeFormHandler()},t.prototype.setEventHandlers=function(){var t,o=this;r("#mapsvg-data-search").on("keyup",function(){t&&clearTimeout(t);var a=this;t=setTimeout(function(){o.mapsvg.database.getAll({filters:{search:r(a).val()},searchFallback:!0}),o.redrawDataList()},300)}),r("#mapsvg-data-search-cols").on("click","li a",function(a){a.preventDefault();a=r(this).text();r(this).closest(".input-group").find(".mapsvg-serch-field").text(a),o.searchField=a}),this.toolbarView.on("click",".mapsvg-data-cols a",function(a){a.preventDefault(),r(this).closest("li").toggleClass("active");var t,e=o.database.getSchema(),i=r(this).data("field");for(t in e)i==e[t].name&&(e[t].visible=!e[t].visible);o.database.saveSchema(e)}),r("#mapsvg-btn-data-add").on("click",function(a){a.preventDefault(),o.editDataObject()}),this.view.on("click",".mapsvg-data-row",function(a){r(this).hasClass("active")||o.editDataObject(r(this).data("id"))}).on("click",".mapsvg-data-delete",function(a){a.preventDefault(),a.stopPropagation();a=r(this).closest("tr");o.deleteDataRow(a)}).on("click",".mapsvg-data-copy",function(a){a.preventDefault(),a.stopPropagation(),o.copyDataObject(r(this).closest("tr").data("id"))})},t.prototype.getTemplateData=function(){return{fields:this.getDataFieldsForTemplate(!0),data:this.database.getLoaded()}},t.prototype.getDataFieldsForTemplate=function(t){var e=[{name:"id",visible:!0,type:"id"}],a=this.database.getSchema();return a&&a.forEach(function(a){return!t||a.visible?e.push(a):void 0}),e},t.prototype.redrawDataList=function(){var a=this;a.redraw(),this.contentWrap.find(".jspPane").css({top:0});var t=a.database.getColumns();t.length<2&&(r("#mapsvg-data-list-table").hide(),r("#mapsvg-setup-database-msg").show());var e=a.toolbarView.find(".mapsvg-data-cols");e.empty(),t.forEach(function(a){e.append(r('<li class="'+(a.visible?"active":"")+'"><a href="#" data-field="'+a.name+'">'+a.name+"</a></li>"))});t=this.mapsvg.getPagination(function(){a.redrawDataList()});this.view.find(".mapsvg-pagination-container").html(t)},t.prototype.addDataRow=function(a){var t,e=this,i={fields:e.database.getColumns({visible:!0}),params:a};for(t in i.fields)"region"==i.fields[t].type&&(i.fields[t].options=[],i.fields[t].optionsDict={},e.mapsvg.getData().regions.forEach(function(a){i.fields[t].options.push({id:a.id,title:a.title}),i.fields[t].optionsDict[a.id]=a.title||a.id}));a=r(e.templates.item(i));return this.view.find("#mapsvg-data-list-table tbody").prepend(a),a},t.prototype.updateDataRow=function(a,t){var e,i=this,o={fields:i.database.getColumns({visible:!0}),params:a};for(e in o.fields)"region"==o.fields[e].type&&(o.fields[e].options=[],o.fields[e].optionsDict={},i.mapsvg.getData().regions.forEach(function(a){o.fields[e].options.push({id:a.id,title:a.title}),o.fields[e].optionsDict[a.id]=a.title||a.id}));var s=r(i.templates.item(o));(t=t||r("#mapsvg-data-"+a.id)).replaceWith(s),s.addClass("mapsvg-row-updated"),setTimeout(function(){s.removeClass("mapsvg-row-updated")},2600)},t.prototype.deleteDataRow=function(a){var t=a.data("id"),e=this.database.getLoadedObject(t);e.location&&e.location.marker&&e.location.marker.delete(),this.database.delete(t),a.fadeOut(300,function(){a.remove()})},t.prototype.editDataObject=function(a,t,e){var i=this;newRecord="string"!=typeof(a=a||{})&&"number"!=typeof a||(a=i.database.getLoadedObject(a),!1),e=!0===e||!newRecord,i.btnAdd.addClass("disabled"),i.tableDataActiveRow&&i.tableDataActiveRow.removeClass("mapsvg-row-selected"),a&&a.id&&(newRecord=!1,i.updateScroll(),i.tableDataActiveRow=r("#mapsvg-data-"+a.id),i.tableDataActiveRow.addClass("mapsvg-row-selected"),t&&i.contentWrap.data("jsp").scrollToElement(i.tableDataActiveRow,!0,!1)),i.admin.mediaUploader||(i.admin.mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose images",button:{text:"Choose images"},multiple:!0})),i.formBuilder&&(i.formBuilder.destroy(),i.formBuilder=null,i.formBuilderRow&&i.formBuilderRow.remove()),i.formContainer&&i.formContainer.empty().remove(),i.formContainer=r('<div class="mapsvg-modal-edit"></div>'),this.view.append(i.formContainer);a.marker&&a.marker.id&&a.marker.id;i.formBuilder=new MapSVG.FormBuilder({container:i.formContainer,schema:i.database.getSchema(),editMode:!1,mapsvg:i.mapsvg,mediaUploader:i.admin.mediaUploader,data:a,admin:i.admin,closeOnSave:e,events:{save:function(a){newRecord?(i.formBuilder.marker&&(i.unsavedMarker=i.formBuilder.marker),i.saveDataObject(a).done(function(){})):i.updateDataObject(a).done(function(){}),e?this.close():(i.formBuilder.redraw(),i.mapsvg.hideMarkersExceptOne())},close:function(){i.closeFormHandler()},init:function(a){a=a.location&&a.location.marker?a.location.marker.id:null;i.mapsvg.hideMarkersExceptOne(a)}}})},t.prototype.copyDataObject=function(a){var t={};r.extend(t,this.database.getLoadedObject(a)),t.id=null,t.location&&t.location instanceof MapSVG.Location&&(a=t.location.toJSON(),t.location=new MapSVG.Location(a),new MapSVG.Marker({location:t.location,mapsvg:this.mapsvg,object:t})),this.editDataObject(t,!1,!0)},t.prototype.saveDataObject=function(a){var t=this,e=this.addDataRow(a);return this.database.create(a).done(function(a){t.updateDataRow(a,e),a.location&&t.unsavedMarker&&a.location.marker.setObject(a)}).fail(function(){r.growl.error({title:"Server error",message:"Can't create object"}),e.remove()})},t.prototype.updateDataObject=function(a){return a.location&&a.location.marker&&(a.location.marker.setId("marker_"+a.id),a.location.marker.setObject(a)),this.closeFormHandler(),this.updateDataRow(a),this.database.update(a).fail(function(){r.growl.error({title:"Server error",message:"Can't update object"})})},t.prototype.closeFormHandler=function(){var a=this;a.btnAdd.removeClass("disabled"),a.mapsvg.showMarkers(),a.mapsvg.getData().options.clustering.on&&a.mapsvg.addLocations(),a.formBuilder&&(a.formBuilder.destroy(),a.formBuilder=null,a.formContainer.empty().remove(),a.tableDataActiveRow&&a.tableDataActiveRow.removeClass("mapsvg-row-selected"),a.tableDataActiveRow&&!a.tableDataActiveRow.hasClass("mapsvg-row-updated")&&a.tableDataActiveRow.addClass("mapsvg-row-closed"),setTimeout(function(){a.tableDataActiveRow&&!a.tableDataActiveRow.hasClass("mapsvg-row-updated")&&a.tableDataActiveRow.removeClass("mapsvg-row-closed")},1600),r("a.browser").remove(),"editMarkers"==a.admin.getData().mode&&a.admin.setPreviousMode()),this.updateScroll()}}(jQuery,window);
!function(a,e){function t(e,a,t){this.name="database-settings",this.database=t.getDatabaseService(),MapSVGAdminController.call(this,e,a,t)}e.MapSVGAdminDatabaseSettingsController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.setEventHandlers=function(){var e=this;this.view.on("click","#mapsvg-clear-database-btn",function(){confirm("Are you sure you want to clear the database?")&&e.database.clear().done(function(){a.growl.notice({title:"",message:"Database is cleared"})}).fail(function(){a.growl.error({title:"Server error",message:"Can't clear the database"})})})}}(jQuery,window);
!function(a,e){function t(e,t,a,i){this.name="database-structure",this.scrollable=!1,this.database=a.getDatabaseService(),MapSVGAdminController.call(this,e,t,a)}e.MapSVGAdminDatabaseStructureController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.viewDidAppear=function(){var t=this;MapSVGAdminController.prototype.viewDidAppear.call(this),t.formBuilder=new MapSVG.FormBuilder({schema:t.database.getSchema(),editMode:!0,mapsvg:t.mapsvg,admin:t.admin,container:this.contentView,events:{saveSchema:function(e){t.database.schema.get();t.mapsvg.id?t.database.saveSchema(e).done(function(){a.growl.notice({title:"",message:"Settings saved",duration:700}),t.admin.save()}).fail(function(){a.growl.error({title:"Server error",message:"Can't save settings"})}):t.admin.save().done(function(){t.database.map_id=t.mapsvg.id,t.database.saveSchema(e).done(function(){}).fail(function(){a.growl.error({title:"Error",message:"Can't save settings"})})}).fail(function(){a.growl.error({title:"Error",message:"Can't save settings"})})},load:function(){setTimeout(function(){a("#mapsvg-btn-database-structure").tooltip("show").tooltip("hide")},200)}}})},t.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.formBuilder&&this.formBuilder.destroy()},t.prototype.setEventHandlers=function(){}}(jQuery,window);
!function(n){function o(n,o,t){this.name="details",MapSVGAdminController.call(this,n,o,t)}n.MapSVGAdminDetailsController=o,MapSVG.extend(o,n.MapSVGAdminController),o.prototype.viewLoaded=function(){}}((jQuery,window));
!function(n,t){function e(t,e,i){this.name="directory",MapSVGAdminController.call(this,t,e,i)}t.MapSVGAdminDirectoryController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.setEventHandlers=function(){var t=this.view.find("#mapsvg-directory-filterout");t.on("change","#mapsvg-directory-filter-control",function(){n(this).val()?t.find("#mapsvg-filterout-extra").show():t.find("#mapsvg-filterout-extra").hide()})},e.prototype.updateDirSource=function(t){t=t||this.mapsvg.getData().options.menu.source,this.view.find("#mapsvg-dir-object-2").html("database"==t?"Database object":"Region object")},e.prototype.setDatabase=function(t){this.database="regions"==t?this.mapsvg.regionsDatabase:this.mapsvg.database},e.prototype.viewLoaded=function(){var e=this;e.setDatabase(this.mapsvg.getData().options.menu.source),e.updateDirSource(),e.setSortFields(),this.mapsvg.database.on("schemaChange",function(){e.setSortFields()}),this.mapsvg.regionsDatabase.on("schemaChange",function(){e.setSortFields()}),this.view.find("#mapsvg-directory-data-source").on("change",":radio",function(){var t=n(this).val();e.setDatabase(t),e.setSortFields(),e.updateDirSource(t),e.admin.getData().controllers.actions&&e.admin.getData().controllers.actions.updateDirSource(t)}),this.view.find("#mapsvg-directory-sort-control").mselect2(),this.view.find("#mapsvg-directory-group-control").mselect2(),this.view.find("#mapsvg-directory-filter-control").mselect2(),this.view.find("#mapsvg-directory-filter-cond-control").mselect2(),this.view.on("change","#mapsvg-details-width :radio",function(){"full"!=n(this).closest(".form-group").find(":radio:checked").val()?n("#mapsvg-details-width-custom").prop("disabled",!1).trigger("keyup"):n("#mapsvg-details-width-custom").prop("disabled",!0)}),e.updateSortList()},e.prototype.updateSortList=function(){},MapSVGAdminController.prototype.getTemplateData=function(){var t=this.mapsvg.getOptions(!0,null,this.admin.getData().optionsDelta);return t.fulltext_min_word_len=mapsvg_fulltext_min_word,t},e.prototype.setSortFields=function(){var e=this,i="regions"==n("#mapsvg-directory-data-source :radio:checked").val()?["id","title"]:["id"],t=this.database.getSchema(),o=[];t&&t.forEach(function(t){i.push(t.name),"select"!==t.type&&"radio"!==t.type&&"status"!==t.type&&"region"!==t.type||o.push(t.name)});var a=i.map(function(t){return"<option "+(e.templateData.menu.sortBy==t?"selected":"")+">"+t+"</option>"}),r=i.map(function(t){return"<option "+(e.templateData.menu.filterout.field==t?"selected":"")+">"+t+"</option>"}),t=o.map(function(t){return"<option "+(e.templateData.menu.categories.groupBy==t?"selected":"")+">"+t+"</option>"});r.unshift('<option value="">(no filter)</option>'),t.unshift('<option value="">...</option>'),this.view.find("#mapsvg-directory-sort-control").html(a).trigger("change"),this.view.find("#mapsvg-directory-group-control").html(t).trigger("change"),this.view.find("#mapsvg-directory-filter-control").html(r).trigger("change"),this.view.find("#mapsvg-directory-filter-cond-control").val(e.templateData.menu.filterout.cond)}}(jQuery,window);
!function(i,t){function e(t,e,i){this.name="draw-region",this.svgObject=null,MapSVGAdminController.call(this,t,e,i)}t.MapSVGAdminDrawRegionController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.setEventHandlers=function(){var a=this;this.svgObject&&"image"==this.svgObject.tagName?a.view.on("change",".mapsvg-draw-image-upload",function(t){i.each(t.target.files,function(t,e){var i=new FileReader;i.onload=function(t){var e=t.target.result,t=new Image;t.onload=function(){a.drawer.updateShape(a.svgObject,{"xlink:href":e}),a.drawer.updateShape(a.svgObject,{width:this.width}),a.drawer.updateShape(a.svgObject,{height:this.height}),a.view.find('[name="width"]').val(this.width),a.view.find('[name="height"]').val(this.height)},t.src=e},i.readAsDataURL(e)})}):a.view.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(t){var e=i(this).find("input");""==e.val()&&i(this).find("i").css({"background-color":""}),a.formToObjectUpdate({target:e[0]})})},e.prototype.setObject=function(t){this.svgObject=t,this.setMainTemplate(t.tagName),this.loaded&&(this.redraw(),this.setEventHandlers())},e.prototype.destroy=function(){this.view.find(".cpicker").colorpicker("destroy"),MapSVGAdminController.prototype.destroy.call(this)},e.prototype.viewUnloaded=function(){MapSVGAdminController.prototype.viewUnloaded.call(this)},e.prototype.setDrawer=function(t){this.drawer=t},e.prototype.formToObjectUpdater=function(t){this.drawer.updateShape(this.svgObject,t)},e.prototype.getTemplateData=function(){var t=this,e={};if(t.svgObject)switch(e={id:i(t.svgObject).data("new-id")?i(t.svgObject).data("new-id"):t.svgObject.getAttribute("id"),title:t.svgObject.getAttribute("title")},this.svgObject.tagName){case"path":case"ellipse":case"circle":case"rect":case"polygon":e.style={fill:i(t.svgObject).css("fill")||t.svgObject.getAttribute("fill"),stroke:i(t.svgObject).css("stroke")||t.svgObject.getAttribute("stroke"),"stroke-width":i(t.svgObject).data("stroke-width")};break;case"image":e.x=t.svgObject.getAttribute("x"),e.y=t.svgObject.getAttribute("y"),e.width=t.svgObject.getAttribute("width"),e.height=t.svgObject.getAttribute("height")}return e}}(jQuery,window);
!function(d,a){function t(t,e,a){this.name="draw",this.map=a.getData().$map,this.svg=a.getData().$svg,this.changed=!1,this.scrollable=!1,this.changes=[],this.mode="edit",this.snap=!0,this.lastClickTime=0,this.lastChangeTime=0,this.hints=[],this.hintHover="",MapSVGAdminController.call(this,t,e,a),this.filepath=this.mapsvg.getData().options.source,-1==this.filepath.indexOf(mapsvg_paths.uploads)&&(this.readOnly=!0)}a.MapSVGAdminDrawController=t,MapSVG.extend(t,a.MapSVGAdminController),t.prototype.viewDidAppear=function(){var t=this;MapSVGAdminController.prototype.viewDidAppear.call(this),this.defScroll=t.mapsvg.getData().options.scroll.on,t.mapsvg.setScroll({on:!1}),d("#mapsvg-save").hide(),d("#mapsvg-save-svg").show(),t.readOnly&&t.setReadOnly(!0),this.loaded&&t.setEventHandlers(),this.reindex()},t.prototype.reindex=function(t){for(var e=this.svg[0].getElementsByTagName("*"),a=0;a<e.length;a++)d(e[a]).data("index",a),this.lastindex=a},t.prototype.viewUnloaded=function(t){var e=this;MapSVGAdminController.prototype.viewUnloaded.call(e),d("#mapsvg-save-svg").hide(),d("#mapsvg-save").show(),e.mapsvg.eventsRestore(),e.mapsvg.setScroll({on:this.defScroll}),this.resaveMsg&&this.resaveMsg.remove(),e.editingShape&&(e.editingShape.unclosed?e.removeShape(e.editingShape.obj):e.editingShapeUnset()),e.controllers.region&&(e.admin.unloadController(e.controllers.region),e.controllers.region=null),d(a).off(".draw.mapsvg"),this.map.off(".draw.mapsvg"),this.view.off(),d("body").off("click.mapsvg-save-svg"),d("body").off("click.mapsvg-save-svg-copy"),e.hide(),e.viewDidDisappear()},t.prototype.viewLoaded=function(t){MapSVGAdminController.prototype.viewLoaded.call(this),this.hint()},t.prototype.setReadOnly=function(t){t?(this.readOnly=!0,d("#mapsvg-admin").addClass("mapsvg-read-only"),d("#mapsvg-save-svg").prop("disabled",!0),this.resaveMsg=d('<div id="mapsvg-save-svg-copy-message" class="well"></div>'),this.resaveMsg.html('This SVG file is "read-only". Save a copy of the file into WP Uploads folder?<br /><br />'),t=d('<button class="btn btn-sm btn-primary" id="mapsvg-save-svg-copy" data-loading-text="Saving...">Save</button>'),this.resaveMsg.append(t),d("#mapsvg-admin").append(this.resaveMsg)):this.readOnly&&(this.readOnly=!1,d("#mapsvg-admin").removeClass("mapsvg-read-only"),d("#mapsvg-save-svg").prop("disabled",!1),this.resaveMsg.remove())},t.prototype.clickToSVG=function(t){var e=this,a=MapSVG.mouseCoords(t),t=a.x-e.svg.offset().left,a=a.y-e.svg.offset().top;return e.mapsvg.convertPixelToSVG([t,a])},t.prototype.setEventHandlers=function(){var n=this;switch(d(a).off(".draw.mapsvg"),this.map.off(".draw.mapsvg"),this.view.off(),this.view.on("mouseenter","#mapsvg-draw-tools .btn",function(t){d(this).data("hint")&&(n.hintHover=d(this).data("hint"),n.hint())}).on("mouseleave","#mapsvg-draw-tools .btn",function(t){d(this).data("hint")&&(n.hintHover=null,n.hint())}),this.mode){case"draw":n.mapsvg.eventsPrevent("click"),n.mapsvg.eventsPrevent("mouseover"),n.mapsvg.eventsPrevent("mouseout");n.map.on("click.draw.mapsvg",function(t){var e=n.clickToSVG(t),t=(new Date).getTime();t-n.lastClickTime<300?n.closePath():n.editingShape?n.addPointToPath(n.editingShape.lastPoint):n.startPath(e),n.lastClickTime=t});break;case"edit":n.mapsvg.eventsPrevent("click"),n.mapsvg.eventsPrevent("mouseover"),n.mapsvg.eventsPrevent("mouseout"),d(a).on("keyup.draw.mapsvg",function(t){t.preventDefault(),"INPUT"!=t.target.tagName&&8==t.keyCode&&(n.editingPoint?n.removeEditingPoint():n.editingShape&&n.removeShape(n.editingShape.obj))}),n.mapsvg.getData().$map.on("mouseover.draw.mapsvg",".mapsvg-region",function(){}),n.mapsvg.getData().$map.on("mouseout.draw.mapsvg",".mapsvg-region",function(){}),n.mapsvg.getData().$map.on("mousedown.draw.mapsvg",function(t){if(t.originalEvent.preventDefault(),d(t.target).hasClass("mapsvg-path-point-new")){var e=n.addNewPoint(n.editingShape.newPoint.getAttribute("cx"),n.editingShape.newPoint.getAttribute("cy"),t);n.dragPointStart(t,e)}else if(d(t.target).hasClass("mapsvg-path-point"))n.dragPointStart(t);else{if(-1===["path","image","circle","polyline","polygon","ellipse","rect"].indexOf(t.target.tagName))return!1;n.editingShape&&n.editingShape.obj===this||n.editShape(t.target),n.editingPoint&&n.editingPointUnset(),-1!==["path","image","polygon","polyline","rect","ellipse","circle"].indexOf(t.target.tagName)&&(n.dragShapeStart(t),n.mapsvg.getData().$map.on("mousemove.2.draw.mapsvg",function(t){n.dragShapeMove(t)}),n.mapsvg.getData().$map.on("mouseup.2.draw.mapsvg",function(t){n.dragShapeEnd(t)}))}}),n.mapsvg.getData().$map.on("mouseup.draw.mapsvg",".mapsvg-image-background",function(t){t.originalEvent.preventDefault(),n.editingShape&&n.editingShape.obj===this||n.editShape(this)}),n.editingShape&&(d(a).off("keyup.esc.draw.mapsvg"),d(a).on("keyup.esc.draw.mapsvg",function(t){27==t.keyCode&&n.editingShape&&n.editingShapeUnset()}),"path"==n.editingShape.obj.tagName&&n.mapsvg.getData().$map.on("mousemove.draw.mapsvg",function(t){var a,t={x:(t=n.mapsvg.convertMouseToSVG(t))[0],y:t[1]},i=n.getIntersectionWithEditingShape(t);i&&(a=n.mapsvg.getScale(),n.editingShape.points.forEach(function(t){var e=t.getAttribute("cx"),t=t.getAttribute("cy");Math.abs(i.x-e)<10/a&&Math.abs(i.y-t)<10/a&&(i=!1)})),i?(n.editingShape.newPoint.setAttribute("cx",i.x),n.editingShape.newPoint.setAttribute("cy",i.y),n.editingShape.newPoint.style.display="block"):n.editingShape.newPoint.style.display="none"}))}d("body").off("click.mapsvg-save-svg"),d("body").on("click.mapsvg-save-svg","#mapsvg-save-svg",function(){n.saveSvg()}),this.view.on("change","#mapsvg-draw-mode input",function(t){n.setMode(d(this).val())}),this.view.on("change","#mapsvg-draw-btn-magnet",function(){n.setSnap(d(this).prop("checked"))}),this.view.on("click","#mapsvg-draw-undo",function(){n.undo()}),n.readOnly&&d("body").on("click.mapsvg-save-copy","#mapsvg-save-svg-copy",function(){d(this)._button("loading"),d.post(ajaxurl,{action:"mapsvg_svg_copy",filepath:n.filepath,_wpnonce:MapSVG.nonce}).done(function(t){(t=jQuery.parseJSON(t)).filepath?(n.filepath=t.filepath,n.mapsvg.update({source:n.filepath}),n.admin.save(!0),n.setReadOnly(!1)):t.error&&alert(t.error)}).always(function(){d("#mapsvg-save-svg-copy")._button("reset")})})},t.prototype.drawStart=function(t){},t.prototype.drawMove=function(t){},t.prototype.drawEnd=function(t){},t.prototype.dragPointStart=function(t,e){var a=this;a.isDragging=!0;e=void 0!==e?e:d(t.target).data("index");a.editingShape.pathData=a.editingShape.obj.getPathData({normalize:!0});var i=a.editingShape.pathData[e];a.editingPoint&&a.editingPointUnset();var n=a.editingShape.points[e];d(n).addClass("active"),a.editingPoint={pointOriginal:d.extend(!0,{},i),circle:n,index:e},a.dragStartMouseCoords=a.clickToSVG(t),a.editingShape.d=a.editingShape.obj.getAttribute("d"),a.loadSnapPoints(),a.mapsvg.getData().$map.on("mousemove.dragpoint.draw.mapsvg",function(t){a.dragPointMove(t)}),a.mapsvg.getData().$map.on("mouseup.dragpoint.draw.mapsvg",function(t){a.dragPointEnd(t,i)}),a.hint()},t.prototype.dragPointMove=function(t){var e=this,a=e.clickToSVG(t),i=a[0]-e.dragStartMouseCoords[0],t=a[1]-e.dragStartMouseCoords[1],a=d.extend(!0,{},e.editingPoint.pointOriginal);a.values[0]+=i,a.values[1]+=t,this.snap&&(a.values=e.doSnap(a.values)),e.editingPoint.circle.setAttribute("cx",a.values[0]),e.editingPoint.circle.setAttribute("cy",a.values[1]),e.editingShape.pathData[e.editingPoint.index]=a,e.editingShape.obj.setPathData(e.editingShape.pathData)},t.prototype.dragPointEnd=function(t){var e=this;this.mapsvg.getData().$map.off("mousemove.dragpoint.draw.mapsvg"),this.mapsvg.getData().$map.off("mouseup.dragpoint.draw.mapsvg"),this.isDragging=!1;t=e.clickToSVG(t);t[0]!=e.dragStartMouseCoords[0]&&t[1]!=e.dragStartMouseCoords[1]&&e.addChange("update",e.editingShape.obj,{d:e.editingShape.obj.getAttribute("d")},{d:e.editingShape.d}),e.loadIntersectionPoints()},t.prototype.getDragShapeProperties=function(t){var e=this;switch(e.editingShape.obj.tagName){case"path":return{d:e.editingShape.obj.getAttribute("d")};case"ellipse":case"circle":return{cx:parseFloat(e.editingShape.obj.getAttribute("cx")),cy:parseFloat(e.editingShape.obj.getAttribute("cy"))};case"image":case"rect":return{x:parseFloat(e.editingShape.obj.getAttribute("x")),y:parseFloat(e.editingShape.obj.getAttribute("y"))};case"polygon":case"polyline":return{points:parseFloat(e.editingShape.obj.getAttribute("points"))}}},t.prototype.dragShapeStart=function(t){var e=this;this.isDragging=!0,e.dragXY=e.clickToSVG(t),e.dragStartMouseCoords=e.dragXY,e.editingShape.dragProperties=e.getDragShapeProperties()},t.prototype.dragShapeMove=function(t,e,a){var i,n,o=this,t=o.clickToSVG(t),s=t[0]-o.dragXY[0],p=t[1]-o.dragXY[1];switch(o.editingShape.obj.tagName){case"path":(i=o.editingShape.obj.getPathData({normalize:!0})).forEach(function(t,e){if(t.values&&t.values.length){for(var a in t.values)t.values[a]+=a%2?p:s;t.values[t.values.length-2],t.values[t.values.length-1];o.editingShape.points[e].setAttribute("cx",t.values[0]),o.editingShape.points[e].setAttribute("cy",t.values[1])}}),o.editingShape.obj.setPathData(i);break;case"ellipse":case"circle":var d=parseFloat(o.editingShape.obj.getAttribute("cx"))+s,r=parseFloat(o.editingShape.obj.getAttribute("cy"))+p;o.editingShape.obj.setAttribute("cx",d),o.editingShape.obj.setAttribute("cy",r);break;case"image":case"rect":d=parseFloat(o.editingShape.obj.getAttribute("x"))+s,r=parseFloat(o.editingShape.obj.getAttribute("y"))+p;o.editingShape.obj.setAttribute("x",d),o.editingShape.obj.setAttribute("y",r);break;case"polygon":case"polyline":for(n in i=o.editingShape.obj.getAttribute("points").replace(/\s\s+/g," ").split(" ")){var g=i[n].split(",");g[0]=parseFloat(g[0])+s,g[1]=parseFloat(g[1])+p,i[n]=g.join(",")}o.editingShape.obj.setAttribute("points",i.join(" "))}o.dragXY=t},t.prototype.dragShapeEnd=function(t){var e=this;this.mapsvg.getData().$map.off("mousemove.2.draw.mapsvg"),this.mapsvg.getData().$map.off("mouseup.2.draw.mapsvg"),this.isDragging=!1;t=e.clickToSVG(t);t[0]!=e.dragStartMouseCoords[0]&&t[1]!=e.dragStartMouseCoords[1]&&e.addChange("update",e.editingShape.obj,e.getDragShapeProperties(),e.editingShape.dragProperties),"path"==e.editingShape.obj.tagName&&e.loadIntersectionPoints()},t.prototype.editShape=function(t){var n=this;if(n.editingShapeUnset(),n.editingShape={obj:t},"polygon"==t.tagName||"polyline"==t.tagName){var e,a=document.createElementNS("http://www.w3.org/2000/svg","path");for(e in t.attributes)["points"].includes(e.name)||a.setAttribute(e.name,e.value);a.setPathData(t.getPathData({normalized:!0})),n.removeShape(t);var i=t.parentNode;t=a,i.appendChild(t),n.addChange("create",t),n.reindex();d(n.changes[n.changes.length-1].data).data("index")}n.editingShape={obj:t};i=t.getAttribute("class")||"";i&&-1!=i.indexOf("active")||t.setAttribute("class",i+" active"),n.controllers.region&&(n.admin.unloadController(n.controllers.region),n.controllers.region=null),n.controllers.region=n.admin.loadController("tab_draw_region","drawRegion"),n.controllers.region.events={onload:function(){this.setObject(t)}},n.controllers.region.setDrawer(n),"path"==t.tagName&&(a=t.getPathData({normalize:!0}),n.editingShape.points=[],a.forEach(function(t,e){var a,i;t.values&&t.values.length&&(a=document.createElementNS(n.svg[0].namespaceURI,"circle"),i=t.values[t.values.length-2],t=t.values[t.values.length-1],a.setAttribute("cx",i),a.setAttribute("cy",t),a.setAttribute("r",5/n.mapsvg.getScale()),a.setAttribute("class","mapsvg-path-point"),d(a).css("stroke-width",1),d(a).data("stroke-width",1),d(a).data("index",e),n.svg[0].appendChild(a),n.editingShape.points.push(a))}),(i=document.createElementNS(n.svg[0].namespaceURI,"circle")).setAttribute("cx",0),i.setAttribute("cy",0),i.setAttribute("r",5/n.mapsvg.getScale()),i.setAttribute("class","mapsvg-path-point mapsvg-path-point-new"),d(i).css("stroke-width",1),d(i).data("stroke-width",1),d(i).hide(),n.svg[0].appendChild(i),n.editingShape.newPoint=i,n.loadIntersectionPoints(),n.mapsvg.mapAdjustStrokes(),n.mapsvg.on("zoom",function(){n.adjustPointsSize()})),n.setEventHandlers(),this.hint()},t.prototype.adjustPointsSize=function(){var e=this;e.editingShape&&(e.editingShape.points&&e.editingShape.points.forEach(function(t){t.setAttribute("r",5/e.mapsvg.getScale()),d(t).css("stroke-width",1/e.mapsvg.getScale())}),e.editingShape.newPoint&&(e.editingShape.newPoint.setAttribute("r",5/e.mapsvg.getScale()),d(e.editingShape.newPoint).css("stroke-width",1/e.mapsvg.getScale())))},t.prototype.editingPointUnset=function(){d(this.editingPoint.circle).removeClass("active"),this.editingPoint=null,this.hint()},t.prototype.editingShapeUnset=function(){var e=this;e.editingShape&&e.editingShape.obj&&(e.mapsvg.off("zoom"),e.editingShape.points&&e.editingShape.points.forEach(function(t){e.svg[0].removeChild(t)}),e.editingShape.newPoint&&(d(e.editingShape.newPoint).remove(),e.editingShape.newPoint=null),e.editingShape.stroke&&e.svg[0].removeChild(e.editingShape.stroke),-1!=e.editingShape.obj.getAttribute("class").indexOf("active")&&e.editingShape.obj.setAttribute("class",e.editingShape.obj.getAttribute("class").replace(/active/g,""))),e.map.off("mousemove.draw.mapsvg"),this.editingShape=null,e.editingPoint=null,this.hint()},t.prototype.setMode=function(t){this.mode=t,this.editingShapeUnset(),this.setEventHandlers(),this.hint()},t.prototype.hint=function(t){var e;if(this.hintHover)d("#mapsvg-draw-status-line").html(this.hintHover);else switch(this.mode){case"draw":this.editingShape&&this.editingShape.obj?this.setHint("<code>Click</code> to add point. <code>Enter</code>: close path. <code>Double Click</code>: add point & close path. <code>Esc</code>: cancel. Hold <code>Spacebar</code> to scroll."):this.setHint("<code>Click</code> to start drawing. Hold <code>Spacebar</code> to scroll.");break;case"edit":this.editingShape&&this.editingShape.obj?this.editingPoint?this.setHint("<b>Point</b>: <code>Backspace</code>: delete point. Hold  <code>Spacebar</code> to scroll."):(e=this.editingShape.obj.tagName,t="<b>"+this.editingShape.obj.tagName+"</b>",t+=": <code>Drag</code> the object"+("path"==e?" or its points":"")+". <code>Backspace</code>: delete object. Hold  <code>Spacebar</code> to scroll.",this.setHint(t)):this.setHint("<code>Click</code> on an object to edit it. Hold  <code>Spacebar</code> to scroll.")}},t.prototype.setHint=function(t){d("#mapsvg-draw-status-line").html(t)},t.prototype.setSnap=function(t){this.snap=t,this.snap&&this.loadSnapPoints()},t.prototype.startPath=function(t){var e=this;return e.editingShape={},e.editingShape.unclosed=!0,e.editingShape.obj=document.createElementNS(e.svg[0].namespaceURI,"path"),e.editingShape.obj.setAttribute("d","M"+t[0]+" "+t[1]+" "),e.editingShape.d=e.editingShape.obj.getAttribute("d"),e.editingShape.lastPoint=t,e.editingShape.obj.setAttribute("class","active mapsvg-custom-shape mapsvg-region"),d(e.editingShape.obj).css({fill:"rgba(255,0,0,0.4)",stroke:"rgba(255,100,100,0.4)","stroke-width":1}).data("stroke-width",1),e.svg[0].appendChild(e.editingShape.obj),e.mapsvg.mapAdjustStrokes(),e.loadSnapPoints(),e.map.on("mousemove.draw.mapsvg",function(t){e.moveLastPathPoint(t)}),d(a).off("keyup.draw.mapsvg"),d(a).on("keyup.draw.mapsvg",function(t){13==t.keyCode?e.closePath():27==t.keyCode&&e.editingShape&&(e.editingShape.unclosed?(e.removeShape(e.editingShape.obj),e.map.off("mousemove.draw.mapsvg")):e.editingShapeUnset())}),this.hint(),e.editingShape},t.prototype.moveLastPathPoint=function(t){var e=this;e.editingShape.lastPoint=e.clickToSVG(t),this.snap&&(e.editingShape.lastPoint=e.doSnap(e.editingShape.lastPoint)),e.editingShape.obj.setAttribute("d",e.editingShape.d+"L"+e.editingShape.lastPoint[0]+" "+e.editingShape.lastPoint[1]+" ")},t.prototype.closePath=function(){var t=this;t.editingShape.obj.setAttribute("d",t.editingShape.d+"L"+t.editingShape.lastPoint[0]+" "+t.editingShape.lastPoint[1]+" "),t.editingShape.obj.setAttribute("d",t.editingShape.d+"z");var e=prompt("Enter Region ID");(e=e.replace(/\s/g,"_"))?(t.editingShape.obj.setAttribute("id",e),t.addChange("create",t.editingShape.obj),d(t.editingShape.obj).data("index",++t.lastindex),t.editingShape=null):t.removeShape(t.editingShape.obj),this.hint(),t.map.off("mousemove.draw.mapsvg"),d(a).off("keyup.draw.mapsvg")},t.prototype.addPointToPath=function(t){var e=this;return e.editingShape.obj.setAttribute("d",e.editingShape.d+"L"+t[0]+" "+t[1]+" "),e.editingShape.d=e.editingShape.obj.getAttribute("d"),e.editingShape},t.prototype.updateShape=function(t,e,a){var i,n=this,o={},s="string"==typeof t?n.svg.find("#"+t)[0]:t;for(i in e)if("style"==i&&"string"!=typeof e[i]){for(var p in o.style={},e[i])o.style[p]=d(s).css(p)||s.getAttribute(p),s.getAttribute(p)&&s.removeAttribute(p);"stroke-width"==p?(d(s).data("stroke-width",e[i][p]),n.mapsvg.mapAdjustStrokes()):d(s).css(e[i]),a||n.addChange("update",s,e,o)}else o[i]="id"==i?n.getObjectId(s):s.getAttribute(i),a||n.addChange("update",s,e,o),"id"==i?d(s).data("new-id",e[i]):s.setAttribute(i,e[i])},t.prototype.addChange=function(t,e,a,i){var n=this;switch(t){case"create":n.changes.push({action:"create",data:e});break;case"update":var o=n.changes[n.changes.length-1],s=Object.keys(a)[0],p=(new Date).getTime();p-n.lastChangeTime<500&&o&&"update"==o.action&&o.id==n.getObjectId(e)&&o.dataNew[s]?n.changes[n.changes.length-1].dataNew[s]=a[s]:n.changes.push({action:"update",data:e,idReal:e.id,id:n.getObjectId(e),dataOld:i,dataNew:a}),n.lastChangeTime=p;break;case"delete":n.changes.push({action:"delete",data:e})}n.changed=!0},t.prototype.addUpdateChange=function(t,e,a){},t.prototype.getObjectId=function(t){return d(t).data("new-id")?d(t).data("new-id"):d(t).data("id")?d(t).data("id"):t.id},t.prototype.saveSvg=function(){var o=this;d("#mapsvg-save-svg")._button("loading");d.get(o.filepath+"?v="+Math.random()).done(function(t){o.changes.length&&o.changes.forEach(function(t){if("update"===t.action)for(var e in t.dataNew)"id"==e&&t.data.setAttribute(e,t.dataNew[e])}),o.editingShape&&(o.editingShape.unclosed?o.removeShape(o.editingShape.obj):o.editingShapeUnset()),o.controllers.region&&(o.admin.unloadController(o.controllers.region),o.controllers.region=null);var e=o.svg.clone(!0);e.css("transform",""),e.find("[data-deleted]").remove(),e.find(".mapsvg-path-point").remove(),e.find("path, polygon, circle, ellipse, rect").each(function(t){d(this).data("stroke-width")&&d(this).css("stroke-width",d(this).data("stroke-width")),d(this).attr("class")&&(d(this).attr("class",d(this).attr("class").replace(/active/g,"")),d(this).attr("class",d(this).attr("class").replace(/mapsvg-custom-shape/g,"")),d(this).attr("class",d(this).attr("class").replace(/mapsvg-region/g,"")),d(this).attr("class",d(this).attr("class").replace(/mapsvg-region-hover/g,"")),d(this).attr("class",d(this).attr("class").replace(/mapsvg-disabled/g,"")))});var a=e[0].outerHTML.length/1048576,i=mapsvg_ini_vars.post_max_size.indexOf("M")?mapsvg_ini_vars.post_max_size.replace("M",""):mapsvg_ini_vars.post_max_size/1048576,n=a.toFixed(2)+"Mb";if(i<a)return d.growl.error({title:"Error",message:"Can't save the file. File size ("+n+') exceeds php.ini "post_max_size" value ('+mapsvg_ini_vars.post_max_size+'). More info: <a href="https://mapsvg.com/docs/troubleshooting/uploading-big-files" target="_blank">Uploading big files</a>',duration:5e4}),d("#mapsvg-save-svg")._button("reset"),!1;i=new FormData,a=o.filepath.split("/").pop(),n='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n'+(n=e[0].outerHTML.replace(/\sgeoViewBox/gi," mapsvg:geoViewBox")),n=new Blob([n],{type:"text/xml"});i.append("file",n,a),i.append("path",o.filepath),i.append("action","mapsvg_save_svg"),i.append("_wpnonce",MapSVG.nonce),i.append("map_id",o.mapsvg.id),d.ajax({url:ajaxurl,type:"POST",data:i,contentType:!1,processData:!1}).done(function(t){e=null,o.changed=!1,o.changes=[],o.mapsvg.getData().options.svgFileVersion++,o.mapsvg.reloadRegions(),o.mapsvg.mapAdjustStrokes(),o.mapsvg.regionsDatabase.getAll().done(function(){o.mapsvg.mapAdjustStrokes()})}).fail(function(t){}).always(function(){d("#mapsvg-save-svg")._button("reset")})})},t.prototype.close=function(){},t.prototype.undo=function(){var t=this;if(!t.changes.length)return!1;var e=t.changes.pop();switch(e.action){case"create":t.editingShape&&t.editingShape.obj===e.data&&t.editingShapeUnset(),e.data.remove();break;case"delete":e.data.style.display="block",e.data.setAttribute("id",e.data.getAttribute("data-id")),e.data.setAttribute("data-id",""),e.data.removeAttribute("data-deleted");break;case"update":t.updateShape(e.idReal,e.dataOld,!0),!t.isReverting&&t.editingShape&&t.editingShape.obj.id==e.idReal&&t.editShape(t.editingShape.obj)}return!0},t.prototype.revert=function(){var t=!0;for(this.isReverting=!0;t;)t=this.undo()},t.prototype.removeEditingPoint=function(t){var e=this;e.editingShape.pathData.splice(e.editingPoint.index,1),2==e.editingShape.pathData.length?e.removeShape(e.editingShape.obj):("M"!=e.editingShape.pathData[0].type&&(e.editingShape.pathData[0].type="M"),e.editingShape.points.splice(e.editingPoint.index,1),e.editingShape.obj.setPathData(e.editingShape.pathData),d(e.editingPoint.circle).remove(),e.editingPoint=null,e.editingShape.points.forEach(function(t,e){d(t).data("index",e)})),this.hint()},t.prototype.removeShape=function(t){var e,a=this;t&&(e=a.editingShape&&a.editingShape.obj==t,a.editingShape&&(!e||a.editingShape.unclosed)||a.addChange("delete",t),e&&(a.editingShape.obj.style.display="none",a.editingShape.obj.setAttribute("data-id",a.editingShape.obj.id),a.editingShape.obj.setAttribute("id",""),a.editingShape.obj.setAttribute("data-deleted","true"),a.editingShape.points&&a.editingShape.points.forEach(function(t){t.remove()}),a.editingShape.stroke&&d(a.editingShape.stroke).remove(),a.editingShape=null,a.controllers.region&&(a.admin.unloadController(a.controllers.region),a.controllers.region=null),a.setEventHandlers()))},t.prototype.doSnap=function(t){for(var e,a=this,i=!0,n=10/a.mapsvg.getScale(),o=a.snapPoints.length-1;i&&0<=o;)a.snapPoints[o]&&a.snapPoints[o].values&&null!=a.snapPoints[o].values[0]&&(e=a.snapPoints[o],Math.abs(t[0]-e.values[0])<n&&Math.abs(t[1]-e.values[1])<n&&(t[0]=e.values[0],t[1]=e.values[1],i=!1)),o--;return t},t.prototype.loadSnapPoints=function(){var a=this;this.snapPoints=[],a.svg.find("path, polygon, rect, circle, ellipse, polyline").not(":hidden").not(".mapsvg-path-point").each(function(t,e){a.editingShape&&e===a.editingShape.obj||"none"!=d(e).css("display")&&(a.snapPoints=a.snapPoints.concat(e.getPathData({normalize:!0})))})},t.prototype.loadIntersectionPoints=function(){var t=this;t.editingShape.pathLength=t.editingShape.obj.getTotalLength(),t.editingShape.pathPoints=[];for(var e=0;e<t.editingShape.pathLength;e++)t.editingShape.pathPoints.push(t.editingShape.obj.getPointAtLength(e))},t.prototype.getIntersectionWithEditingShape=function(t){for(var e=0;e<this.editingShape.pathPoints.length;e++)if(this.pointIntersect(t,this.editingShape.pathPoints[e]))return this.editingShape.pathPoints[e+1]},t.prototype.getPreviousPointIndex=function(t){for(var e=!0,a=0,i=1,n=1;e;){var o,s=this.editingShape.pathPoints[a];s.x==t.x&&s.y==t.y?e=!1:(o={x:(o=this.editingShape.points[n]).getAttribute("cx"),y:o.getAttribute("cy")}).x==s.x&&o.y==s.y&&(i=n,n++),a++}return i},t.prototype.pointIntersect=function(t,e){var a=5/this.mapsvg.getScale();return Math.abs(t.x-e.x)<a&&Math.abs(t.y-e.y)<a},t.prototype.addNewPoint=function(t,e){var a=this,i={x:parseFloat(t),y:parseFloat(e)},n=1;a.editingShape.pathData=a.editingShape.obj.getPathData({normalize:!0});for(var o=1;o<a.editingShape.pathData.length;o++){var s=o-1,p=a.editingShape.pathData[s],s=a.editingShape.pathData[o];p.values&&("Z"!=s.type&&"z"!=s.type||(s=a.editingShape.pathData[0]),p={x:p.values[0],y:p.values[1]},s={x:s.values[0],y:s.values[1]},0==a.distanceToLine(p,s,i)&&(n=o))}e={type:"L",values:[t,e]};return a.editingShape.pathData.splice(n,0,e),a.editingShape.d=a.editingShape.obj.getAttribute("d"),a.editingShape.obj.setPathData(a.editingShape.pathData),a.addChange("update",a.editingShape.obj,{d:a.editingShape.obj.getAttribute("d")},{d:a.editingShape.d}),a.editShape(a.editingShape.obj),n},t.prototype.isOnLine=function(t,e,a){var i;return Math.abs((i=a.px,(e.y-t.y)/(e.x-t.x)*(i-t.x)+t.y-a.py))<.001},t.prototype.distanceToLine=function(t,e,a){var i=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);if(0==i)return!1;t=((t.y-a.y)*(e.x-t.x)-(t.x-a.x)*(e.y-t.y))/i;return(Math.abs(t)*Math.sqrt(i)).toFixed(3)}}(jQuery,window);
!function(i,t){function e(t,e,r){this.name="filters",this.scrollable=!1,this.isParent=!0,MapSVGAdminController.call(this,t,e,r)}t.MapSVGAdminFiltersController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.viewLoaded=function(){var t=this;this.controllers.structure=new MapSVGAdminFiltersStructureController("mapsvg-filters-structure",t.admin,t.mapsvg),this.controllers.settings=new MapSVGAdminFiltersSettingsController("mapsvg-filters-settings",t.admin,t.mapsvg),t.activeController=this.controllers.settings,MapSVGAdminController.prototype.viewLoaded.call(this)},e.prototype.viewDidAppear=function(){var t=this;t.activeController&&t.activeController instanceof MapSVGAdminFiltersStructureController&&(t.admin.rememberPanelsState(),t.admin.togglePanel("left",!1))},e.prototype.viewDidDisappear=function(){this.admin.restorePanelsState()},e.prototype.setEventHandlers=function(){var r=this;i("#mapsvg-filters-menu a").click(function(t){t.preventDefault(),i(this).tab("show")}).on("shown.bs.tab",function(t){var e=i(i(this).attr("href")).data("controller");(r.activeController=e).viewDidAppear();t=i(t.relatedTarget).attr("href");t&&(t=i(t).attr("data-controller"),r.controllers[t].viewDidDisappear()),"#mapsvg-filters-structure"==i(this).attr("href")?(r.admin.rememberPanelsState(),r.admin.togglePanel("left",!1)):r.admin.restorePanelsState(),"#mapsvg-filters-settings"==i(this).attr("href")&&i(".mapsvg-toolbar-buttons").show()})}}(jQuery,window);
!function(i,t){function e(t,e,n){this.name="filters-settings",MapSVGAdminController.call(this,t,e,n)}t.MapSVGAdminFiltersSettingsController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.viewLoaded=function(){var t=this;t.mapsvg.regionsDatabase.on("schemaChange",function(){t.render()})},e.prototype.setEventHandlers=function(){var n=this;this.view.find('input[name="filters[source]"]').on("change",function(t){var e="regions"==i(this).val();n.view.find("#mapsvg-control-frs").toggle(e)})},e.prototype.getTemplateData=function(){var t=this.mapsvg.regionsDatabase.getSchemaFieldByType("status"),t=t?t.options:[];return{filters:this.mapsvg.options.filters,statuses:t}}}(jQuery,window);
!function(e,i){function t(i,t,e,a){this.name="filters-structure",this.scrollable=!1,MapSVGAdminController.call(this,i,t,e),this.filtersSchema=this.mapsvg.filtersSchema}i.MapSVGAdminFiltersStructureController=t,MapSVG.extend(t,i.MapSVGAdminController),t.prototype.viewLoaded=function(){},t.prototype.viewDidAppear=function(){var t=this;MapSVG.countries=[{id:"AD",title:"Andorra"},{id:"AE",title:"United Arab Emirates"},{id:"AF",title:"Afghanistan"},{id:"AG",title:"Antigua and Barbuda"},{id:"AI",title:"Anguilla"},{id:"AL",title:"Albania"},{id:"AM",title:"Armenia"},{id:"AO",title:"Angola"},{id:"AR",title:"Argentina"},{id:"AS",title:"American Samoa"},{id:"AT",title:"Austria"},{id:"AU",title:"Australia"},{id:"AW",title:"Aruba"},{id:"AX",title:"Aland Islands"},{id:"AZ",title:"Azerbaijan"},{id:"BA",title:"Bosnia and Herzegovina"},{id:"BB",title:"Barbados"},{id:"BD",title:"Bangladesh"},{id:"BE",title:"Belgium"},{id:"BF",title:"Burkina Faso"},{id:"BG",title:"Bulgaria"},{id:"BH",title:"Bahrain"},{id:"BI",title:"Burundi"},{id:"BJ",title:"Benin"},{id:"BL",title:"Saint Barthelemy"},{id:"BM",title:"Bermuda"},{id:"BN",title:"Brunei Darussalam"},{id:"BO",title:"Bolivia"},{id:"BQ",title:"Bonaire,  Saint Eustachius and Saba"},{id:"BR",title:"Brazil"},{id:"BS",title:"Bahamas"},{id:"BT",title:"Bhutan"},{id:"BV",title:"Bouvet Island"},{id:"BW",title:"Botswana"},{id:"BY",title:"Belarus"},{id:"BZ",title:"Belize"},{id:"CA",title:"Canada"},{id:"CC",title:"Cocos  (Keeling)  Islands"},{id:"CD",title:"Democratic Republic of Congo"},{id:"CF",title:"Central African Republic"},{id:"CG",title:"Republic of Congo"},{id:"CH",title:"Switzerland"},{id:"CI",title:"Côte d'Ivoire"},{id:"CK",title:"Cook Islands"},{id:"CL",title:"Chile"},{id:"CM",title:"Cameroon"},{id:"CN",title:"China"},{id:"CO",title:"Colombia"},{id:"CR",title:"Costa Rica"},{id:"CU",title:"Cuba"},{id:"CV",title:"Cape Verde"},{id:"CW",title:"Curaçao"},{id:"CX",title:"Christmas Island"},{id:"CY",title:"Cyprus"},{id:"CZ",title:"Czech Republic"},{id:"DE",title:"Germany"},{id:"DJ",title:"Djibouti"},{id:"DK",title:"Denmark"},{id:"DM",title:"Dominica"},{id:"DO",title:"Dominican Republic"},{id:"DZ",title:"Algeria"},{id:"EC",title:"Ecuador"},{id:"EE",title:"Estonia"},{id:"EG",title:"Egypt"},{id:"EH",title:"Western Sahara"},{id:"ER",title:"Eritrea"},{id:"ES",title:"Spain"},{id:"ET",title:"Ethiopia"},{id:"FI",title:"Finland"},{id:"FJ",title:"Fiji"},{id:"FK",title:"Falkland Islands"},{id:"FM",title:"Federated States of Micronesia"},{id:"FO",title:"Faroe Islands"},{id:"FR",title:"France"},{id:"GA",title:"Gabon"},{id:"GB",title:"United Kingdom"},{id:"GD",title:"Grenada"},{id:"GE",title:"Georgia"},{id:"GF",title:"French Guiana"},{id:"GG",title:"Guernsey"},{id:"GH",title:"Ghana"},{id:"GI",title:"Gibraltar"},{id:"GL",title:"Greenland"},{id:"GM",title:"Gambia"},{id:"GN",title:"Guinea"},{id:"GO",title:"Glorioso Islands"},{id:"GP",title:"Guadeloupe"},{id:"GQ",title:"Equatorial Guinea"},{id:"GR",title:"Greece"},{id:"GS",title:"South Georgia and South Sandwich Islands"},{id:"GT",title:"Guatemala"},{id:"GU",title:"Guam"},{id:"GW",title:"Guinea-Bissau"},{id:"GY",title:"Guyana"},{id:"HK",title:"Hong Kong"},{id:"HM",title:"Heard Island and McDonald Islands"},{id:"HN",title:"Honduras"},{id:"HR",title:"Croatia"},{id:"HT",title:"Haiti"},{id:"HU",title:"Hungary"},{id:"ID",title:"Indonesia"},{id:"IE",title:"Ireland"},{id:"IL",title:"Israel"},{id:"IM",title:"Isle of Man"},{id:"IN",title:"India"},{id:"IO",title:"British Indian Ocean Territory"},{id:"IQ",title:"Iraq"},{id:"IR",title:"Iran"},{id:"IS",title:"Iceland"},{id:"IT",title:"Italy"},{id:"JE",title:"Jersey"},{id:"JM",title:"Jamaica"},{id:"JO",title:"Jordan"},{id:"JP",title:"Japan"},{id:"JU",title:"Juan De Nova Island"},{id:"KE",title:"Kenya"},{id:"KG",title:"Kyrgyzstan"},{id:"KH",title:"Cambodia"},{id:"KI",title:"Kiribati"},{id:"KM",title:"Comoros"},{id:"KN",title:"Saint Kitts and Nevis"},{id:"KP",title:"North Korea"},{id:"KR",title:"South Korea"},{id:"KW",title:"Kuwait"},{id:"KY",title:"Cayman Islands"},{id:"KZ",title:"Kazakhstan"},{id:"LA",title:"Lao People's Democratic Republic"},{id:"LB",title:"Lebanon"},{id:"LC",title:"Saint Lucia"},{id:"LI",title:"Liechtenstein"},{id:"LK",title:"Sri Lanka"},{id:"LR",title:"Liberia"},{id:"LS",title:"Lesotho"},{id:"LT",title:"Lithuania"},{id:"LU",title:"Luxembourg"},{id:"LV",title:"Latvia"},{id:"LY",title:"Libya"},{id:"MA",title:"Morocco"},{id:"MC",title:"Monaco"},{id:"MD",title:"Moldova"},{id:"ME",title:"Montenegro"},{id:"MF",title:"Saint Martin"},{id:"MG",title:"Madagascar"},{id:"MH",title:"Marshall Islands"},{id:"MK",title:"Macedonia"},{id:"ML",title:"Mali"},{id:"MM",title:"Myanmar"},{id:"MN",title:"Mongolia"},{id:"MO",title:"Macau"},{id:"MP",title:"Northern Mariana Islands"},{id:"MQ",title:"Martinique"},{id:"MR",title:"Mauritania"},{id:"MS",title:"Montserrat"},{id:"MT",title:"Malta"},{id:"MU",title:"Mauritius"},{id:"MV",title:"Maldives"},{id:"MW",title:"Malawi"},{id:"MX",title:"Mexico"},{id:"MY",title:"Malaysia"},{id:"MZ",title:"Mozambique"},{id:"NA",title:"Namibia"},{id:"NC",title:"New Caledonia"},{id:"NE",title:"Niger"},{id:"NF",title:"Norfolk Island"},{id:"NG",title:"Nigeria"},{id:"NI",title:"Nicaragua"},{id:"NL",title:"Netherlands"},{id:"NO",title:"Norway"},{id:"NP",title:"Nepal"},{id:"NR",title:"Nauru"},{id:"NU",title:"Niue"},{id:"NZ",title:"New Zealand"},{id:"OM",title:"Oman"},{id:"PA",title:"Panama"},{id:"PE",title:"Peru"},{id:"PF",title:"French Polynesia"},{id:"PG",title:"Papua New Guinea"},{id:"PH",title:"Philippines"},{id:"PK",title:"Pakistan"},{id:"PL",title:"Poland"},{id:"PM",title:"Saint Pierre and Miquelon"},{id:"PN",title:"Pitcairn Islands"},{id:"PR",title:"Puerto Rico"},{id:"PS",title:"Palestinian Territories"},{id:"PT",title:"Portugal"},{id:"PW",title:"Palau"},{id:"PY",title:"Paraguay"},{id:"QA",title:"Qatar"},{id:"RE",title:"Reunion"},{id:"RO",title:"Romania"},{id:"RS",title:"Serbia"},{id:"RU",title:"Russia"},{id:"RW",title:"Rwanda"},{id:"SA",title:"Saudi Arabia"},{id:"SB",title:"Solomon Islands"},{id:"SC",title:"Seychelles"},{id:"SD",title:"Sudan"},{id:"SE",title:"Sweden"},{id:"SG",title:"Singapore"},{id:"SH",title:"Saint Helena"},{id:"SI",title:"Slovenia"},{id:"SJ",title:"Svalbard and Jan Mayen"},{id:"SK",title:"Slovakia"},{id:"SL",title:"Sierra Leone"},{id:"SM",title:"San Marino"},{id:"SN",title:"Senegal"},{id:"SO",title:"Somalia"},{id:"SR",title:"Suriname"},{id:"SS",title:"South Sudan"},{id:"ST",title:"Sao Tome and Principe"},{id:"SV",title:"El Salvador"},{id:"SX",title:"Saint Martin"},{id:"SY",title:"Syria"},{id:"SZ",title:"Swaziland"},{id:"TC",title:"Turks and Caicos Islands"},{id:"TD",title:"Chad"},{id:"TF",title:"French Southern and Antarctic Lands"},{id:"TG",title:"Togo"},{id:"TH",title:"Thailand"},{id:"TJ",title:"Tajikistan"},{id:"TK",title:"Tokelau"},{id:"TL",title:"Timor-Leste"},{id:"TM",title:"Turkmenistan"},{id:"TN",title:"Tunisia"},{id:"TO",title:"Tonga"},{id:"TR",title:"Turkey"},{id:"TT",title:"Trinidad and Tobago"},{id:"TV",title:"Tuvalu"},{id:"TW",title:"Taiwan"},{id:"TZ",title:"Tanzania"},{id:"UA",title:"Ukraine"},{id:"UG",title:"Uganda"},{id:"UM-DQ",title:"Jarvis Island"},{id:"UM-FQ",title:"Baker Island"},{id:"UM-HQ",title:"Howland Island"},{id:"UM-JQ",title:"Johnston Atoll"},{id:"UM-MQ",title:"Midway Islands"},{id:"UM-WQ",title:"Wake Island"},{id:"US",title:"United States"},{id:"UY",title:"Uruguay"},{id:"UZ",title:"Uzbekistan"},{id:"VA",title:"Vatican City"},{id:"VC",title:"Saint Vincent and the Grenadines"},{id:"VE",title:"Venezuela"},{id:"VG",title:"British Virgin Islands"},{id:"VI",title:"US Virgin Islands"},{id:"VN",title:"Vietnam"},{id:"VU",title:"Vanuatu"},{id:"WF",title:"Wallis and Futuna"},{id:"WS",title:"Samoa"},{id:"XK",title:"Kosovo"},{id:"YE",title:"Yemen"},{id:"YT",title:"Mayotte"},{id:"ZA",title:"South Africa"},{id:"ZM",title:"Zambia"},{id:"ZW",title:"Zimbabwe"}],t.formBuilder=new MapSVG.FormBuilder({schema:t.filtersSchema.getSchema(),editMode:!0,filtersMode:!0,mapsvg:t.mapsvg,admin:t.admin,container:this.contentView,template:"form-builder-filters",types:["select","radio","checkboxes","distance","search"],events:{saveSchema:function(i){t.mapsvg.id?(t.filtersSchema.setSchema(i),e.growl.notice({title:"",message:"Settings saved",duration:700}),t.admin.save(),t.mapsvg.setFilters()):t.admin.save().done(function(){t.filtersSchema.setSchema(i),t.mapsvg.setFilters()})},load:function(){setTimeout(function(){e("#mapsvg-btn-filters-structure").tooltip("show").tooltip("hide")},200)}}})},t.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.formBuilder&&this.formBuilder.destroy()},t.prototype.setEventHandlers=function(){}}(jQuery,window);
!function(o){function t(o,t,i){this.name="floors",this.scrollable=!1,this.isParent=!0,MapSVGAdminController.call(this,o,t,i)}o.MapSVGAdminFloorsController=t,MapSVG.extend(t,o.MapSVGAdminController),t.prototype.viewLoaded=function(){var o=this;this.controllers.list=new MapSVGAdminFloorsListController("mapsvg-floors-list",o.admin,o.mapsvg),this.controllers.list.toolbarView=this.toolbarView,o.activeController=this.controllers.list,MapSVGAdminController.prototype.viewLoaded.call(this)},t.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this)},t.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this)},t.prototype.setEventHandlers=function(){}}((jQuery,window));
!function(r,e){function t(e,t,a){this.name="floors-list",this.database=new MapSVG.DatabaseService({type:"local",dbObject:a.getData().options.floors},a),this.database.on("change",function(){}),this.database.setSchema([{name:"id",label:"ID",visible:!0,type:"id"},{name:"object_id",label:"Object ID",visible:!0,type:"select",optionsGrouped:!0,options:a.getGroupSelectOptions()},{name:"title",label:"Title",visible:!0,type:"text"},{name:"visible",label:"Visible",visible:!1,type:"checkbox"}]),MapSVGAdminController.call(this,e,t,a)}e.MapSVGAdminFloorsListController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.viewLoaded=function(){this.redrawDataList()},t.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this)},t.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.closeFormHandler()},t.prototype.setEventHandlers=function(){var t=this;r("#mapsvg-btn-floor-add").on("click",function(e){e.preventDefault(),t.btnAdd=r(this),t.btnAdd.addClass("disabled"),t.editDataRow()}),this.view.on("click",".mapsvg-data-row",function(e){r(this).hasClass("active")||t.editDataRow(r(this))}).on("click",".mapsvg-floor-view-toggle",function(e){e.preventDefault(),e.stopPropagation(),r(this).toggleClass("active");e=r(this).closest("tr").data("id"),e=t.database.getLoadedObject(e);e.visible=!r(this).hasClass("active"),e.visible?(r(this).find("i").toggleClass("fa-eye",!0),r(this).find("i").toggleClass("fa-eye-slash",!1)):(r(this).find("i").toggleClass("fa-eye",!1),r(this).find("i").toggleClass("fa-eye-slash",!0)),t.mapsvg.setGroups(),t.mapsvg.setFloorsControl()}).on("click",".mapsvg-floor-delete",function(e){e.preventDefault(),e.stopPropagation();e=r(this).closest("tr");t.deleteDataRow(e)})},t.prototype.getTemplateData=function(){return{fields:this.getDataFieldsForTemplate(!0),data:this.database.getLoaded()}},t.prototype.getDataFieldsForTemplate=function(e){return[{name:"id",visible:!0,type:"id"},{name:"object_id",visible:!0,type:"select"},{name:"title",visible:!0,type:"text"}]},t.prototype.redrawDataList=function(){var e=this;e.redraw();var t=this.mapsvg.getPagination(function(){e.redrawDataList()});this.view.find(".mapsvg-pagination-container").html(t)},t.prototype.getObjectRow=function(e){return this.view.find("#mapsvg-floor-row-"+e.id)},t.prototype.addDataRow=function(e){e={fields:this.database.getColumns({visible:!0}),params:e},e=r(this.templates.item(e));return this.view.find("#mapsvg-floors-list-table tbody").prepend(e),e},t.prototype.updateDataRow=function(e,t){var a={fields:this.database.getColumns({visible:!0}),params:e},o=r(this.templates.item(a));(t=t||r("#mapsvg-floor-row-"+e.id)).replaceWith(o),o.addClass("mapsvg-row-updated"),setTimeout(function(){o.removeClass("mapsvg-row-updated")},2600)},t.prototype.deleteDataRow=function(e){var t=e.data("id"),a=this.database.getLoadedObject(t);if(!a)return!1;a.marker&&this.mapsvg.markerDelete(a.marker),this.database.delete(t),e.fadeOut(300,function(){e.remove()})},t.prototype.editDataRow=function(e,t){var a=this,o=!e,i={};a.tableDataActiveRow&&a.tableDataActiveRow.removeClass("mapsvg-row-selected"),i=e?(a.updateScroll(),t&&a.contentWrap.data("jsp").scrollToElement(e,!0,!1),a.tableDataActiveRow=e,a.tableDataActiveRow.addClass("mapsvg-row-selected"),s=a.tableDataActiveRow.data("id"),a.database.getLoadedObject(s)):{visible:!0};var s=wp.media.frames.file_frame=wp.media({title:"Choose images",button:{text:"Choose images"},multiple:!0});a.formBuilder&&(a.formBuilder.destroy(),a.formBuilder=null,a.formBuilderRow&&a.formBuilderRow.remove(),r("#mapsvg-btn-floor-add").removeClass("disabled")),a.formContainer&&a.formContainer.empty().remove(),a.formContainer=r('<div class="mapsvg-modal-edit"></div>'),this.view.append(a.formContainer),a.formBuilder=new MapSVG.FormBuilder({container:a.formContainer,schema:a.database.getSchema(),editMode:!1,mapsvg:a.mapsvg,mediaUploader:s,data:i,admin:a.admin,events:{save:function(e){o?(a.saveDataObject(e),this.redraw()):(a.updateDataObject(e),this.close())},close:function(){a.closeFormHandler()}}})},t.prototype.saveDataObject=function(e){var t,a,o,i=this;(t=e.id?this.getObjectRow(e):t)&&t.length||(a=!0,t=this.addDataRow(e)),a?this.database.create(e).done(function(e){a&&i.updateDataRow(e,t)}).fail(function(){r.growl.error({title:"Server error",message:"Can't save object"}),t.remove()}):(this.database.update(e).fail(function(){r.growl.error({title:"Server error",message:"Can't update object"})}),e.marker&&((o=i.mapsvg.getMarker(e.marker.id)).setId("marker_"+e.id),o.setObject(e)),this.closeFormHandler(),this.updateDataRow(e))},t.prototype.updateDataObject=function(e){var t;this.database.update(e).fail(function(){r.growl.error({title:"Server error",message:"Can't update object"})}),e.marker&&((t=this.mapsvg.getMarker(e.marker.id)).setId("marker_"+e.id),t.setObject(e)),this.closeFormHandler(),this.updateDataRow(e)},t.prototype.closeFormHandler=function(){var e=this;r("#mapsvg-btn-floor-add").removeClass("disabled"),e.mapsvg.showMarkers(),e.formBuilder&&(e.formBuilder.destroy(),e.formBuilder=null,e.formContainer.empty().remove(),e.tableDataActiveRow&&e.tableDataActiveRow.removeClass("mapsvg-row-selected"),e.tableDataActiveRow&&!e.tableDataActiveRow.hasClass("mapsvg-row-updated")&&e.tableDataActiveRow.addClass("mapsvg-row-closed"),setTimeout(function(){e.tableDataActiveRow&&!e.tableDataActiveRow.hasClass("mapsvg-row-updated")&&e.tableDataActiveRow.removeClass("mapsvg-row-closed")},1600),r("a.browser").remove()),this.updateScroll()}}(jQuery,window);
var scripts=document.getElementsByTagName("script"),myScript=scripts[scripts.length-1].src.split("/");myScript.pop();var pluginRootURL=myScript.join("/")+"/";!function(u,r,e){function i(e,t){e=e||{};var a,i=this;this.formBuilder=t,this.images=[],this.type=e.type,this.value=e.value,this.searchable=r.parseBoolean(e.searchable),this.databaseFields=this.formBuilder.mapsvg.database.getSchema().map(function(e){if("text"==e.type||"region"==e.type||"textarea"==e.type||"post"==e.type||"select"==e.type||"radio"==e.type||"checkbox"==e.type)return"post"==e.type?"Object.post.post_title":"Object."+e.name}),this.databaseFieldsFilterableShort=this.formBuilder.mapsvg.database.getSchema().filter(function(e){return"select"==e.type||"radio"==e.type||"region"==e.type}).map(function(e){return e.name}),this.regionFields=this.formBuilder.mapsvg.regionsDatabase.getSchema().map(function(e){if("status"==e.type||"text"==e.type||"textarea"==e.type||"post"==e.type||"select"==e.type||"radio"==e.type||"checkbox"==e.type)return"post"==e.type?"Region.post.post_title":"Region."+e.name}),this.db_type="varchar(255)","region"==this.type?(this.options=this.formBuilder.getRegionsList(),this.label="Regions",this.name="regions",this.db_type="text"):"text"==this.type?this.searchType=e.searchType||"fulltext":"textarea"==this.type?(this.autobr=e.autobr,this.html=e.html,this.db_type="text"):"modal"==this.type?this.showButtonText=e.showButtonText:"location"==this.type?(this.location=this.value,this.label=this.label||(void 0===e.label?"Location":e.label),this.name="location",this.db_type="text",this.languages=[{value:"sq",label:"Albanian"},{value:"ar",label:"Arabic"},{value:"eu",label:"Basque"},{value:"be",label:"Belarusian"},{value:"bg",label:"Bulgarian"},{value:"my",label:"Burmese"},{value:"bn",label:"Bengali"},{value:"ca",label:"Catalan"},{value:"zh-cn",label:"Chinese (simplified)"},{value:"zh-tw",label:"Chinese (traditional)"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"nl",label:"Dutch"},{value:"en",label:"English"},{value:"en-au",label:"English (australian)"},{value:"en-gb",label:"English (great Britain)"},{value:"fa",label:"Farsi"},{value:"fi",label:"Finnish"},{value:"fil",label:"Filipino"},{value:"fr",label:"French"},{value:"gl",label:"Galician"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gu",label:"Gujarati"},{value:"iw",label:"Hebrew"},{value:"hi",label:"Hindi"},{value:"hu",label:"Hungarian"},{value:"id",label:"Indonesian"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"kn",label:"Kannada"},{value:"kk",label:"Kazakh"},{value:"ko",label:"Korean"},{value:"ky",label:"Kyrgyz"},{value:"lt",label:"Lithuanian"},{value:"lv",label:"Latvian"},{value:"mk",label:"Macedonian"},{value:"ml",label:"Malayalam"},{value:"mr",label:"Marathi"},{value:"no",label:"Norwegian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"pt-br",label:"Portuguese (brazil)"},{value:"pt-pt",label:"Portuguese (portugal)"},{value:"pa",label:"Punjabi"},{value:"ro",label:"Romanian"},{value:"ru",label:"Russian"},{value:"sr",label:"Serbian"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"es",label:"Spanish"},{value:"sv",label:"Swedish"},{value:"tl",label:"Tagalog"},{value:"ta",label:"Tamil"},{value:"te",label:"Telugu"},{value:"th",label:"Thai"},{value:"tr",label:"Turkish"},{value:"uk",label:"Ukrainian"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"}],this.language=e.language,this.markerImages=r.markerImages,this.markersByField=e.markersByField,this.markerField=e.markerField,this.markersByFieldEnabled=r.parseBoolean(e.markersByFieldEnabled)):"search"==this.type?(this.searchFallback=r.parseBoolean(e.searchFallback),this.placeholder=e.placeholder||"Search",this.noResultsText=e.noResultsText||"No results found",this.width=i.formBuilder.filtersHide&&!i.formBuilder.modal?null:e.width||"100%"):"distance"==this.type?(this.label=this.label||(void 0===e.label?"Search radius":e.label),this.distanceControl=e.distanceControl||"select",this.distanceUnits=e.distanceUnits||"km",this.distanceUnitsLabel=e.distanceUnitsLabel||"km",this.fromLabel=e.fromLabel||"from",this.placeholder=e.placeholder,this.userLocationButton=e.userLocationButton||!1,this.type=e.type,this.addressField=e.addressField||!0,this.addressFieldPlaceholder=e.addressFieldPlaceholder||"Address",this.languages=[{value:"sq",label:"Albanian"},{value:"ar",label:"Arabic"},{value:"eu",label:"Basque"},{value:"be",label:"Belarusian"},{value:"bg",label:"Bulgarian"},{value:"my",label:"Burmese"},{value:"bn",label:"Bengali"},{value:"ca",label:"Catalan"},{value:"zh-cn",label:"Chinese (simplified)"},{value:"zh-tw",label:"Chinese (traditional)"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"nl",label:"Dutch"},{value:"en",label:"English"},{value:"en-au",label:"English (australian)"},{value:"en-gb",label:"English (great Britain)"},{value:"fa",label:"Farsi"},{value:"fi",label:"Finnish"},{value:"fil",label:"Filipino"},{value:"fr",label:"French"},{value:"gl",label:"Galician"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gu",label:"Gujarati"},{value:"iw",label:"Hebrew"},{value:"hi",label:"Hindi"},{value:"hu",label:"Hungarian"},{value:"id",label:"Indonesian"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"kn",label:"Kannada"},{value:"kk",label:"Kazakh"},{value:"ko",label:"Korean"},{value:"ky",label:"Kyrgyz"},{value:"lt",label:"Lithuanian"},{value:"lv",label:"Latvian"},{value:"mk",label:"Macedonian"},{value:"ml",label:"Malayalam"},{value:"mr",label:"Marathi"},{value:"no",label:"Norwegian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"pt-br",label:"Portuguese (brazil)"},{value:"pt-pt",label:"Portuguese (portugal)"},{value:"pa",label:"Punjabi"},{value:"ro",label:"Romanian"},{value:"ru",label:"Russian"},{value:"sr",label:"Serbian"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"es",label:"Spanish"},{value:"sv",label:"Swedish"},{value:"tl",label:"Tagalog"},{value:"ta",label:"Tamil"},{value:"te",label:"Telugu"},{value:"th",label:"Thai"},{value:"tr",label:"Turkish"},{value:"uk",label:"Ukrainian"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"}],this.countries=r.countries,this.country=e.country,this.language=e.language,this.searchByZip=e.searchByZip,this.zipLength=e.zipLength||5,this.userLocationButton=r.parseBoolean(e.userLocationButton),this.options=e.options||[{value:"10",default:!0},{value:"30",default:!1},{value:"50",default:!1},{value:"100",default:!1}],a=!1,i.value&&this.options.forEach(function(e){e.value===i.value.length&&(e.selected=!0,a=!0)}),a||this.options.forEach(function(e){e.default&&(e.selected=!0)})):"post"==this.type?(i.formBuilder.admin&&(this.post_types=this.formBuilder.admin.getPostTypes()),this.post_type=e.post_type||this.post_types[0],this.add_fields=r.parseBoolean(e.add_fields),this.db_type="int(11)",this.name="post_id",this.post_id=e.post_id,this.post=e.post):"checkbox"==this.type?(this.db_type="tinyint(1)",this.checkboxLabel=e.checkboxLabel,this.checkboxValue=e.checkboxValue):"checkboxes"==this.type?(this.db_type="text",this.checkboxLabel=e.checkboxLabel,this.options=e.options||[{label:"Option one",name:"option_one",value:1},{label:"Option two",name:"option_two",value:2}],this.optionsDict=e.optionsDict||{},this.optionsDict||this.options.forEach(function(e){i.optionsDict[e.value]=e.label})):"radio"==this.type||"select"==this.type?(this.options=e.options||[{label:"Option one",name:"option_one",value:1},{label:"Option two",name:"option_two",value:2}],"select"==this.type&&(this.multiselect=e.multiselect,this.optionsGrouped=e.optionsGrouped,this.db_type=this.multiselect?"text":"varchar(255)"),this.optionsDict=e.optionsDict||{},this.optionsDict||this.options.forEach(function(e){i.optionsDict[e.value]=e.label})):"image"==this.type?(this.button_text=e.button_text||"Browse...",this.db_type="text",this.label=e.label||"Images",this.name=e.name||"images"):"status"==this.type?(this.label=e.label||"Status",this.name="status",this.options=e.options||[{label:"Enabled",value:1,color:"",disabled:!1},{label:"Disabled",value:0,color:"",disabled:!0}]):"date"==this.type&&(i.formBuilder.admin&&(this.languages=["en-GB","ar","az","bg","bs","ca","cs","cy","da","de","el","es","et","eu","fa","fi","fo","fr","gl","he","hr","hu","hy","id","is","it","ja","ka","kh","kk","kr","lt","lv","mk","ms","nb","nl","nl-BE","no","pl","pt-BR","pt","ro","rs","rs-latin","ru","sk","sl","sq","sr","sr-latin","sv","sw","th","tr","uk","vi","zh-CN","zh-TW"]),this.db_type="varchar(50)",this.language=e.language),this.label=this.label||(void 0===e.label?"Label":e.label),this.name=this.name||e.name||"label",this.help=e.help||"",this.placeholder=e.placeholder;var s,t=this.type;"location"===(t="marker"===t&&i.formBuilder.mapsvg.isGeo()?"marker-geo":t)&&i.formBuilder.mapsvg.isGeo()&&(t="location-geo"),this.formBuilder.filtersMode?(this.parameterName=e.parameterName||"",this.parameterNameShort=this.parameterName.split(".")[1],this.placeholder=e.placeholder||"",this.templates={result:Handlebars.compile(u("#mapsvg-filters-tmpl-"+t+"-view").html())}):this.templates={result:Handlebars.compile(u("#mapsvg-data-tmpl-"+t+"-view").html())},this.views={result:u(this.templates.result(this.get()))},this.views.result.data("formElement",this),u().mselect2&&("distance"!==this.type?(s={},this.formBuilder.filtersMode&&"select"==this.type&&(s.placeholder=this.placeholder,this.multiselect||(s.allowClear=!0)),this.views.result.find("select").css({width:"100%",display:"block"}).mselect2(s).on("select2:focus",function(){u(this).mselect2("open")}),this.views.result.find(".select2-selection--multiple .select2-search__field").css("width","100%")):this.views.result.find("select").mselect2().on("select2:focus",function(){u(this).mselect2("open")})),u().colorpicker&&(this.views.result.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(e){""==u(this).find("input").val()&&u(this).find("i").css({"background-color":""})}),this.views.edit&&this.views.edit.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(e){""==u(this).find("input").val()&&u(this).find("i").css({"background-color":""})})),this.html&&(s=this.views.result.find("textarea")[0],this.editor=CodeMirror.fromTextArea(s,{mode:{name:"handlebars",base:"text/html"},matchBrackets:!0,lineNumbers:!0}),i.formBuilder.admin&&this.editor.on("change",this.setTextareaValue)),"image"==this.type&&(this.images=this.value||[],this.redrawImages()),"marker"!=this.type&&"location"!=this.type||(this.templates.marker=Handlebars.compile(u("#mapsvg-data-tmpl-marker").html()),this.location&&this.location.marker&&i.renderMarker()),this.setEventHandlers()}r.parseBoolean=function(e){switch(String(e).toLowerCase()){case"on":case"true":case"1":case"yes":case"y":return!0;case"off":case"false":case"0":case"no":case"n":return!1;default:return}},i.prototype.setTextareaValue=function(e,t){var a=e.getValue();u(e.getTextArea()).val(a).trigger("change")},i.prototype.setEventHandlers=function(){var e,a,i,s,l=this;this.formBuilder.editMode?this.views.result.on("click",function(){l.formBuilder.edit(l)}):("image"==this.type&&(e=l.views.result.find(".mapsvg-data-images"),this.formBuilder.mediaUploader.on("select",function(){return l.formBuilder.mediaUploaderFor===l&&(l.formBuilder.mediaUploader.state().get("selection").toJSON().forEach(function(e){var t,a={sizes:{}};for(t in e.sizes)a[t]=e.sizes[t].url.replace("http://","//").replace("https://","//"),a.sizes[t]={width:e.sizes[t].width,height:e.sizes[t].height};a.thumbnail||(a.thumbnail=a.full,a.sizes.thumbnail={width:e.sizes.full.width,height:e.sizes.full.height}),a.medium||(a.medium=a.full,a.sizes.medium={width:e.sizes.full.width,height:e.sizes.full.height}),a.caption=e.caption,a.description=e.description,l.images.push(a)}),void l.redrawImages())}),l.views.result.on("click",".mapsvg-upload-image",function(e){e.preventDefault(),(l.formBuilder.mediaUploaderFor=l).formBuilder.mediaUploader.open()}),l.views.result.on("click",".mapsvg-image-delete",function(e){e.preventDefault(),u(this).closest(".mapsvg-thumbnail-wrap").remove(),l.images=[],l.views.result.find("img").each(function(e,t){l.images.push(u(t).data("image"))}),l.views.result.find("input").val(JSON.stringify(l.images))}),l.sortable=new Sortable(e[0],{animation:150,onStart:function(){l.elements.containers.form_view.addClass("sorting")},onEnd:function(e){l.images=[],l.views.result.find("img").each(function(e,t){l.images.push(u(t).data("image"))}),l.views.result.find("input").val(JSON.stringify(l.images))}})),"post"==this.type&&l.views.result.find(".mapsvg-find-post").mselect2({placeholder:"Search post by title",allowClear:!0,ajax:{url:ajaxurl+"?action=mapsvg_search_posts&post_type="+l.post_type,dataType:"json",delay:250,data:function(e){return{query:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e,pagination:{more:!1}}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:function(e){return e.loading?e.text:"<div class='select2-result-repository clearfix'>"+e.post_title+"</div>"},templateSelection:function(e){return e.post_title||e.text}}).on("select2:select",function(e){l.post=e.params.data,l.views.result.find(".mapsvg-post-id").text(l.post.ID),l.views.result.find(".mapsvg-post-url").text(l.post.url).attr("href",l.post.url),l.views.result.find('input[name="post_id"]').val(l.post.ID)}).on("change",function(e){""===e.target.value&&(l.views.result.find(".mapsvg-post-id").text(""),l.views.result.find(".mapsvg-post-url").text(""),l.views.result.find('input[name="post_id"]').val(""))}),"location"===this.type&&(l.formBuilder.mapsvg.isGeo()&&(i=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("formatted_address"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:ajaxurl+"?action=mapsvg_geocoding&address=%QUERY%&language="+this.language,wildcard:"%QUERY%",transform:function(e){return e.error_message&&alert(e.error_message),e.results},rateLimitWait:600}}),(s=this.views.result.find(".typeahead")).typeahead({minLength:3},{name:"mapsvg-addresses",display:"formatted_address",source:i}),s.on("typeahead:select",function(e,t){l.location&&l.location.marker&&l.deleteMarker();var a={};a.formatted=t.formatted_address,t.address_components.forEach(function(e){var t=e.types[0];a[t]=e.long_name,e.short_name!=e.long_name&&(a[t+"_short"]=e.short_name)});var i={address:a,lat:t.geometry.location.lat,lng:t.geometry.location.lng,img:l.formBuilder.mapsvg.getMarkerImage(l.formBuilder.getData())};l.location=new r.Location(i,l.formBuilder.mapsvg),l.formBuilder.location=this.location;t=new r.Marker({location:l.location,mapsvg:l.formBuilder.mapsvg});l.location.marker=t,l.formBuilder.mapsvg.markerAdd(l.location.marker),l.formBuilder.mapsvg.setEditingMarker(t),l.formBuilder.marker=t.getOptions(),l.renderMarker();i=l.formBuilder.view.find('select[name="regions"]');-1!==l.formBuilder.mapsvg.getData().options.source.indexOf("/geo-calibrated/usa.svg")?0!==i.length&&l.location.address.state_short&&(i.val(["US-"+l.location.address.state_short]),i.trigger("change")):-1!==l.formBuilder.mapsvg.getData().options.source.indexOf("/geo-calibrated/world.svg")?0!==i.length&&l.location.address.country_short&&(i.val([l.location.address.country_short]),i.trigger("change")):0===i.length||!l.location.address.administrative_area_level_1||0<(t=l.formBuilder.mapsvg.getData().regions.filter(function(e){return e.title===l.location.address.administrative_area_level_1||e.title===l.location.address.administrative_area_level_2||e.id===l.location.address.country_short+"-"+l.location.address.administrative_area_level_1_short})).length&&(t=t[0],i.val([t.id]),i.trigger("change")),s.typeahead("val","")})),l.views.result.on("click",".mapsvg-marker-image-btn-trigger",function(e){u(this).toggleClass("active"),l.toggleMarkerSelector.call(l,u(this),e)}),l.views.result.on("click",".mapsvg-marker-delete",function(e){e.preventDefault(),l.deleteMarker()})),"select"!==this.type&&"radio"!==this.type||(a=l.formBuilder.mapsvg.database.getSchemaField("location"))&&a.markersByFieldEnabled&&a.markerField&&this.name==a.markerField&&0<Object.values(a.markersByField).length&&l.views.result.on("change","select",function(e){var t=a.markersByField[u(this).val()];t&&l.formBuilder.marker&&(l.formBuilder.mapsvg.getMarker(l.formBuilder.marker.id).setImage(t),l.views.result.closest(".mapsvg-form-builder").find(".mapsvg-marker-image-btn img").attr("src",t))}),"distance"===this.type&&(l.formBuilder.mapsvg.isGeo()&&(i=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("formatted_address"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:ajaxurl+"?action=mapsvg_geocoding&address="+(!0===this.searchByZip?"zip%20":"")+"%QUERY%&language="+this.language+(this.country?"&country="+this.country:""),wildcard:"%QUERY%",transform:function(e){return e.error_message&&alert(e.error_message),e.results},rateLimitWait:600}}),s=this.views.result.find(".typeahead"),this.searchByZip?(this.views.result.find(".mapsvg-distance-fields").addClass("search-by-zip"),s.on("change keyup",function(){u(this).val().length===parseInt(l.zipLength)&&i.search(u(this).val(),null,function(e){e&&e[0]&&(e=e[0].geometry.location,l.formBuilder.view.find('[name="distanceLatLng"]').val(e.lat+","+e.lng).trigger("change"))})})):(s.typeahead({minLength:3},{name:"mapsvg-addresses",display:"formatted_address",source:i,limit:5}),this.views.result.find(".mapsvg-distance-fields").removeClass("search-by-zip")),l.userLocationButton&&this.views.result.find(".user-location-button").on("click",function(){l.formBuilder.mapsvg.showUserLocation(function(t){i.search(t.lat+","+t.lng,null,function(e){e&&e[0]?s.val(e[0].formatted_address):s.val(t.lat+","+t.lng)}),l.formBuilder.view.find('[name="distanceLatLng"]').val(t.lat+","+t.lng).trigger("change")})}),s.on("change keyup",function(){""===u(this).val()&&l.formBuilder.view.find('[name="distanceLatLng"]').val("").trigger("change")}),s.on("typeahead:select",function(e,t){t.formatted_address;t=t.geometry.location;l.formBuilder.view.find('[name="distanceLatLng"]').val(t.lat+","+t.lng).trigger("change"),s.blur()})),l.views.result.on("click",".mapsvg-marker-image-btn-trigger",function(e){u(this).toggleClass("active"),l.toggleMarkerSelector.call(l,u(this),e)}),l.views.result.on("click",".mapsvg-marker-delete",function(e){e.preventDefault(),l.deleteMarker()})))},i.prototype.toggleMarkerSelector=function(e,t){t.preventDefault();var a,i=this;i.markerSelector&&i.markerSelector.is(":visible")?i.markerSelector.hide():i.markerSelector&&i.markerSelector.not(":visible")?i.markerSelector.show():(i.markerImageButton=e.find("img"),a=i.markerImageButton.attr("src"),e=r.markerImages.map(function(e){return'<button class="btn btn-default mapsvg-marker-image-btn mapsvg-marker-image-btn-choose '+(a==e.url?"active":"")+'"><img src="'+e.url+'" /></button>'}),i.markerSelector||(i.markerSelector=i.views.result.find(".mapsvg-marker-image-selector")),i.markerSelector&&i.markerSelector.empty(),i.formBuilder.markerSelector=i.markerSelector,i.formBuilder.marker?i.markerSelector.data("marker",i.formBuilder.marker):i.markerSelector.data("marker",null),i.markerSelector.html(e.join("")),i.markerSelector.append('<div class=\'mapsvg-marker-selector-help\'>Upload marker images on: <em><i class="fa fa-database"></i> Database > <i class="fa fa-pencil-square-o"></i> Edit fields > Location > Markers > Upload</em></div>'),i.markerSelector.on("click",".mapsvg-marker-image-btn-choose",function(e){e.preventDefault();e=u(this).find("img").attr("src");i.formBuilder.marker&&i.formBuilder.mapsvg.getMarker(i.formBuilder.marker.id).setImage(e),i.markerSelector.hide(),i.views.result.find(".mapsvg-marker-image-btn-trigger").toggleClass("active",!1),i.markerImageButton.attr("src",e)}))},i.prototype.toggleMarkerSelectorInLocationEditor=function(i,e){e.preventDefault();var t,a,s=this;i.data("markerSelector")&&i.data("markerSelector").is(":visible")?i.data("markerSelector").hide():i.data("markerSelector")&&i.data("markerSelector").not(":visible")?i.data("markerSelector").show():(t=u(this).closest("td").find(".mapsvg-marker-image-btn-trigger").attr("src"),a=r.markerImages.map(function(e){return'<button class="btn btn-default mapsvg-marker-image-btn mapsvg-marker-image-btn-choose '+(t==e.url?"active":"")+'"><img src="'+e.url+'" /></button>'}),i.data("markerSelector")?i.data("markerSelector").empty():(e=u('<div class="mapsvg-marker-image-selector"></div>'),i.closest("td").append(e),i.data("markerSelector",e)),i.data("markerSelector").html(a.join("")),i.data("markerSelector").on("click",".mapsvg-marker-image-btn-choose",function(e){e.preventDefault();var t=u(this).find("img").attr("src");i.data("markerSelector").hide();var a=u(this).closest("td"),e=u(this).closest("tr").data("option-id"),a=a.find(".mapsvg-marker-image-btn-trigger");a.toggleClass("active",!1),a.find("img").attr("src",t),s.setMarkerByField(e,t)}))},i.prototype.setMarkerByField=function(e,t){this.markersByField=this.markersByField||{},this.markersByField[e]=t},i.prototype.deleteMarker=function(){this.formBuilder.backupData=this.formBuilder.backupData||{},this.formBuilder.backupData.location=this.location,this.formBuilder.backupData.marker=this.marker,this.location=null,this.marker=null,this.formBuilder.marker&&(this.formBuilder.mapsvg.getMarker(this.formBuilder.marker.id).delete(),this.formBuilder.mapsvg.editingMarker=null),this.views.result.find(".mapsvg-new-marker").hide(),this.views.result.find(".mapsvg-marker-id").attr("disabled","disabled")},i.prototype.renderMarker=function(e){var t=this;if(!(this.location||e&&e.location))return!1;e&&e.location&&(this.location=e.location),t.views.result.find(".mapsvg-new-marker").show().html(this.templates.marker(this.location)),this.location.marker.onChange=function(){t.renderMarker()}},i.prototype.redrawImages=function(){var a=this.views.result.find(".mapsvg-data-images");a.empty(),this.images&&this.images.forEach(function(e){var t=u('<img class="mapsvg-data-thumbnail" />').attr("src",e.thumbnail).data("image",e),e=u('<div class="mapsvg-thumbnail-wrap"></div>').data("image",e);e.append(t),e.append('<i class="fa fa-times  mapsvg-image-delete"></i>'),a.append(e)}),this.views.result.find("input").val(JSON.stringify(this.images))},i.prototype.setEditorEventHandlers=function(){var s=this;this.views.edit.on("click","button.mapsvg-remove",function(){s.views.result.empty().remove(),s.views.edit.empty().remove(),s.formBuilder.delete(s)}).on("keyup change paste",".mapsvg-edit-status-row input",function(){s.mayBeAddStatusRow()}).on("keyup change paste",".mapsvg-edit-distance-row input",function(){s.mayBeAddDistanceRow()});var a=u("#marker-file-uploader").closest(".form-group").find(".mapsvg-marker-image-selector"),i=u("#marker-file-uploader").closest(".btn-file");this.views.edit.on("change","#marker-file-uploader",function(){i=u(this).closest(".btn-file")._button("loading");for(var e=0;e<this.files.length;e++){var t=new FormData;t.append("file",this.files[0]),t.append("action","mapsvg_marker_upload"),t.append("_wpnonce",r.nonce),u.ajax({url:ajaxurl,type:"POST",data:t,processData:!1,contentType:!1}).done(function(e){var t;(e=JSON.parse(e)).error?alert(e.error):(t='<button class="btn btn-default mapsvg-marker-image-btn mapsvg-marker-image-btn-choose"><img src="'+e.url+'" /></button>',u(t).appendTo(a),r.markerImages.push(e))}).always(function(){i._button("reset")})}}),this.views.edit.on("change",'select[name="markerField"]',function(){var e=u(this).val();s.fillMarkersByFieldOptions(e)}),s.views.edit.on("click",".mapsvg-marker-image-btn-trigger",function(e){u(this).toggleClass("active"),s.toggleMarkerSelectorInLocationEditor.call(s,u(this),e)}),this.views.edit.on("click",".mapsvg-filter-insert-options",function(){var e=s.parameterName.split(".")[0],t=s.parameterName.split(".")[1],e="Object"==e?s.formBuilder.mapsvg.database.getSchemaField(t):"id"==t?{options:s.formBuilder.mapsvg.getData().regions.map(function(e){return{label:e.id,value:e.id}})}:"region_title"==t?{options:s.formBuilder.mapsvg.getData().regions.map(function(e){return{label:e.title,value:e.title}})}:s.formBuilder.mapsvg.regionsDatabase.getSchemaField(t);e&&e.options&&(e="regions"==t?(e.options[0].title&&e.options[0].title.length&&e.options.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),e.options.map(function(e){return(e.title||e.id)+":"+e.id})):e.options.map(function(e){return e.label+":"+e.value}),u(this).closest(".form-group").find("textarea").val(e.join("\n")).trigger("change"))}),this.views.edit.on("keyup change paste","input, textarea, select",function(){var e=u(this).attr("name"),t=u(this).data("array");if("status"===s.type&&t){var a=u(this).data("param"),i=u(this).closest("tr").index();s.options[i]=s.options[i]||{label:"",value:"",color:"",disabled:!1},s.options[i][a]=u(this).is(":checkbox")?u(this).prop("checked"):u(this).val(),s.redraw()}else if("distance"===s.type&&t){var a=u(this).data("param"),i=u(this).closest("tr").index();s.options[i]||(s.options[i]={value:"",default:!1}),"default"===a?(s.options.forEach(function(e,t){e.default=!1}),s.options[i].default=u(this).prop("checked")):s.options[i].value=u(this).val(),s.redraw()}else{if("label"==e||"name"==e)return!1;a="checkbox"==u(this).attr("type")?u(this).prop("checked"):u(this).val(),"radio"==u(this).attr("type")&&(i=u(this).attr("name"),a=u('input[name="'+i+'"]:checked').val()),s.update(e,a)}}),this.views.edit.on("keyup change paste",'input[name="label"]',function(){var e;s.nameChanged||(s.label=u(this).val(),"region"!=s.type&&"location"!=s.type&&(e=(e=u(this).val()).toLowerCase().replace(/ /g,"_").replace(/\W/g,""),s.views.edit.find('input[name="name"]').val(e),s.name=e),s.views.result.find("label").first().html(s.label),s.formBuilder.filtersMode||s.views.result.find("label").first().append('<div class="field-name">'+s.name+"</div>"))}),this.views.edit.on("keyup change paste",'input[name="name"]',function(){this.value&&(this.value.match(/[^a-zA-Z0-9_]/g)&&(this.value=this.value.replace(/[^a-zA-Z0-9_]/g,""),u(this).trigger("change")),this.value[0].match(/[^a-zA-Z_]/g)&&(this.value=this.value[0].replace(/[^a-zA-Z_]/g,"")+this.value.slice(1),u(this).trigger("change"))),"region"!=s.type&&(s.name=this.value),s.views.result.find("label").html(s.label+'<div class="field-name">'+s.name+"</div>"),s.nameChanged=!0})},i.prototype.fillMarkersByFieldOptions=function(e){var a,i=this,e=i.formBuilder.mapsvg.database.getSchemaField(e);e&&(a=i.formBuilder.mapsvg.getData().options.defaultMarkerImage,e=e.options.map(function(e){var t=i.markersByField&&i.markersByField[e.value]?i.markersByField[e.value]:a;return'<tr data-option-id="'+e.value+'"><td>'+e.label+'</td><td><button class="btn btn-default mapsvg-marker-image-btn-trigger mapsvg-marker-image-btn"><img src="'+t+'" class="new-marker-img" style="margin-right: 4px;"/><span class="caret"></span></button></td></tr>'}),u("#markers-by-field").empty().append(e))},i.prototype.getEditor=function(){return this.formBuilder.filtersMode?this.templates.edit=this.templates.edit||Handlebars.compile(u("#mapsvg-filters-tmpl-"+this.type+"-control").html()):this.templates.edit=this.templates.edit||Handlebars.compile(u("#mapsvg-data-tmpl-"+this.type+"-control").html()),this.views.edit=u(this.templates.edit(this.get())),this.views.edit},i.prototype.destroyEditor=function(){this.views.edit.empty().remove()},i.prototype.initEditor=function(){var i=this;this.views.edit.find("input").first().select(),u().mselect2&&("distance"!==this.type?this.views.edit.find("select").css({width:"100%",display:"block"}):this.views.edit.find("select")).mselect2(),"status"==this.type&&(i.views.edit.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(e){var t=u(this).find("input"),a=u(this).closest("tr").index();""==t.val()&&u(this).find("i").css({"background-color":""}),i.options[a]=i.options[a]||{label:"",value:"",color:"",disabled:!1},i.options[a].color=t.val()}),i.mayBeAddStatusRow()),"distance"===this.type&&i.mayBeAddDistanceRow(),"location"===this.type&&i.fillMarkersByFieldOptions(i.markerField),this.views.edit.find(".mapsvg-onoff").bootstrapToggle({onstyle:"default",offstyle:"default"}),this.setEditorEventHandlers()},i.prototype.mayBeAddStatusRow=function(){var i=this;this.templates.editStatusRow=this.templates.editStatusRow||u(u("#mapsvg-edit-status-row").html());var e=i.views.edit.find(".mapsvg-edit-status-label:last-child");e&&e.last()&&e.last().val()&&e.last().val().trim().length&&((t=this.templates.editStatusRow.clone()).insertAfter(i.views.edit.find(".mapsvg-edit-status-row:last-child")),t.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(e){var t=u(this).find("input"),a=u(this).closest("tr").index();""==t.val()&&u(this).find("i").css({"background-color":""}),i.options[a]=i.options[a]||{label:"",value:"",color:"",disabled:!1},i.options[a].color=t.val()}));var e=i.views.edit.find(".mapsvg-edit-status-row"),t=e.eq(e.length-2),e=e.eq(e.length-1);t.length&&e.length&&!(t.find("input:eq(0)").val().trim()||t.find("input:eq(1)").val().trim()||t.find("input:eq(2)").val().trim())&&!(e.find("input:eq(0)").val().trim()||e.find("input:eq(1)").val().trim()||e.find("input:eq(2)").val().trim())&&e.remove()},i.prototype.mayBeAddDistanceRow=function(){this.templates.editDistanceRow=this.templates.editDistanceRow||u(u("#mapsvg-edit-distance-row").html());var e=this.views.edit.find(".mapsvg-edit-distance-row:last-child input");e&&e.last()&&e.last().val()&&e.last().val().trim().length&&this.templates.editDistanceRow.clone().insertAfter(this.views.edit.find(".mapsvg-edit-distance-row:last-child"));var t=this.views.edit.find(".mapsvg-edit-distance-row"),e=t.eq(t.length-2),t=t.eq(t.length-1);e.length&&t.length&&!e.find("input:eq(0)").val().trim()&&!t.find("input:eq(0)").val().trim()&&t.remove()},i.prototype.getSchema=function(){var e,t=this,a={type:this.type,db_type:this.db_type,label:this.label,name:this.name,value:this.value,searchable:r.parseBoolean(this.searchable)};return"select"==this.type&&(a.multiselect=r.parseBoolean(this.multiselect),a.multiselect&&(a.db_type="text"),a.optionsGrouped=this.optionsGrouped),this.options&&(e=u.extend(!0,{},{options:this.options}),a.options=e.options,a.optionsDict={},"region"==a.type?a.options.forEach(function(e){a.optionsDict[e.id]=e.title||e.id}):"status"==t.type?a.options.forEach(function(e,t){""===a.options[t].value?a.options.splice(t,1):(a.options[t].disabled=r.parseBoolean(a.options[t].disabled),a.optionsDict[e.value]=e)}):"distance"==t.type?a.options.forEach(function(e,t){""===a.options[t].value?a.options.splice(t,1):a.options[t].default=r.parseBoolean(a.options[t].default)}):a.options.forEach(function(e){a.optionsDict[e.value]="status"==t.type?e:e.label})),this.help&&(a.help=this.help),this.button_text&&(a.button_text=this.button_text),"post"==this.type&&(a.post_type=this.post_type,a.add_fields=this.add_fields),"date"==this.type&&(a.language=this.language),"location"==this.type&&(a.language=this.language,a.markersByField=this.markersByField,a.markerField=this.markerField,a.markersByFieldEnabled=r.parseBoolean(this.markersByFieldEnabled)),"textarea"==this.type&&(a.autobr=this.autobr,a.html=this.html),"text"==this.type&&(a.searchType=this.searchType),"modal"==this.type&&(a.showButtonText=this.showButtonText),"distance"==this.type&&(a.distanceControl=this.distanceControl,a.distanceUnits=this.distanceUnits,a.distanceUnitsLabel=this.distanceUnitsLabel,a.fromLabel=this.fromLabel,a.addressField=this.addressField,a.addressFieldPlaceholder=this.addressFieldPlaceholder,a.userLocationButton=this.userLocationButton,a.placeholder=this.placeholder,a.language=this.language,a.country=this.country,a.searchByZip=this.searchByZip,a.zipLength=this.zipLength,a.userLocationButton=r.parseBoolean(this.userLocationButton),"none"===a.distanceControl&&(a.distanceDefault=a.options.filter(function(e){return e.default})[0].value)),"search"==this.type&&(a.searchFallback=r.parseBoolean(this.searchFallback),a.placeholder=this.placeholder,a.noResultsText=this.noResultsText,a.width=this.width),this.checkboxLabel&&(a.checkboxLabel=this.checkboxLabel),this.checkboxValue&&(a.checkboxValue=this.checkboxValue),this.formBuilder.filtersMode&&(a.parameterName=this.parameterName,a.parameterNameShort=this.parameterName.split(".")[1],a.placeholder=this.placeholder),a.visible=void 0===this.visible||this.visible,a},i.prototype.get=function(){var e,t,a=this.getSchema();return a._name=a.name,this.formBuilder.namespace&&(a.name=this.name.split("[")[0],e=(e=this.name.split("[")[1]||"")&&"["+e,a.name=this.formBuilder.namespace+"["+a.name+"]"+e),"post"==this.type&&(this.formBuilder.admin&&(a.post_types=this.formBuilder.admin.getPostTypes()),a.post_type=this.post_type,a.post=this.post,a.add_fields=this.add_fields||0),"date"==this.type&&(this.formBuilder.admin&&(a.languages=this.languages),a.language=this.language),"distance"==this.type&&(this.formBuilder.admin&&(a.languages=this.languages,a.countries=this.countries),a.language=this.language,a.country=this.country,a.searchByZip=this.searchByZip,a.zipLength=this.zipLength,a.userLocationButton=r.parseBoolean(this.userLocationButton)),"location"==this.type&&(this.formBuilder.admin&&(a.languages=this.languages,a.markerImages=r.markerImages,a.markersByField=this.markersByField,a.markerField=this.markerField,a.markersByFieldEnabled=r.parseBoolean(this.markersByFieldEnabled),t=this,a.markerImages.forEach(function(e){e.url===t.formBuilder.mapsvg.getData().options.defaultMarkerImage?e.default=!0:e.default=!1})),a.language=this.language,this.location&&(a.location=this.location,this.location.marker&&(a.location.img=(0===this.location.marker.src.indexOf(r.urls.uploads)?"uploads/":"")+this.location.marker.src.split("/").pop()))),"textarea"==this.type&&(a.html=this.html),a.databaseFields=this.databaseFields,a.databaseFieldsFilterableShort=this.databaseFieldsFilterableShort,a.regionFields=this.regionFields,a.placeholder=this.placeholder,a},i.prototype.update=function(e,t){var a,i=this;"options"==e?(a=[],t=t.split("\n").forEach(function(e){e=e.trim().split(":"),"checkbox"==i.type&&3==e.length?a.push({label:e[0],name:e[1],value:e[2]}):"radio"!=i.type&&"select"!=i.type&&"checkboxes"!=i.type||2!=e.length||a.push({label:e[0],value:e[1]})}),this.options=a):this[e]=t,"parameterName"==e&&this.views.edit.find(".mapsvg-filter-param-name").text(t),this.redraw()},i.prototype.redraw=function(){var e=u(this.templates.result(this.get()));this.views.result.html(e.html()),u().mselect2&&("distance"!==this.type?this.views.result.find("select").css({width:"100%",display:"block"}):this.views.result.find("select")).mselect2().on("select2:focus",function(){u(this).mselect2("open")}),u().colorpicker&&this.views.edit&&this.views.edit.find(".cpicker").colorpicker().on("changeColor.colorpicker",function(e){""==u(this).find("input").val()&&u(this).find("i").css({"background-color":""})})};function t(e){var t=this;this.container=e.container,this.namespace=e.namespace,this.mediaUploader=e.mediaUploader,this.schema=e.schema||[],this.editMode=null!=e.editMode&&e.editMode,this.filtersMode=null!=e.filtersMode&&e.filtersMode,this.filtersHide=null!=e.filtersHide&&e.filtersHide,this.modal=null!=e.modal&&e.modal,this.admin=e.admin,this.mapsvg=e.mapsvg,this.data=e.data||{},this.eventHandlers=e.events,this.template="form-builder",this.closeOnSave=!0===e.closeOnSave,this.newRecord=!0===e.newRecord,this.types=e.types||["text","textarea","checkbox","radio","select","image","region","location","post","date"],this.templates={},this.elements={},this.view=u("<div />").addClass("mapsvg-form-builder"),this.editMode&&this.view.addClass("full-flex"),this.formControls=[],r.templatesLoaded[this.template]?this.init():u.get(r.urls.templates+t.template+".html?"+Math.random(),function(e){u(e).appendTo("body"),r.templatesLoaded[t.template]=!0,Handlebars.registerPartial("dataMarkerPartial",u("#mapsvg-data-tmpl-marker").html()),t.editMode&&Handlebars.registerPartial("markerByFieldPartial",u("#mapsvg-markers-by-field-tmpl-partial").html()),t.init()})}t.prototype.init=function(){var e,t=this;r.formBuilder=this,t.editMode?(e=Handlebars.compile(u("#mapsvg-form-editor-tmpl-ui").html()),t.view.append(e({types:this.types})),t.view.addClass("edit")):(e=u('<div class="mapsvg-data-form-view"></div>'),t.view.append(e),this.filtersMode||e.addClass("form-horizontal")),t.elements={buttons:{text:t.view.find("#mapsvg-data-btn-text"),textarea:t.view.find("#mapsvg-data-btn-textarea"),checkbox:t.view.find("#mapsvg-data-btn-checkbox"),radio:t.view.find("#mapsvg-data-btn-radio"),select:t.view.find("#mapsvg-data-btn-select"),image:t.view.find("#mapsvg-data-btn-image"),region:t.view.find("#mapsvg-data-btn-region"),marker:t.view.find("#mapsvg-data-btn-marker"),saveSchema:t.view.find("#mapsvg-data-btn-save-schema")},containers:{buttons_add:t.view.find("#mapsvg-data-buttons-add"),form_view:t.view.find(".mapsvg-data-form-view"),form_edit:t.view.find("#mapsvg-data-form-edit")}},t.redraw()},t.prototype.viewDidLoad=function(){_this.formControls.forEach(function(e){var t;e.html&&(t=e.views.result.find("textarea")[0],e.htmlEditor=CodeMirror.fromTextArea(t,{mode:{name:"handlebars",base:"text/html"},matchBrackets:!0,lineNumbers:!0}))})},t.prototype.setEventHandlers=function(){var m=this;u(e).off("keydown.form.mapsvg").on("keydown.form.mapsvg",function(e){r.formBuilder&&((e.metaKey||e.ctrlKey)&&13==e.keyCode?r.formBuilder.save():27==e.keyCode&&r.formBuilder.close())}),this.editMode?(this.view.on("click",".mapsvg-marker-image-selector button",function(e){e.preventDefault();e=u(this).find("img").attr("src");u(this).parent().find("button").removeClass("active"),u(this).addClass("active"),m.mapsvg.setDefaultMarkerImage(e)}),this.view.on("click","#mapsvg-data-buttons-add button",function(e){e.preventDefault();e=u(this).data("create");m.add({type:e})}),this.view.on("click","#mapsvg-data-btn-save-schema",function(e){e.preventDefault();var e=m.getSchema(),s={};m.formControls.forEach(function(e){s[e.name]=(s[e.name]||0)+1}),m.elements.containers.form_view.find(".form-group").removeClass("has-error");var l,r,o=[],n=["id","lat","lon","lng","location","location_lat","location_lon","location_lng","location_address","location_img","marker","marker_id","regions","region_id","post_id","post","post_title","post_url","keywords","status"],d={regions:"region",status:"status",post_id:"post",marker:"marker",location:"location"};m.formControls.forEach(function(e,t){var a,i=!1;m.filtersMode||(1<s[e.name]?l||(l="Field names should be unique",o.push(l),i=!0):0===e.name.length?r||(r="Field name can't be empty",o.push(r),i=!0):-1!=n.indexOf(e.name)&&(!d[e.name]||d[e.name]&&d[e.name]!=e.type)&&(a='Field name "'+e.name+'" is reserved, please set another name',o.push(a),i=!0)),!e.options||"region"==e.type||"marker"==e.type||(a=_.pluck(e.options,"value")).length!=_.uniq(a).length&&(o.push('Check "Options" list - values should not repeat'),i=!0),i&&e.views.result.addClass("has-error")}),0==o.length?m.eventHandlers.saveSchema&&m.eventHandlers.saveSchema(e):u.growl.error({title:"Errors",message:o.join("<br />")})}),setTimeout(function(){var e=m.elements.containers.form_view[0];m.sortable=new Sortable(e,{animation:150,onStart:function(){m.elements.containers.form_view.addClass("sorting")},onEnd:function(){setTimeout(function(){m.elements.containers.form_view.removeClass("sorting"),m.formControls=[],u(e).find(".form-group").each(function(e,t){m.formControls.push(u(t).data("formElement"))})},500)}})},1e3)):(m.view.on("click","button.btn-save",function(e){e.preventDefault(),m.save()}),m.view.on("click","button.btn-close",function(e){e.preventDefault(),m.close()})),new r.ResizeSensor(this.view[0],function(){m.scrollApi&&m.scrollApi.reinitialise()})},t.prototype.save=function(){var e=this;e.marker&&(e.marker.onChange=null,e.mapsvg.unsetEditingMarker());var t=e.getData();e.saved=!0,e.eventHandlers.save&&e.eventHandlers.save.call(e,t)},t.prototype.getData=function(){var i=this,e=i.toJSON(!0);return i.formControls.forEach(function(t){var a;"image"==t.type&&(e[t.name]=[],t.images&&t.images.length&&null!=t.images[0]&&(a=[],t.views.result.find(".mapsvg-thumbnail-wrap").each(function(e,t){t=u(t).data("image");a.push(t)}),t.images=a,e[t.name]=e[t.name].concat(t.images))),"location"==t.type&&(t.location?e[t.name]=t.location:e[t.name]=""),"post"==t.type&&(e.post=t.post),"region"==t.type&&(e.regions&&"object"==typeof e.regions&&e.regions.length?e.regions=e.regions.map(function(e){return{id:e,title:i.mapsvg.getRegion(e).title}}):e.regions=""),"select"==t.type&&t.multiselect&&e[t.name]&&e[t.name].length&&(e[t.name]=e[t.name].map(function(e){return{value:e,label:t.optionsDict[e]}}))}),null!=i.data.id&&(e.id=i.data.id),delete e.marker_id,e},t.prototype.getDataJSON=function(){var t=this,i=t.toJSON(!0);return t.formControls.forEach(function(e){var a;"image"==e.type&&(i[e.name]=[],e.images&&e.images.length&&null!=e.images[0]&&(a=[],t.view.find(".mapsvg-thumbnail-wrap").each(function(e,t){t=u(t).data("image");a.push(t)}),e.images=a,i[e.name]=i[e.name].concat(e.images))),"location"==e.type&&(i[e.name]=e.location)}),null!=t.data.id&&(i.id=t.data.id),i},t.prototype.redraw=function(e){var t,a,i=this;delete i.marker,i.container.empty(),i.elements.containers.form_view.empty(),i.formControls=[],i.data&&i.data.id&&i.add({type:"id",label:"ID",name:"id",value:i.data.id}),i.data&&i.data._title&&i.add({type:"title",label:"Title",name:"title",value:i.data._title}),i.schema&&i.schema.length&&i.schema.forEach(function(e){var t;i.admin&&i.admin.isMetabox&&"post"==e.type||(i.filtersMode?"distance"==e.type?e.value=i.data.distance||(void 0!==e.value?e.value:null):e.value=i.data[e.parameterNameShort]:e.value=i.data?i.data[e.name]:void 0!==e.value?e.value:null,"location"!=e.type||i.editMode?"post"==e.type&&(e.post=i.data.post):(e.value&&e.value.marker&&e.value.marker.id&&(i.marker=e.value.marker.getOptions(),i.mapsvg.setEditingMarker(e.value.marker)),i.admin&&i.admin.setMode&&i.admin.setMode("editMarkers"),i.admin&&i.admin.enableMarkersMode(!0),i.mapsvg.setMarkerEditHandler(function(){i.marker=this.getOptions(),i.mapsvg.setEditingMarker(this);var e=i.getData(),e=i.mapsvg.getMarkerImage(e);this.setImage(e),i.locationFormElement&&i.locationFormElement.renderMarker(i.mapsvg.getMarker(i.marker.id))})),(!i.filtersMode||!i.filtersHide||i.filtersHide&&i.modal&&"search"!==e.type||!i.modal&&"search"===e.type)&&(t=i.add(e)),"location"==e.type&&(i.locationFormElement=t))}),i.editMode||(0!=this.schema.length||i.filtersMode?i.admin&&!i.admin.isMetabox&&i.add({type:"save"}):i.add({type:"empty"})),i.filtersMode&&i.filtersHide&&!i.modal&&(this.showFiltersButton=i.add({type:"modal",buttonText:i.mapsvg.getData().options.filters.showButtonText})),i.editMode||i.filtersMode?i.container.html(this.view):(t=u('<div class="nano"></div>'),a=u('<div class="nano-content"></div>'),t.append(a),a.html(this.view),i.container.html(t),t.jScrollPane(),i.scrollApi=t.data("jsp")),i.eventHandlers.load&&i.eventHandlers.load(i),this.editMode||i.filtersMode||this.view.find("input:visible,textarea:visible").not(".tt-hint").first().focus(),this.container.find(".CodeMirror").each(function(e,t){t&&t.CodeMirror.refresh()}),i.setEventHandlers(),i.eventHandlers.init&&i.eventHandlers.init(i.data)},t.prototype.delete=function(a){var i=this;i.formControls.forEach(function(e,t){e===a&&(i.formControls.splice(t,1),i.structureChanged=!0)})},t.prototype.add=function(t){if(-1!=["region","marker","post","status","distance","location","search"].indexOf(t.type)){var a=!1;if(this.formControls.forEach(function(e){e.type==t.type&&(a=!0)}),a)return void u.growl.error({title:"Error",message:'You can add only 1 "'+r.ucfirst(t.type)+'" field'})}"date"==t.type&&(r.datepicker=r.datepicker||{});var e=new i(t,this);return this.formControls.push(e),this.elements.containers.form_view.append(e.views.result),this.editMode&&this.edit(e),e},t.prototype.edit=function(e){var t=this;t.currentlyEditing&&t.currentlyEditing.destroyEditor(),t.elements.containers.form_edit.append(e.getEditor()),e.initEditor(),t.currentlyEditing=e,t.elements.containers.form_view.find(".form-group.active").removeClass("active"),e.views.result.addClass("active")},t.prototype.get=function(){return this.formControls.map(function(e){return e.get()})},t.prototype.getSchema=function(){return this.formControls.map(function(e){return e.getSchema()})},t.prototype.close=function(){var e,t=this;t.saved||(null==t.data.id&&t.marker&&((e=t.mapsvg.getMarker(t.marker.id)).onChange=null,e.delete(),delete t.marker),this.backupData&&this.backupData.location&&(this.location=this.backupData.location,t.mapsvg.markerAdd(this.location.marker),t.mapsvg.setEditingMarker(this.location.marker)),!t.marker||(e=t.mapsvg.getEditingMarker())&&(e.setImage(t.marker.src),e.setXy([t.marker.x,t.marker.y]),t.mapsvg.unsetEditingMarker())),t.markerSelector&&t.markerSelector.popover("destroy"),!u().mselect2||(a=t.view.find(".mapsvg-select2")).length&&a.mselect2("destroy");var a=t.view.find(".CodeMirror");a.length&&a.empty().remove(),t.admin&&t.admin.enableMarkersMode(!1),r.formBuilder=null,t.eventHandlers.close&&t.eventHandlers.close()},t.prototype.destroy=function(){this.view.empty().remove(),this.sortable=null},t.prototype.on=function(e,t){this.eventHandlers[e]=t},t.prototype.toJSON=function(s){var t={};return this.elements.containers.form_view.find("input, textarea, select").each(function(){var e;u(this).data("skip")||u(this).prop("disabled")||!u(this).attr("name")||!s&&"checkbox"==u(this).attr("type")&&null==u(this).attr("checked")||"radio"==u(this).attr("type")&&!u(this).is(":checked")||(e="checkbox"==u(this).attr("type")?u(this).prop("checked"):u(this).val(),function e(t,a,i){(s||i)&&(1==a.length?t[a[0]]=i:(null==t[a[0]]&&(""===a[1]?t[a[0]]=[]:t[a[0]]={}),void 0!==t[a[0]].length?t[a[0]].push(i):e(t[a[0]],a.slice(1),i)))}(t,u(this).attr("name").replace(/]/g,"").split("["),e))}),t},t.prototype.getRegionsList=function(){return this.mapsvg.getData().regions.map(function(e){return{id:e.id,title:e.title}})},t.prototype.getMarkersList=function(){return this.mapsvg.getData().markers.map(function(e){return{id:e.id}})},r.FormBuilder=t}(jQuery,MapSVG,window);
!function(r,e){function t(e,t,l){this.name="google-maps",MapSVGAdminController.call(this,e,t,l),this.styles={default:{},silver:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],retro:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],dark:[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],night:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],blue:[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]}}e.MapSVGAdminGoogleMapsController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.viewLoaded=function(){this.mapsvg.getData().mapIsGeo||(this.view.find("#mapsvg-can-use-gmap").show(),this.view.find("form").css({opacity:.4,"pointer-events":"none"}))},t.prototype.setEventHandlers=function(){var l=this;MapSVG.GoogleMapBadApiKey=function(){alert('Google maps API key is incorrect. Change API key, click "Save" and RELOAD the page to reload Google maps scripts with correct API key.'),l.view.find("#googleMapsOn").prop("checked",!1).trigger("change")};var e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("formatted_address"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:ajaxurl+"?action=mapsvg_geocoding&address=%QUERY%",wildcard:"%QUERY%",transform:function(e){return e.error_message&&alert(e.error_message),e.results},rateLimitWait:500}}),t=l.view.find("#mapsvg-gm-address");t.typeahead(null,{name:"mapsvg-addresses",display:"formatted_address",source:e,minLength:2});t.on("typeahead:select",function(e,t){t=t.geometry.bounds||t.geometry.viewport,t=new google.maps.LatLngBounds(t.southwest,t.northeast);l.mapsvg.getData().googleMaps.map.fitBounds(t)}),this.view.on("change",'input[name="googleMaps[style]"]',function(e){var t=r(this).val();"custom"==t?(l.view.find("#mapsvg-gm-custom-style-extra").show(),l.updateScroll(),r("#mapsvg-gm-custom-style-textarea").trigger("change")):(l.view.find("#mapsvg-gm-custom-style-extra").hide(),l.updateScroll(),l.mapsvg.getData().options.googleMaps.styleJSON=l.styles[t],l.mapsvg.getData().googleMaps.map.setOptions({styles:l.styles[t]}))}),this.view.on("change paste keyup","#mapsvg-gm-custom-style-textarea",function(e){try{var t=JSON.parse(r(this).val());l.mapsvg.getData().options.googleMaps.styleJSON=t,l.mapsvg.getData().googleMaps.map.setOptions({styles:t}),r("#mapsvg-gm-invalid-json").hide()}catch(e){r("#mapsvg-gm-invalid-json").show()}})}}(jQuery,window);
!function(o,n){function e(e,t,r){this.name="javascript",this.errorLines=[],this.disableHorizontalScroll=!0,this.scrollable=!1,MapSVGAdminController.call(this,e,t,r)}n.MapSVGAdminJavascriptController=e,MapSVG.extend(e,n.MapSVGAdminController),e.prototype.viewLoaded=function(){this.setEditor()},e.prototype.setEventHandlers=function(){var e=this;this.toolbarView.find("select").mselect2().on("select2:select",function(){e.setEditor()})},e.prototype.setEditor=function(){var e=this;this.view.find("#mapsvg-js-container").empty();var t=this.toolbarView.find("select").val(),r=o('<textarea id="mapsvg-js-textarea"  class="form-control" rows="8" data-live="change" name="events['+t+']"></textarea>'),i=this.mapsvg.getData().options.events[t];i=(i=i||"")&&"string"!=typeof i?MapSVG.convertToText(this.mapsvg.getData().options.events[t]):i,r.val(i),this.view.find("#mapsvg-js-container").append(r),this.editor=CodeMirror.fromTextArea(r[0],{lint:!0,mode:"javascript",matchBrackets:!0,lineNumbers:!0}),this.editor.on("change",e.setTextareaValue),e.resizeEditor(),o(n).off("resize.codemirror.js"),o(n).on("resize.codemirror.js",function(){e.resizeEditor()})},e.prototype.resizeEditor=function(){this.view.find(".CodeMirror")[0].CodeMirror.setSize(null,this.contentWrap.height()),this.view.find(".CodeMirror").height(this.contentWrap.height())},e.prototype.setTextareaValue=function(e,t){var r=e.getValue();o(e.getTextArea()).val(r).trigger("change")},e.prototype.highlightErrors=function(){var e=this,t=o(e.editor.getTextArea()),r=e.editor.getValue();t.val(r),e.editor.operation(function(){e.error&&e.editor.removeLineClass(e.error.line-2,"background","line-error"),e.error=e.admin.validateInput(t),e.error instanceof TypeError||e.error instanceof SyntaxError?e.editor.addLineClass(e.error.line-2,"background","line-error"):(e.error=null,e.setTextareaValue())})}}(jQuery,window);
!function(e,t){function i(t,e,i){this.name="layers",this.scrollable=!1,this.isParent=!0,MapSVGAdminController.call(this,t,e,i)}t.MapSVGAdminLayersController=i,MapSVG.extend(i,t.MapSVGAdminController),i.prototype.viewLoaded=function(){var t=this;this.controllers.list=new MapSVGAdminLayersListController("mapsvg-layers-list",t.admin,t.mapsvg),this.controllers.settings=new MapSVGAdminLayersSettingsController("mapsvg-layers-settings",t.admin,t.mapsvg),this.controllers.list.toolbarView=this.toolbarView,this.controllers.settings.toolbarView=this.toolbarView},i.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this)},i.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this)},i.prototype.setEventHandlers=function(){e("#mapsvg-layers-menu a").click(function(t){t.preventDefault(),e(this).tab("show"),e("#mapsvg-btn-layer-add").toggle("#mapsvg-layers-list"===e(this).attr("href"))})}}(jQuery,window);
!function(r,e){function t(e,t,a){var i=this;this.name="layers-list",this.database=new MapSVG.DatabaseService({type:"local",dbObject:a.getData().options.groups},a),this.database.on("change",function(){i.mapsvg.setLayersControl()}),this.database.setSchema([{name:"id",label:"ID",visible:!0,type:"id"},{name:"objects",help:"You can select multiple objects",multiselect:!0,label:"Objects",visible:!0,type:"select",optionsGrouped:!0,options:a.getGroupSelectOptions()},{name:"title",label:"Title",visible:!0,type:"text"},{name:"visible",label:"Visible",visible:!1,type:"checkbox"}]),MapSVGAdminController.call(this,e,t,a)}e.MapSVGAdminLayersListController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.viewLoaded=function(){this.redrawDataList()},t.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this),this.database.setSchema()},t.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.closeFormHandler()},t.prototype.setEventHandlers=function(){var t=this;r("#mapsvg-btn-layer-add").on("click",function(e){e.preventDefault(),t.btnAdd=r(this),t.btnAdd.addClass("disabled"),t.editDataRow()}),this.view.on("click",".mapsvg-data-row",function(e){r(this).hasClass("active")||t.editDataRow(r(this))}).on("click",".mapsvg-layer-view-toggle",function(e){e.preventDefault(),e.stopPropagation(),r(this).toggleClass("active");e=r(this).closest("tr").data("id"),e=t.database.getLoadedObject(e);e.visible=!r(this).hasClass("active"),e.visible?(r(this).find("i").toggleClass("fa-eye",!0),r(this).find("i").toggleClass("fa-eye-slash",!1)):(r(this).find("i").toggleClass("fa-eye",!1),r(this).find("i").toggleClass("fa-eye-slash",!0)),t.mapsvg.setGroups(),t.mapsvg.setLayersControl()}).on("click",".mapsvg-layer-delete",function(e){e.preventDefault(),e.stopPropagation();e=r(this).closest("tr");t.deleteDataRow(e)})},t.prototype.getTemplateData=function(){return{fields:this.getDataFieldsForTemplate(!0),data:this.database.getLoaded()}},t.prototype.getDataFieldsForTemplate=function(e){return[{name:"id",visible:!0,type:"id"},{name:"objects",visible:!0,type:"select",optionsGrouped:!0,options:this.mapsvg.getGroupSelectOptions()},{name:"title",visible:!0,type:"text"}]},t.prototype.redrawDataList=function(){var e=this;e.redraw();var t=this.mapsvg.getPagination(function(){e.redrawDataList()});this.view.find(".mapsvg-pagination-container").html(t)},t.prototype.getObjectRow=function(e){return this.view.find("#mapsvg-layer-row-"+e.id)},t.prototype.addDataRow=function(e){e={fields:this.database.getColumns({visible:!0}),params:e},e=r(this.templates.item(e));return this.view.find("#mapsvg-layers-list-table tbody").prepend(e),e},t.prototype.updateDataRow=function(e,t){var a={fields:this.database.getColumns({visible:!0}),params:e},i=r(this.templates.item(a));(t=t||r("#mapsvg-layer-row-"+e.id)).replaceWith(i),i.addClass("mapsvg-row-updated"),setTimeout(function(){i.removeClass("mapsvg-row-updated")},2600)},t.prototype.deleteDataRow=function(e){var t=e.data("id"),a=this.database.getLoadedObject(t);if(!a)return!1;a.marker&&this.mapsvg.markerDelete(a.marker),this.database.delete(t),e.fadeOut(300,function(){e.remove()})},t.prototype.editDataRow=function(e,t){var a=this,i=!e,s={};a.tableDataActiveRow&&a.tableDataActiveRow.removeClass("mapsvg-row-selected"),s=e?(a.updateScroll(),t&&a.contentWrap.data("jsp").scrollToElement(e,!0,!1),a.tableDataActiveRow=e,a.tableDataActiveRow.addClass("mapsvg-row-selected"),o=a.tableDataActiveRow.data("id"),a.database.getLoadedObject(o)):{visible:!0};var o=wp.media.frames.file_frame=wp.media({title:"Choose images",button:{text:"Choose images"},multiple:!0});a.formBuilder&&(a.formBuilder.destroy(),a.formBuilder=null,a.formBuilderRow&&a.formBuilderRow.remove(),r("#mapsvg-btn-layer-add").removeClass("disabled")),a.formContainer&&a.formContainer.empty().remove(),a.formContainer=r('<div class="mapsvg-modal-edit"></div>'),this.view.append(a.formContainer),a.formBuilder=new MapSVG.FormBuilder({container:a.formContainer,schema:a.database.getSchema(),editMode:!1,mapsvg:a.mapsvg,mediaUploader:o,data:s,admin:a.admin,events:{save:function(e){i?(a.saveDataObject(e),this.redraw()):(a.updateDataObject(e),this.close())},close:function(){a.closeFormHandler()}}})},t.prototype.saveDataObject=function(e){var t,a,i,s=this;(t=e.id?this.getObjectRow(e):t)&&t.length||(a=!0,t=this.addDataRow(e)),a?this.database.create(e).done(function(e){a&&s.updateDataRow(e,t)}).fail(function(){r.growl.error({title:"Server error",message:"Can't save object"}),t.remove()}):(this.database.update(e).fail(function(){r.growl.error({title:"Server error",message:"Can't update object"})}),e.marker&&((i=s.mapsvg.getMarker(e.marker.id)).setId("marker_"+e.id),i.setObject(e)),this.closeFormHandler(),this.updateDataRow(e))},t.prototype.updateDataObject=function(e){var t;this.database.update(e).fail(function(){r.growl.error({title:"Server error",message:"Can't update object"})}),e.marker&&((t=this.mapsvg.getMarker(e.marker.id)).setId("marker_"+e.id),t.setObject(e)),this.closeFormHandler(),this.updateDataRow(e)},t.prototype.closeFormHandler=function(){var e=this;r("#mapsvg-btn-layer-add").removeClass("disabled"),e.mapsvg.showMarkers(),e.formBuilder&&(e.formBuilder.destroy(),e.formBuilder=null,e.formContainer.empty().remove(),e.tableDataActiveRow&&e.tableDataActiveRow.removeClass("mapsvg-row-selected"),e.tableDataActiveRow&&!e.tableDataActiveRow.hasClass("mapsvg-row-updated")&&e.tableDataActiveRow.addClass("mapsvg-row-closed"),setTimeout(function(){e.tableDataActiveRow&&!e.tableDataActiveRow.hasClass("mapsvg-row-updated")&&e.tableDataActiveRow.removeClass("mapsvg-row-closed")},1600),r("a.browser").remove()),this.updateScroll()}}(jQuery,window);
!function(n){function t(n,t,e){this.name="layers-settings",this.database=e.regionsDatabase,MapSVGAdminController.call(this,n,t,e)}n.MapSVGAdminLayersSettingsController=t,MapSVG.extend(t,n.MapSVGAdminController),t.prototype.setEventHandlers=function(){}}((jQuery,window));
!function(d,e){function t(e,t,a){this.name="markers",MapSVGAdminController.call(this,e,t,a)}e.MapSVGAdminMarkersController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.setEventHandlers=function(){var e,n=this;this.admin.hbData.isGeo&&(e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("formatted_address"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"//maps.googleapis.com/maps/api/geocode/json?address=%QUERY%&sensor=true",wildcard:"%QUERY%",transform:function(e){return e.results},rateLimitWait:600}}),d("#mapsvg-geocode .typeahead").typeahead(null,{name:"mapsvg-addresses",display:"formatted_address",source:e,minLength:2}),d("#mapsvg-geocode .typeahead").on("typeahead:select",function(e,t){var a=d("#mapsvg-geocode img").attr("src");n.mapsvg.markerAdd({src:a,geoCoords:[t.geometry.location.lat,t.geometry.location.lng]},!0),d("#mapsvg-geocode .typeahead").typeahead("val","")})),this.view.on("click","a.editable",function(){d(this).parent();var t=d(this),e=t.width();d(this).hide();var a=d(this).text(),r=d(this).closest("tr"),s=r.data("marker-id"),i=n.mapsvg.getMarker(s),s=d('<input class="editable" value="'+a+'"/>');s.width(e),s.insertBefore(d(this)),s.select();var o=t.data("field");s.on("blur",function(){if(text=d(this).val(),a!=text){if("id"==o){text=text.replace(" ","_");var e=n.mapsvg.checkId(text);if(e.error)return d().message(e.error),!1}e={};e[o]=text,t.html(text),i.update(e),"id"==o&&(n.mapsvg.updateMarkersDict(),r.attr("id","mapsvg-marker-"+text),r.data("marker-id",text))}t.show(),d(this).off().remove()}).on("keypress",function(e){13!=e.which&&13!=event.keyCode||(e.preventDefault(),d(this).blur().trigger("blur"))})}).on("click",".mapsvg-marker-delete",function(e){e.preventDefault();var t=d(this).closest("tr"),e=t.data("marker-id"),e=n.mapsvg.getMarker(e);n.mapsvg.markerDelete(e),t.fadeOut(300,function(){d(this).remove()})}),d("#mapsvg-geocode .mapsvg-marker-image-btn-trigger img").attr("src",MapSVG.markerImages[0].url),this.view.on("click",".mapsvg-link-btn",function(e){e.preventDefault();var t=d(this).parent(),a=d(this),e=d(this).closest("tr").data("marker-id"),r=n.mapsvg.getMarker(e),s=r.href,e=d('<input class="link-editable form-control" value="'+(r.href||"")+'"/>');t.append(e),a.addClass("opened"),e.select(),e.on("blur",function(){var e=d(this).val();e!=s&&(r.update({href:e}),e.length?a.addClass("active"):a.removeClass("active")),d(this).off().remove(),a.removeClass("opened")}).on("keypress",function(e){13!=e.which&&13!=event.keyCode||(e.preventDefault(),d(this).blur().trigger("blur"))})}),d("#mapsvg-markers-search input#mapsvg-markers-search-1").on("keyup",function(){var e=d(this).data("t");e&&clearTimeout(e);var r=this;d(this).data("t",setTimeout(function(){var e=d(r).val();if(d("#mapsvg-search-markers-no-matches").hide(),e.length){var t=n.mapsvg.searchMarkers(e);if(d("#table-markers tr").hide(),0<t.length)for(var a in t)d("#table-markers tr#mapsvg-marker-"+t[a]).show();else d("#mapsvg-search-markers-no-matches").show()}else d("#table-markers tr").show()},300))})},t.prototype.addMarker=function(e){e=d(this.templates.item(e));d("#table-markers").prepend(e)}}(jQuery,window);
!function(t,e){MetaboxAdmin=function(a){this.mapOptions=a.mapOptions,this.isMetabox=!0,this.mapSchema=a.mapSchema,this.mapId=a.mapId,this.view=t("#"+a.containerId),this.mapContainerId=a.mapContainerId,this.$map=t("#"+a.mapContainerId),this.mapTitle=a.mapTitle,this.markerImages=a.markerImages,e.markerImages=a.markerImages,e.defaultMarkerImage=e.markerImages[0].url,this.dataObject=a.dataObject||{},this.postTypes=a.postTypes||[],this.init()},e.MetaboxAdmin=MetaboxAdmin,MetaboxAdmin.prototype.init=function(){var t=this,a=wp.media.frames.file_frame=wp.media({title:"Choose images",button:{text:"Choose images"},multiple:!0});this.mapOptions.afterLoad=function(){t.dataObject.marker&&(t.dataObject.marker=this.markerAdd(t.dataObject.marker)),t.formBuilder=new e.FormBuilder(t.mapSchema,!1,t.mapsvg,a,t.dataObject,t,"mapsvg"),t.formBuilder.on("update",function(a){t.updateDataObject(a)}),t.formBuilder.view.appendTo(t.view.find(".mapsvg-metabox-form"))},this.mapsvg=this.$map.mapSvg(this.mapOptions)},MetaboxAdmin.prototype.getPostTypes=function(){return this.postTypes}}(jQuery,(window,MapSVG));
!function(t){function n(t,n,o){this.name="modal",this.content="",MapSVGAdminController.call(this,t,n,o)}t.MapSVGAdminModalController=n,MapSVG.extend(n,t.MapSVGAdminController),n.prototype.setContent=function(t){this.content=t},n.prototype.getTemplateData=function(){return{content:this.content}}}((jQuery,window));
!function(o,t){function e(t,e,r){this.name="regions",this.scrollable=!1,this.isParent=!0,MapSVGAdminController.call(this,t,e,r)}t.MapSVGAdminRegionsController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.viewLoaded=function(){var t=this;this.controllers.list=new MapSVGAdminRegionsListController("mapsvg-regions-list",t.admin,t.mapsvg),this.controllers.structure=new MapSVGAdminRegionsStructureController("mapsvg-regions-structure",t.admin,t.mapsvg),this.controllers.settings=new MapSVGAdminRegionsSettingsController("mapsvg-regions-settings",t.admin,t.mapsvg),this.controllers.csv=new MapSVGAdminRegionsCsvController("mapsvg-data-r-csv",t.admin,t.mapsvg),this.controllers.list.toolbarView=this.toolbarView,this.controllers.structure.toolbarView=this.toolbarView,this.controllers.csv.toolbarView=this.toolbarView,this.activeController=this.controllers.list,MapSVGAdminController.prototype.viewLoaded.call(this)},e.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this);var t=this;t.activeController&&t.activeController instanceof MapSVGAdminDatabaseStructureController&&(t.admin.rememberPanelsState(),t.admin.togglePanel("left",!1))},e.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.admin.restorePanelsState()},e.prototype.setEventHandlers=function(){var r=this;o("#mapsvg-regions-menu a").click(function(t){t.preventDefault(),o(this).tab("show")}).on("shown.bs.tab",function(t){var e=o(o(this).attr("href")).data("controller");(r.activeController=e).viewDidAppear();t=o(t.relatedTarget).attr("href");t&&(t=o(t).attr("data-controller"),r.controllers[t].viewDidDisappear()),"#mapsvg-regions-list"==o(this).attr("href")?r.toolbarView.find(".mapsvg-toolbar-buttons").show():r.toolbarView.find(".mapsvg-toolbar-buttons").hide(),"#mapsvg-regions-structure"==o(this).attr("href")?(r.admin.rememberPanelsState(),r.admin.togglePanel("left",!1)):r.admin.restorePanelsState()})}}(jQuery,window);
!function(t,e){function r(e,r,o){this.name="regions-csv",this.database=o.regionsDatabase,MapSVGAdminController.call(this,e,r,o)}e.MapSVGAdminRegionsCsvController=r,MapSVG.extend(r,e.MapSVGAdminController),r.prototype.setEventHandlers=function(){var o=this;this.view.find("#mapsvg-btn-r-csv-upload").on("click",function(){t(this);t("#mapsvg-r-csv-file")[0].files[0]?Papa.parse(t("#mapsvg-r-csv-file")[0].files[0],{header:!0,transformHeader:function(e){return e.toLowerCase().split(" ").join("_")},skipEmptyLines:!0,complete:function(e){var r;0===e.errors.length?o.import(e.data):(r="Errors: \n",r+=e.errors.map(function(e){return e.message+(void 0!==e.row?" (row: "+e.row+")":"")}).slice(0,5).join("\n"),5<e.errors.length&&(r+="\n...and "+(e.errors.length-5)+" more. "),alert(r))}}):t.growl.error({title:"",message:"Please choose a file"})})},r.prototype.import=function(e){var r=this,o=t("#mapsvg-btn-r-csv-upload");o._button("loading"),e=e.filter(function(e){return void 0!==r.mapsvg.getRegion(e.id)});r.database.import(e).done(function(e){t.growl.notice({title:"",message:"File uploaded"})}).always(function(){o._button("reset")}).fail(function(){t.growl.error({title:"",message:"Server error"})})}}(jQuery,window);
!function(r,a){function e(e,t,a){var i=this;this.name="regions-list",this.database=a.regionsDatabase,i.database.on("schemaChange",function(){i.redrawDataList()}),i.database.on("dataLoaded",function(){i.redrawDataList()}),MapSVGAdminController.call(this,e,t,a)}a.MapSVGAdminRegionsListController=e,MapSVG.extend(e,a.MapSVGAdminController),e.prototype.viewLoaded=function(){var e=this.database.getColumns();this.databaseTimestamp=Date.now();var t=this.toolbarView.find(".mapsvg-data-cols");t.empty(),e.forEach(function(e){t.append(r('<li class="'+(e.visible?"active":"")+'"><a href="#" data-field="'+e.name+'">'+e.name+"</a></li>"))})},e.prototype.getTemplateData=function(){var e=this,t=e.database.getLoaded(),a=e.mapsvg.getData().options.regions;return t.forEach(function(e){e.fill=a&&a[e.id]&&a[e.id].fill?a[e.id].fill:null}),{fields:e.getDataFieldsForTemplate(!0),data:t}},e.prototype.getDataFieldsForTemplate=function(t){var a=[{name:"id",visible:!0,type:"id"},{name:"title",visible:!0,type:"id"}],e=this.database.getSchema();return e&&e.forEach(function(e){return!t||e.visible?a.push(e):void 0}),a},e.prototype.setEventHandlers=function(){var t,s=this;this.toolbarView.on("click",".mapsvg-data-cols a",function(e){e.preventDefault(),r(this).closest("li").toggleClass("active");var t,a=s.database.getSchema(),i=r(this).data("field");for(t in a)i==a[t].name&&(a[t].visible=!a[t].visible);s.database.saveSchema(a)}),this.view.on("click",".region-cpicker",function(e){e.preventDefault(),setTimeout(function(){s.view.addClass("mapsvg-cpicker-opened")},200);var i=r(this);s.colorpickerRegionBtn&&s.colorpickerRegionBtn.colorpicker("destroy"),s.colorpickerRegionBtn=i,s.colorpickerRegionId=r(this).closest(".mapsvg-data-row").data("region-id");e=s.mapsvg.getOptions().regions[s.colorpickerRegionId],e=e?e.fill:"";s.colorpicker=i.colorpicker({template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-input-wrap"><input class="colorpicker-input" type="text"/><i></i></div><div class="colorpicker-reset-wrap"><button class="btn btn-xs btn-default colorpicker-reset">Reset</button><i></i></div></div>'}).colorpicker("show");var o=r(".colorpicker-input");r(".colorpicker-reset").on("click",function(){var e=s.colorpickerRegionId;s.mapsvg.getRegion(e).setFill(""),o.val(""),i.css({background:""}),i.colorpicker("destroy")}),e&&o.val(e),o.on("focus",function(){o.focused=!0}),o.on("blur",function(){o.focused=!1}),o.on("keyup paste",function(){var e=r(this).val();i.colorpicker("setValue",e)}),i.colorpicker().on("changeColor",function(e){var t=s.colorpickerRegionId,a=e.color.toRGB(),a=1===a.a?e.color.toHex():"rgba("+a.r+","+a.g+","+a.b+","+a.a+")";s.mapsvg.getRegion(t).setFill(a),o.focused||o.val(a),i.css({background:a})}),e&&i.colorpicker("setValue",e),r(a).on("mousedown.colorpicker",function(e){r(e.target).not("input")&&(s.view.removeClass("mapsvg-cpicker-opened"),o.blur())})}),r("body").on("click",".colorpicker-input",function(){}),this.view.on("click",".mapsvg-link-btn",function(e){e.preventDefault();var t=r(this).parent(),a=r(this),e=r(this).closest("tr").data("region-id"),i=s.mapsvg.getRegion(e),o=i.href,e=r('<input class="link-editable form-control" value="'+(i.href||"")+'"/>');t.append(e),a.addClass("opened"),e.select(),e.on("blur",function(){var e=r(this).val();e!=o&&(i.update({href:e}),e.length?a.addClass("active"):a.removeClass("active")),r(this).off().remove(),a.removeClass("opened")}).on("keypress",function(e){13!=e.which&&13!=event.keyCode||(e.preventDefault(),r(this).blur().trigger("blur"))})}),r("#mapsvg-regions-search").on("keyup",function(){t&&clearTimeout(t);var e=this;t=setTimeout(function(){s.mapsvg.regionsDatabase.getAll({filters:{search:r(e).val()},searchFallback:!0}),s.redrawDataList()},300)}),this.view.on("mouseover",".mapsvg-data-row",function(){var e=r(this).data("region-id"),e=s.mapsvg.getRegion(e);e.selected||e.highlight()}).on("mouseout",".mapsvg-data-row",function(){var e=r(this).data("region-id"),e=s.mapsvg.getRegion(e);e.selected||e.unhighlight()}).on("click",".mapsvg-data-row",function(e){var t,a=r(e.target),i=r(this).data("region-id");a.is(".btn")||a.parent().is(".btn")||(void 0!==a.data("set-status")?(t=s.mapsvg.getRegion(i).data,e=a.data("set-status")+"",t.status=e,s.updateDataObject(t),a.closest("ul").find("li").removeClass("active"),a.parent().addClass("active"),a.closest("td").find(".mapsvg-status-text").html(a.text())):(i=s.mapsvg.getRegion(i),s.editRegion(i)))}),this.view.on("click",".mapsvg-data-btn",function(e){e.preventDefault();e=r(this).closest("tr").data("region-id");r('#mapsvg-tabs-menu a[href="#tab_database"]').tab("show"),r("#mapsvg-data-search").val(e).trigger("keyup")})},e.prototype.updateDataRow=function(e,t){e.id_no_spaces=e.id.split(" ").join("_");var a=this.mapsvg.getData().options.regions,i={fields:this.database.getColumns({visible:!0}),params:e};i.id=e.id,i.id_no_spaces=e.id_no_spaces,i.fill=a&&a[i.id]&&a[i.id].fill?a[i.id].fill:null;var o=r(this.templates.item(i));(t=t||r("#mapsvg-region-"+e.id_no_spaces.replace(/(:|\(|\)|\.|\[|\]|,|=|@)/g,"\\$1"))).replaceWith(o),o.addClass("mapsvg-row-updated"),setTimeout(function(){o.removeClass("mapsvg-row-updated")},2600)},e.prototype.editRegion=function(e,t){var a=this,i=a.view.find("#mapsvg-region-"+e.id_no_spaces.replace(/(:|\(|\)|\.|\[|\]|,|=|@)/g,"\\$1"));a.tableDataActiveRow&&a.tableDataActiveRow.removeClass("mapsvg-row-selected"),e.selected||a.mapsvg.selectRegion(e);var o={};i&&(a.updateScroll(),t&&a.contentWrap.data("jsp").scrollToElement(i,!0,!1),a.tableDataActiveRow=i,a.tableDataActiveRow.addClass("mapsvg-row-selected"),r.extend(o,e.data,{id:e.id})),o._title=e.title,obj=o;o=wp.media.frames.file_frame=wp.media({title:"Choose images",button:{text:"Choose images"},multiple:!0});a.formBuilder&&(a.formBuilder.destroy(),a.formBuilder=null,a.formBuilderRow&&a.formBuilderRow.remove()),a.formContainer&&a.formContainer.empty().remove(),a.formContainer=a.formContainer||r('<div class="mapsvg-modal-edit"></div>'),this.view.append(a.formContainer),obj.id,a.formBuilder=new MapSVG.FormBuilder({container:a.formContainer,schema:a.database.getSchema(),editMode:!1,mapsvg:a.mapsvg,mediaUploader:o,data:obj,admin:a.admin,events:{save:function(e){a.updateDataObject(e),this.close()},close:function(){a.closeFormHandler()}}})},e.prototype.updateDataObject=function(e){var t=this.mapsvg.getRegion(e.id),a={data:e};e.status&&(a.status=e.status),t.update(a),e.region_title=t.title||"",this.database.update(e).fail(function(){r.growl.error({title:"Server error",message:"Can't update region"})}),e.title=t.title||"",this.closeFormHandler(),this.updateDataRow(t.data)},e.prototype.closeFormHandler=function(){var e=this;e.formBuilder&&(e.formBuilder.destroy(),e.formBuilder=null,e.formContainer.empty().remove(),e.formBuilderRow&&e.formBuilderRow.remove()),r("a.browser").remove()},e.prototype.viewDidAppear=function(){MapSVGAdminController.prototype.viewDidAppear.call(this),this.databaseTimestamp<this.database.lastChangeTime&&this.redrawDataList()},e.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.closeFormHandler()},e.prototype.redrawDataList=function(){this.redraw();var e=this.database.getColumns(),t=this.toolbarView.find(".mapsvg-data-cols");t.empty(),e.forEach(function(e){t.append(r('<li class="'+(e.visible?"active":"")+'"><a href="#" data-field="'+e.name+'">'+e.name+"</a></li>"))})}}(jQuery,window);
!function(t,e){function n(e,t,n){this.name="regions-settings",this.database=n.regionsDatabase,MapSVGAdminController.call(this,e,t,n)}e.MapSVGAdminRegionsSettingsController=n,MapSVG.extend(n,e.MapSVGAdminController),n.prototype.setEventHandlers=function(){var e=this;this.view.on("click","#mapsvg-clear-regions-btn",function(){confirm("Are you sure you want to clear the list of Regions?")&&e.database.clear().done(function(){t.growl.notice({title:"",message:"The list of Regions is cleared",duration:700})}).fail(function(){t.growl.error({title:"Server error",message:"Can't clear the list of regions"})})})}}(jQuery,window);
!function(a,t){function e(t,e,a,i){this.name="regions-structure",this.scrollable=!1,this.database=a.regionsDatabase,MapSVGAdminController.call(this,t,e,a)}t.MapSVGAdminRegionsStructureController=e,MapSVG.extend(e,t.MapSVGAdminController),e.prototype.viewDidAppear=function(){var e=this;MapSVGAdminController.prototype.viewDidAppear.call(this),e.formBuilder=new MapSVG.FormBuilder({schema:e.database.getSchema(),editMode:!0,mapsvg:e.mapsvg,admin:e.admin,container:this.contentView,types:["text","textarea","checkbox","radio","select","image","status","date","post"],events:{saveSchema:function(t){e.database.saveSchema(t).done(function(){(_status=e.database.getSchemaField("status"))&&(e.mapsvg.setRegionStatuses(_status.optionsDict),e.admin.save(!0)),a.growl.notice({title:"",message:"Settings saved",duration:700})}).fail(function(){a.growl.error({title:"Server error",message:"Can't save settings"})})},load:function(){setTimeout(function(){a("#mapsvg-btn-regions-structure").tooltip("show").tooltip("hide")},200)}}})},e.prototype.viewDidDisappear=function(){MapSVGAdminController.prototype.viewDidDisappear.call(this),this.formBuilder&&this.formBuilder.destroy()},e.prototype.setEventHandlers=function(){}}(jQuery,window);
!function(i,s){function t(t,e,a){this.name="settings",MapSVGAdminController.call(this,t,e,a)}s.MapSVGAdminSettingsController=t,MapSVG.extend(t,s.MapSVGAdminController),t.prototype.viewLoaded=function(){var e=this;this.view.find(".mapsvg-select2").mselect2(),e.updateGaugeFields(),e.mapsvg.regionsDatabase.on("schemaChange",function(){e.updateGaugeFields()}),zoomLimit=e.mapsvg.getData().options.zoom.limit,i("#mapsvg-controls-zoomlimit").ionRangeSlider({type:"double",grid:!0,min:-100,max:100,from_min:-100,from_max:0,to_min:1,to_max:100,onFinish:function(){var t=i("#mapsvg-controls-zoomlimit").val().split(";");e.mapsvg.update({zoom:{limit:[t[0],t[1]]}})},from:zoomLimit[0],to:zoomLimit[1]})},t.prototype.setEventHandlers=function(){var o=this;function e(t,e){var a="default"==t?mapsvg_paths.maps+e:mapsvg_paths.uploads+e;i.get(a,function(t){var e=i(t).find("svg"),t={svgDefault:{}};if(t.$svg=e,t.svgDefault.width=e.attr("width"),t.svgDefault.height=e.attr("height"),t.svgDefault.viewBox=e.attr("viewBox"),t.svgDefault.width&&t.svgDefault.height)t.svgDefault.width=parseFloat(t.svgDefault.width.replace(/px/g,"")),t.svgDefault.height=parseFloat(t.svgDefault.height.replace(/px/g,"")),t.svgDefault.viewBox=t.svgDefault.viewBox?t.svgDefault.viewBox.split(" "):[0,0,t.svgDefault.width,t.svgDefault.height];else{if(!t.svgDefault.viewBox)return alert("MapSVG needs width/height or viewBox parameter to be present in SVG file."),!1;t.svgDefault.viewBox=t.svgDefault.viewBox.split(" "),t.svgDefault.width=parseFloat(t.svgDefault.viewBox[2]),t.svgDefault.height=parseFloat(t.svgDefault.viewBox[3])}o.mapsvg.update({source:a,viewBox:t.svgDefault.viewBox,width:t.svgDefault.width,height:t.svgDefault.height}),o.admin.save(!0).done(function(){s.location.reload()})})}i("#mapsvg-controls-width").on("keyup",function(t){o.setHeight(t)}),i("#mapsvg-controls-height").on("keyup",function(t){o.setWidth(t)}),i("#mapsvg-controls-ratio").on("change",function(t){o.keepRatioClickHandler(t)}),i("#mapsvg-controls-set-viewbox").on("click",function(t){t.preventDefault();t=o.mapsvg.getViewBox();i("#mapsvg-controls-viewbox").val(t.join(" ")).trigger("change")}),i("#mapsvg-controls-reset-viewbox").on("click",function(t){t.preventDefault();t=o.mapsvg.getData().svgDefault.viewBox;i("#mapsvg-controls-viewbox").val(t.join(" ")).trigger("change"),o.mapsvg.viewBoxReset(!0)}),this.view.on("change","#mapsvg-header-control",function(){o.admin.resizeSVGCanvas()}),i("#mapsvg-controls-zoom").on("change",":radio",function(){MapSVG.parseBoolean(i("#mapsvg-controls-zoom :radio:checked").val())?i("#mapsvg-controls-zoom-options").show():i("#mapsvg-controls-zoom-options").hide(),o.admin.updateScroll()}),i("#mapsvg-controls-scroll").on("change",":radio",function(){MapSVG.parseBoolean(i("#mapsvg-controls-scroll :radio:checked").val())?i("#mapsvg-controls-scroll-options").show():i("#mapsvg-controls-scroll-options").hide(),o.admin.updateScroll()}),this.view.find("#mapsvg-gauge-control").on("change",":radio",function(){MapSVG.parseBoolean(i("#mapsvg-gauge-control").find(":radio:checked").val())?i("#table-regions").addClass("mapsvg-gauge-on"):i("#table-regions").removeClass("mapsvg-gauge-on")}),this.view.on("click","#mapsvg-set-prefix-btn",function(t){t.preventDefault(),o.admin.save().done(function(){s.location.reload()})}),this.view.on("click","#mapsvg-controls-file-remove",function(t){e("default","geo-calibrated/empty.svg")}),this.view.on("click","#mapsvg-controls-file-reload",function(t){o.mapsvg.getData().options.svgFileVersion++,o.admin.save(!0).done(function(){s.location.reload()})}),this.view.on("click","#mapsvg-controls-file-change",function(t){i("#mapsvg-hidden-file-select").show()}),this.view.on("click","#mapsvg-controls-file-hide",function(t){t.preventDefault(),i("#mapsvg-hidden-file-select").hide()}),this.view.find("#mapsvg-select2-map").mselect2().on("select2:select",function(){e(i(this).find("option:selected").data("package"),i(this).find("option:selected").data("path"))}),this.mapsvg.on("sizeChange",function(){o.admin.resizeDashboard()})},t.prototype.setWidth=function(){var t=this,e=i("#mapsvg-controls-width").val(),a=i("#mapsvg-controls-height").val();i("#mapsvg-controls-ratio").is(":checked")&&(e=Math.round(a*t.mapsvg.getData().svgDefault.width/t.mapsvg.getData().svgDefault.height),i("#mapsvg-controls-width").val(e)),t.mapsvg.viewBoxSetBySize(e,a),t.admin.resizeDashboard()},t.prototype.setHeight=function(){var t=this,e=i("#mapsvg-controls-width").val(),a=i("#mapsvg-controls-height").val();i("#mapsvg-controls-ratio").is(":checked")&&(a=Math.round(e*t.mapsvg.getData().svgDefault.height/t.mapsvg.getData().svgDefault.width),i("#mapsvg-controls-height").val(a)),t.mapsvg.viewBoxSetBySize(e,a),t.admin.resizeDashboard()},t.prototype.keepRatioClickHandler=function(){i("#mapsvg-controls-ratio").is(":checked")&&this.setHeight()},t.prototype.setWidthViewbox=function(){var t=this;e=i("#mapsvg-controls-ratio").is(":checked")?t.mapsvg.getData().svgDefault.width/t.mapsvg.getData().svgDefault.height:i("#map_width").val()/i("#map_height").val();var e,a=Math.round(i("#viewbox_height").val()*e);a>t.mapsvg.getData().svgDefault.viewBox[2]&&(a=t.mapsvg.getData().svgDefault.viewBox[2],e=t.mapsvg.getData().svgDefault.viewBox[3]*e,i("#viewbox_height").val(e)),i("#viewbox_width").val(a)},t.prototype.setViewBoxRatio=function(){var t=i("#map_width").val()/i("#map_height").val(),e=i("#viewbox_width").val()/i("#viewbox_height").val();t!=e&&(e<=t?i("#viewbox_height").val(this.mapsvg.getData().svgDefault.viewBox[2]*t):i("#viewbox_width").val(this.mapsvg.getData().svgDefault.viewBox[3]/t))},t.prototype.setHeightViewbox=function(){var t=this;e=i("#mapsvg-controls-ratio").is(":checked")?t.mapsvg.getData().svgDefault.height/t.mapsvg.getData().svgDefault.width:i("#map_height").val()/i("#map_width").val();var e,a=Math.round(i("#viewbox_width").val()*e);a>t.mapsvg.getData().svgDefault.viewBox[3]&&(a=t.mapsvg.getData().svgDefault.viewBox[3],e=t.mapsvg.getData().svgDefault.viewBox[2]*e,i("#viewbox_width").val(e)),i("#viewbox_height").val(a)},t.prototype.updateGaugeFields=function(){var t=this.mapsvg.regionsDatabase.getSchema(),e=this.mapsvg.getOptions().regionChoroplethField,a=this.view.find("#mapsvg-region-data-fields").empty();a.append("<option></option>"),t.forEach(function(t){a.append("<option "+(e==t.name?"selected":"")+">"+t.name+"</option>")}),a.trigger("change")}}(jQuery,window);
!function(a,e){function t(t,e,s){this.name="templates",this.disableHorizontalScroll=!0,MapSVGAdminController.call(this,t,e,s)}e.MapSVGAdminTemplatesController=t,MapSVG.extend(t,e.MapSVGAdminController),t.prototype.viewDidAppear=function(){this.setHints()},t.prototype.viewLoaded=function(){var t=this;t.setEditor(),a(e).on("resize.codemirror.tmpl",function(){t.resizeEditor()})},t.prototype.setEventHandlers=function(){var t=this;this.toolbarView.find("select").mselect2().on("change",function(){t.setEditor()})},t.prototype.setEditor=function(){var s=this;this.view.find("#mapsvg-template-container").empty(),this.template=this.toolbarView.find("select").val();var t=a('<textarea id="mapsvg-template-textarea" class="form-control" rows="8" name="templates['+this.template+']" data-live="change"></textarea>');t.val(this.mapsvg.getData().options.templates[this.template]),this.view.find("#mapsvg-template-container").append(t),s.setHints(),this.editor=CodeMirror.fromTextArea(t[0],{mode:{name:"handlebars",base:"text/html"},matchBrackets:!0,lineNumbers:!0}),this.editor.on("change",function(t,e){s.setTextareaValue(t,e)}),this.editor.on("inputRead",function(t,e){"{"==e.text[0]&&t.showHint({completeSingle:!1})}),s.resizeEditor()},t.prototype.resizeEditor=function(){this.view.find(".CodeMirror")[0].CodeMirror.setSize(null,this.contentWrap.height()),this.view.find(".CodeMirror").height(this.contentWrap.height())},t.prototype.getRegionHints=function(t){var e=t?"regions.0.":"",s=[];return s.push("{"+e+"id}}"),s.push("{"+e+"title}}"),this.mapsvg.regionsDatabase.getSchema().forEach(function(t){"image"==t.type?(s.push("{"+e+t.name+".0.thumbnail}}"),s.push("{"+e+t.name+".0.medium}}"),s.push("{"+e+t.name+".0.full}}")):"post"==t.type?(s.push("{"+e+"post.post_title}}"),s.push("{"+e+"post.content}}"),s.push("{"+e+"post.url}}")):("select"!=t.type&&"radio"!=t.type&&"status"!=t.type||s.push("{"+e+t.name+"_text}}"),s.push("{"+e+t.name+"}}"))}),s=!t?s.concat(this.getDBHints(!0)):s},t.prototype.getDBHints=function(e){var s=e?"objects.0.":"",a=[];a.push("{"+s+"id}}");var i=this;return this.mapsvg.database.getSchema().forEach(function(t){"post"==t.type?(a.push("{"+s+"post.post_title}}"),a.push("{"+s+"post.post_content}}"),a.push("{"+s+"post.url}}")):"location"==t.type?i.mapsvg.getData().mapIsGeo&&(a.push("{"+t.name+".address.formatted}}"),a.push("{"+t.name+".address.locality}}"),a.push("{"+t.name+".address.state}}"),a.push("{"+t.name+".address.state_short}}"),a.push("{"+t.name+".address.street_number}}"),a.push("{"+t.name+".address.route}}"),a.push("{"+t.name+".address.administrative_area_1}}"),a.push("{"+t.name+".address.administrative_area_1_short}}"),a.push("{"+t.name+".address.administrative_area_2}}"),a.push("{"+t.name+".address.administrative_area_2_short}}"),a.push("{"+t.name+".address.country}}"),a.push("{"+t.name+".address.zip}}"),a.push("{"+t.name+".address.postal_code}}"),a.push("{"+t.name+".lat}}"),a.push("{"+t.name+".lng}}")):"marker"==t.type?i.mapsvg.getData().mapIsGeo&&(a.push("{marker.geoCoords.[0]}}"),a.push("{marker.geoCoords.[1]}}")):"image"==t.type?(a.push("{"+s+t.name+".0.thumbnail}}"),a.push("{"+s+t.name+".0.medium}}"),a.push("{"+s+t.name+".0.full}}")):"region"==t.type?e||(a=a.concat(i.getRegionHints(!0))):("select"!=t.type&&"radio"!=t.type||a.push("{"+s+t.name+"_text}}"),a.push("{"+s+t.name+"}}"))}),a},t.prototype.setHints=function(){var t="popoverRegion"==this.template||"tooltipRegion"==this.template||"detailsViewRegion"==this.template||"directoryItem"==this.template&&"regions"==this.mapsvg.getData().options.menu.source?this.getRegionHints():this.getDBHints(),t=t.concat([]);CodeMirror.registerHelper("hintWords","xml",t)},t.prototype.setTextareaValue=function(t,e){var s=t.getValue(),t=a(t.getTextArea());t.val(s).trigger("change"),"templates[labelMarker]"===t.attr("name")&&this.mapsvg.getData().options.labelsMarkers.on&&this.mapsvg.setLabelsMarkers(),"templates[labelRegion]"===t.attr("name")&&this.mapsvg.getData().options.labelsRegions.on&&this.mapsvg.setLabelsRegions()},t.prototype.init=function(){}}(jQuery,window);
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&"undefined"!=typeof exports?module.exports=t():e.Papa=t()}(this,function n(){"use strict";var u,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s?s:{},a=!s.document&&!!s.postMessage,o=a&&/blob:/i.test((s.location||{}).protocol),h={},f=0,v={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;if(j(i)&&(t.dynamicTypingFunction=i,i={}),t.dynamicTyping=i,t.transform=!!j(t.transform)&&t.transform,t.worker&&v.WORKERS_SUPPORTED){var r=function(){if(!v.WORKERS_SUPPORTED)return!1;var e,t,t=(e=s.URL||s.webkitURL||null,t=n.toString(),v.BLOB_URL||(v.BLOB_URL=e.createObjectURL(new Blob(["(",t,")();"],{type:"text/javascript"})))),t=new s.Worker(t);return t.onmessage=_,t.id=f++,h[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=j(t.step),t.chunk=j(t.chunk),t.complete=j(t.complete),t.error=j(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}r=null;return v.NODE_STREAM_INPUT,"string"==typeof e?r=new(t.download?l:p)(t):!0===e.readable&&j(e.read)&&j(e.on)?r=new m(t):(s.File&&e instanceof File||e instanceof Object)&&(r=new c(t)),r.stream(e)},unparse:function(e,t){var i=!1,_=!0,g=",",y="\r\n",r='"',n=r+r,s=!1,a=null;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||v.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(g=t.delimiter),"boolean"!=typeof t.quotes&&!Array.isArray(t.quotes)||(i=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(s=t.skipEmptyLines),"string"==typeof t.newline&&(y=t.newline),"string"==typeof t.quoteChar&&(r=t.quoteChar),"boolean"==typeof t.header&&(_=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");a=t.columns}void 0!==t.escapeChar&&(n=t.escapeChar+r)}}();var o=new RegExp(M(r),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,s);if("object"==typeof e[0])return u(a||h(e[0]),e,s)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:h(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],s);throw new Error("Unable to serialize unrecognized input");function h(e){if("object"!=typeof e)return[];var t,i=[];for(t in e)i.push(t);return i}function u(e,t,i){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=g),r+=k(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=(n?e:t[o]).length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u="greedy"===i?""===t[o].join("").trim():1===t[o].length&&0===t[o][0].length),"greedy"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c])}u=""===d.join("").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=g);var m=n&&s?e[p]:p;r+=k(t[o][m],p)}o<t.length-1&&(!i||0<h&&!f)&&(r+=y)}}return r}function k(e,t){return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(e=e.toString().replace(o,n),"boolean"==typeof i&&i||Array.isArray(i)&&i[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(e,v.BAD_DELIMITERS)||-1<e.indexOf(g)||" "===e.charAt(0)||" "===e.charAt(e.length-1)?r+e+r:e)}}};function d(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=E(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(void 0!==(r=this._config.beforeFirstChunk(e))&&(e=r)),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var r=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){e=r.meta.cursor;this._finished||(this._partialLine=i.substring(e-this._baseIndex),this._baseIndex=e),r&&r.data&&(this._rowCount+=r.data.length);e=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)s.postMessage({results:r,workerId:v.WORKER_ID,finished:e});else if(j(this._config.chunk)&&!t){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!e||!j(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),e||r&&r.meta.paused||this._nextChunk(),r}this._halted=!0},this._sendError=function(e){j(this._config.error)?this._config.error(e):o&&this._config.error&&s.postMessage({workerId:v.WORKER_ID,error:e,finished:!1})}}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=v.RemoteChunkSize),d.call(this,e),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),a||(r.onload=k(this._chunkLoaded,this),r.onerror=k(this._chunkError,this)),r.open("GET",this._input,!a),this._config.downloadRequestHeaders){var e,t=this._config.downloadRequestHeaders;for(e in t)r.setRequestHeader(e,t[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,r.setRequestHeader("Range","bytes="+this._start+"-"+i));try{r.send()}catch(t){this._chunkError(t.message)}a&&0===r.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){var e;4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>(null===(e=r.getResponseHeader("Content-Range"))?-1:parseInt(e.substr(e.lastIndexOf("/")+1))),this.parseChunk(r.responseText)))},this._chunkError=function(e){e=r.statusText||e;this._sendError(new Error(e))}}function c(e){var i,r;(e=e||{}).chunkSize||(e.chunkSize=v.LocalChunkSize),d.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((i=new FileReader).onload=k(this._chunkLoaded,this),i.onerror=k(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e,t=this._input;this._config.chunkSize&&(e=Math.min(this._start+this._config.chunkSize,this._input.size),t=r.call(t,this._start,e));t=i.readAsText(t,this._config.encoding);n||this._chunkLoaded({target:{result:t}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(i.error)}}function p(e){var i;d.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?i.substr(0,e):i;return i=e?i.substr(e):"",this._finished=!i,this.parseChunk(t)}}}function m(e){d.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=k(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=k(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=k(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(g){var s,a,o,t,h=Math.pow(2,53),u=-h,f=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,d=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,i=this,r=0,l=0,c=!1,e=!1,p=[],m={data:[],errors:[],meta:{}};function y(e){return"greedy"===g.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(m&&o&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+v.DefaultDelimiter+"'"),o=!1),g.skipEmptyLines)for(var e=0;e<m.data.length;e++)y(m.data[e])&&m.data.splice(e--,1);return n()&&function(){if(m)if(Array.isArray(m.data[0])){for(var e=0;n()&&e<m.data.length;e++)m.data[e].forEach(t);m.data.splice(0,1)}else m.data.forEach(t);function t(e){j(g.transformHeader)&&(e=g.transformHeader(e)),p.push(e)}}(),function(){if(!m||!g.header&&!g.dynamicTyping&&!g.transform)return m;function e(e,t){for(var i,r,n=g.header?{}:[],s=0;s<e.length;s++){var a=s,o=e[s];g.header&&(a=s>=p.length?"__parsed_extra":p[s]),g.transform&&(o=g.transform(o,a)),r=o,i=i=a,g.dynamicTypingFunction&&void 0===g.dynamicTyping[i]&&(g.dynamicTyping[i]=g.dynamicTypingFunction(i)),o=!0===(g.dynamicTyping[i]||g.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(f.test(e)){e=parseFloat(e);if(u<e&&e<h)return 1}}(r)?parseFloat(r):d.test(r)?new Date(r):""===r?null:r):r,"__parsed_extra"===a?(n[a]=n[a]||[],n[a].push(o)):n[a]=o}return g.header&&(s>p.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+s,l+t):s<p.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+s,l+t)),n}var t=1;return!m.data[0]||Array.isArray(m.data[0])?(m.data=m.data.map(e),t=m.data.length):m.data=e(m.data,0),g.header&&m.meta&&(m.meta.fields=p),l+=t,m}()}function n(){return g.header&&0===p.length}function k(e,t,i,r){m.errors.push({type:e,code:t,message:i,row:r})}j(g.step)&&(t=g.step,g.step=function(e){m=e,n()?_():(_(),0!==m.data.length&&(r+=e.data.length,g.preview&&r>g.preview?a.abort():t(m,i)))}),this.parse=function(e,t,i){var r=g.quoteChar||'"';g.newline||(g.newline=function(e,t){e=e.substr(0,1048576);var t=new RegExp(M(t)+"([^]*?)"+M(t),"gm"),i=(e=e.replace(t,"")).split("\r"),e=e.split("\n"),e=1<e.length&&e[0].length<i[0].length;if(1===i.length||e)return"\n";for(var r=0,n=0;n<i.length;n++)"\n"===i[n][0]&&r++;return r>=i.length/2?"\r\n":"\r"}(e,r)),o=!1,g.delimiter?j(g.delimiter)&&(g.delimiter=g.delimiter(e),m.meta.delimiter=g.delimiter):((n=function(e,t,i,r,n){var s,a,o;n=n||[",","\t","|",";",v.RECORD_SEP,v.UNIT_SEP];for(var h=0;h<n.length;h++){for(var u,f=n[h],d=0,l=0,c=0,p=void 0,m=new b({comments:r,delimiter:f,newline:t,preview:10}).parse(e),_=0;_<m.data.length;_++)i&&y(m.data[_])?c++:(l+=u=m.data[_].length,void 0!==p?0<u&&(d+=Math.abs(u-p),p=u):p=u);0<m.data.length&&(l/=m.data.length-c),(void 0===a||d<=a)&&(void 0===o||o<l)&&1.99<l&&(a=d,s=f,o=l)}return{successful:!!(g.delimiter=s),bestDelimiter:s}}(e,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess)).successful?g.delimiter=n.bestDelimiter:(o=!0,g.delimiter=v.DefaultDelimiter),m.meta.delimiter=g.delimiter);var n=E(g);return g.preview&&g.header&&n.preview++,s=e,a=new b(n),m=a.parse(s,t,i),_(),c?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,a.abort(),s=s.substr(a.getCharIndex())},this.resume=function(){i.streamer._halted?(c=!1,i.streamer.parseChunk(s,!0)):setTimeout(this.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,a.abort(),m.meta.aborted=!0,j(g.complete)&&g.complete(m),s=""}}function M(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(e){var S,x=(e=e||{}).delimiter,O=e.newline,D=e.comments,I=e.step,T=e.preview,A=e.fastMode,L=S=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(L=e.escapeChar),("string"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=","),D===x)throw new Error("Comment character same as delimiter");!0===D?D="#":("string"!=typeof D||-1<v.BAD_DELIMITERS.indexOf(D))&&(D=!1),"\n"!==O&&"\r"!==O&&"\r\n"!==O&&(O="\n");var F=0,z=!1;this.parse=function(o,i,t){if("string"!=typeof o)throw new Error("Input must be a string");var r=o.length,e=x.length,n=O.length,s=D.length,a=j(I),h=[],u=[],f=[],d=F=0;if(!o)return C();if(A||!1!==A&&-1===o.indexOf(S)){for(var l=o.split(O),c=0;c<l.length;c++){if(f=l[c],F+=f.length,c!==l.length-1)F+=O.length;else if(t)return C();if(!D||f.substr(0,s)!==D){if(a){if(h=[],v(f.split(x)),R(),z)return C()}else v(f.split(x));if(T&&T<=c)return h=h.slice(0,T),C(!0)}}return C()}for(var p=o.indexOf(x,F),m=o.indexOf(O,F),_=new RegExp(M(L)+M(S),"g"),g=o.indexOf(S,F);;)if(o[F]!==S)if(D&&0===f.length&&o.substr(F,s)===D){if(-1===m)return C();F=m+n,m=o.indexOf(O,F),p=o.indexOf(x,F)}else{if(-1!==p&&(p<m||-1===m)){if(-1===g){f.push(o.substring(F,p)),F=p+e,p=o.indexOf(x,F);continue}var y=function e(t,i,r){var n={nextDelim:void 0,quoteSearch:void 0},s=o.indexOf(S,i+1);if(i<t&&t<s&&(s<r||-1===r)){var a=o.indexOf(x,s);if(-1===a)return n;s<a&&(s=o.indexOf(S,s+1)),n=e(a,s,r)}else n={nextDelim:t,quoteSearch:i};return n}(p,g,m);if(y&&void 0!==y.nextDelim){p=y.nextDelim,g=y.quoteSearch,f.push(o.substring(F,p)),F=p+e,p=o.indexOf(x,F);continue}}if(-1===m)break;if(f.push(o.substring(F,m)),w(m+n),a&&(R(),z))return C();if(T&&h.length>=T)return C(!0)}else for(g=F,F++;;){if(-1===(g=o.indexOf(S,g+1)))return t||u.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:h.length,index:F}),E();if(g===r-1)return E(o.substring(F,g).replace(_,S));if(S!==L||o[g+1]!==L){if(S===L||0===g||o[g-1]!==L){var k=b(-1===m?p:Math.min(p,m));if(o[g+1+k]===x){f.push(o.substring(F,g).replace(_,S)),o[F=g+1+k+e]!==S&&(g=o.indexOf(S,F)),p=o.indexOf(x,F),m=o.indexOf(O,F);break}k=b(m);if(o.substr(g+1+k,n)===O){if(f.push(o.substring(F,g).replace(_,S)),w(g+1+k+n),p=o.indexOf(x,F),g=o.indexOf(S,F),a&&(R(),z))return C();if(T&&h.length>=T)return C(!0);break}u.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:h.length,index:F}),g++}}else g++}return E();function v(e){h.push(e),d=F}function b(e){var t=0;return-1===e||(e=o.substring(g+1,e))&&""===e.trim()&&(t=e.length),t}function E(e){return t||(void 0===e&&(e=o.substr(F)),f.push(e),F=r,v(f),a&&R()),C()}function w(e){F=e,v(f),f=[],m=o.indexOf(O,F)}function C(e,t){return{data:t?h[0]:h,errors:u,meta:{delimiter:x,linebreak:O,aborted:z,truncated:!!e,cursor:d+(i||0)}}}function R(){I(C(void 0,!0)),h=[],u=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return F}}function _(e){var t=e.data,i=h[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,g(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(j(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else j(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&g(t.workerId,t.results)}function g(e,t){var i=h[e];j(i.userComplete)&&i.userComplete(t),i.terminate(),delete h[e]}function y(){throw new Error("Not implemented.")}function E(e){if("object"!=typeof e||null===e)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=E(e[t]);return i}function k(e,t){return function(){e.apply(t,arguments)}}function j(e){return"function"==typeof e}return v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK="\ufeff",v.BAD_DELIMITERS=["\r","\n",'"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!a&&!!s.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=",",v.Parser=b,v.ParserHandle=i,v.NetworkStreamer=l,v.FileStreamer=c,v.StringStreamer=p,v.ReadableStreamStreamer=m,s.jQuery&&((u=s.jQuery).fn.parse=function(a){var i=a.config||{},o=[];return this.each(function(e){if("INPUT"!==u(this).prop("tagName").toUpperCase()||"file"!==u(this).attr("type").toLowerCase()||!s.FileReader||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)o.push({file:this.files[t],inputElem:this,instanceConfig:u.extend({},i)})}),e(),this;function e(){if(0!==o.length){var e,t,i,r=o[0];if(j(a.before)){var n=a.before(r.file,r.inputElem);if("object"==typeof n){if("abort"===n.action)return e=r.file,t=r.inputElem,i=n.reason,j(a.error)&&a.error({name:"AbortError"},e,t,i),0;if("skip"===n.action)return h(),0;"object"==typeof n.config&&(r.instanceConfig=u.extend(r.instanceConfig,n.config))}else if("skip"===n)return h(),0}var s=r.instanceConfig.complete;r.instanceConfig.complete=function(e){j(s)&&s(e,r.file,r.inputElem),h()},v.parse(r.file,r.instanceConfig)}else j(a.complete)&&a.complete()}function h(){o.splice(0,1),e()}}),o&&(s.onmessage=function(e){e=e.data;void 0===v.WORKER_ID&&e&&(v.WORKER_ID=e.workerId),"string"==typeof e.input?s.postMessage({workerId:v.WORKER_ID,results:v.parse(e.input,e.config),finished:!0}):!(s.File&&e.input instanceof File||e.input instanceof Object)||(e=v.parse(e.input,e.config))&&s.postMessage({workerId:v.WORKER_ID,results:e,finished:!0})}),(l.prototype=Object.create(d.prototype)).constructor=l,(c.prototype=Object.create(d.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(m.prototype=Object.create(d.prototype)).constructor=m,v});
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||3<t[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(o){"use strict";o.fn.emulateTransitionEnd=function(t){var e=!1,i=this;o(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||o(i).trigger(o.support.transition.end)},t),this},o(function(){o.support.transition=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return{end:i[t]};return!1}(),o.support.transition&&(o.event.special.bsTransitionEnd={bindType:o.support.transition.end,delegateType:o.support.transition.end,handle:function(t){if(o(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(s){"use strict";function a(t){s(t).on("click",e,this.close)}var e='[data-dismiss="alert"]';a.VERSION="3.3.7",a.TRANSITION_DURATION=150,a.prototype.close=function(t){function e(){n.detach().trigger("closed.bs.alert").remove()}var i=s(this),o=i.attr("data-target");o||(o=(o=i.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,""));var n=s("#"===o?[]:o);t&&t.preventDefault(),(n=!n.length?i.closest(".alert"):n).trigger(t=s.Event("close.bs.alert")),t.isDefaultPrevented()||(n.removeClass("in"),s.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(a.TRANSITION_DURATION):e())};var t=s.fn.alert;s.fn.alert=function(i){return this.each(function(){var t=s(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new a(this)),"string"==typeof i&&e[i].call(t)})},s.fn.alert.Constructor=a,s.fn.alert.noConflict=function(){return s.fn.alert=t,this},s(document).on("click.bs.alert.data-api",e,a.prototype.close)}(jQuery),function(s){"use strict";function i(o){return this.each(function(){var t=s(this),e=t.data("bs.button"),i="object"==typeof o&&o;e||t.data("bs.button",e=new n(this,i)),"toggle"==o?e.toggle():o&&e.setState(o)})}var n=function(t,e){this.$element=s(t),this.options=s.extend({},n.DEFAULTS,e),this.isLoading=!1};n.VERSION="3.3.7",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var e="disabled",i=this.$element,o=i.is("input")?"val":"html",n=i.data();t+="Text",null==n.resetText&&i.data("resetText",i[o]()),setTimeout(s.proxy(function(){i[o]((null==n[t]?this.options:n)[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(e).attr(e,e).prop(e,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(e).removeAttr(e).prop(e,!1))},this),0)},n.prototype.toggle=function(){var t,e=!0,i=this.$element.closest('[data-toggle="buttons"]');i.length?("radio"==(t=this.$element.find("input")).prop("type")?(t.prop("checked")&&(e=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==t.prop("type")&&(t.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),t.prop("checked",this.$element.hasClass("active")),e&&t.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};var t=s.fn._button;s.fn._button=i,s.fn._button.Constructor=n,s.fn._button.noConflict=function(){return s.fn._button=t,this},s(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=s(t.target).closest(".btn");i.call(e,"toggle"),s(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),(e.is("input,button")?e:e.find("input:visible,button:visible").first()).trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){s(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(h){"use strict";function n(n){return this.each(function(){var t=h(this),e=t.data("bs.carousel"),i=h.extend({},d.DEFAULTS,t.data(),"object"==typeof n&&n),o="string"==typeof n?n:i.slide;e||t.data("bs.carousel",e=new d(this,i)),"number"==typeof n?e.to(n):o?e[o]():i.interval&&e.pause().cycle()})}function d(t,e){this.$element=h(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",h.proxy(this.keydown,this)),"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",h.proxy(this.pause,this)).on("mouseleave.bs.carousel",h.proxy(this.cycle,this))}d.VERSION="3.3.7",d.TRANSITION_DURATION=600,d.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},d.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},d.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(h.proxy(this.next,this),this.options.interval)),this},d.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},d.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;t=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(t)},d.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},d.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&h.support.transition&&(this.$element.trigger(h.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},d.prototype.next=function(){if(!this.sliding)return this.slide("next")},d.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},d.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),o=e||this.getItemForDirection(t,i),n=this.interval,s="next"==t?"left":"right",a=this;if(o.hasClass("active"))return this.sliding=!1;var r=o[0],e=h.Event("slide.bs.carousel",{relatedTarget:r,direction:s});if(this.$element.trigger(e),!e.isDefaultPrevented()){this.sliding=!0,n&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),(e=h(this.$indicators.children()[this.getItemIndex(o)]))&&e.addClass("active"));var l=h.Event("slid.bs.carousel",{relatedTarget:r,direction:s});return h.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(l)},0)}).emulateTransitionEnd(d.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(l)),n&&this.cycle(),this}};var t=h.fn.carousel;h.fn.carousel=n,h.fn.carousel.Constructor=d,h.fn.carousel.noConflict=function(){return h.fn.carousel=t,this};function e(t){var e,i=h(this),o=h(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));o.hasClass("carousel")&&(e=h.extend({},o.data(),i.data()),(i=i.attr("data-slide-to"))&&(e.interval=!1),n.call(o,e),i&&o.data("bs.carousel").to(i),t.preventDefault())}h(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),h(window).on("load",function(){h('[data-ride="carousel"]').each(function(){var t=h(this);n.call(t,t.data())})})}(jQuery),function(n){"use strict";function i(t){var e=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return n(e)}function s(o){return this.each(function(){var t=n(this),e=t.data("bs.collapse"),i=n.extend({},a.DEFAULTS,t.data(),"object"==typeof o&&o);!e&&i.toggle&&/show|hide/.test(o)&&(i.toggle=!1),e||t.data("bs.collapse",e=new a(this,i)),"string"==typeof o&&e[o]()})}var a=function(t,e){this.$element=n(t),this.options=n.extend({},a.DEFAULTS,e),this.$trigger=n('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};a.VERSION="3.3.7",a.TRANSITION_DURATION=350,a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&((o=t.data("bs.collapse"))&&o.transitioning))){var e=n.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){t&&t.length&&(s.call(t,"hide"),o||t.data("bs.collapse",null));var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!n.support.transition)return o.call(this);t=n.camelCase(["scroll",i].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[i](this.$element[0][t])}}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=n.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;t=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return n.support.transition?void this.$element[e](0).one("bsTransitionEnd",n.proxy(t,this)).emulateTransitionEnd(a.TRANSITION_DURATION):t.call(this)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},a.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,e){e=n(e);this.addAriaAndCollapsedClass(i(e),e)},this)).end()},a.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var t=n.fn.collapse;n.fn.collapse=s,n.fn.collapse.Constructor=a,n.fn.collapse.noConflict=function(){return n.fn.collapse=t,this},n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=n(this);e.attr("data-target")||t.preventDefault();t=i(e),e=t.data("bs.collapse")?"toggle":e.data();s.call(t,e)})}(jQuery),function(n){"use strict";function s(t){var e=t.attr("data-target"),e=(e=!e?(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""):e)&&n(e);return e&&e.length?e:t.parent()}function a(o){o&&3===o.which||(n(".dropdown-backdrop").remove(),n(r).each(function(){var t=n(this),e=s(t),i={relatedTarget:this};e.hasClass("open")&&(o&&"click"==o.type&&/input|textarea/i.test(o.target.tagName)&&n.contains(e[0],o.target)||(e.trigger(o=n.Event("hide.bs.dropdown",i)),o.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(n.Event("hidden.bs.dropdown",i)))))}))}function o(t){n(t).on("click.bs.dropdown",this.toggle)}var r='[data-toggle="dropdown"]';o.VERSION="3.3.7",o.prototype.toggle=function(t){var e=n(this);if(!e.is(".disabled, :disabled")){var i=s(e),o=i.hasClass("open");if(a(),!o){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",a);o={relatedTarget:this};if(i.trigger(t=n.Event("show.bs.dropdown",o)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(n.Event("shown.bs.dropdown",o))}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=n(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=s(e),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(r).trigger("focus"),e.trigger("click");e=i.find(".dropdown-menu li:not(.disabled):visible a");e.length&&(i=e.index(t.target),38==t.which&&0<i&&i--,40==t.which&&i<e.length-1&&i++,~i||(i=0),e.eq(i).trigger("focus"))}}};var t=n.fn.dropdown;n.fn.dropdown=function(i){return this.each(function(){var t=n(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new o(this)),"string"==typeof i&&e[i].call(t)})},n.fn.dropdown.Constructor=o,n.fn.dropdown.noConflict=function(){return n.fn.dropdown=t,this},n(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),function(s){"use strict";function n(o,n){return this.each(function(){var t=s(this),e=t.data("bs.modal"),i=s.extend({},a.DEFAULTS,t.data(),"object"==typeof o&&o);e||t.data("bs.modal",e=new a(this,i)),"string"==typeof o?e[o](n):i.show&&e.show(n)})}function a(t,e){this.options=e,this.$body=s(document.body),this.$element=s(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,s.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}a.VERSION="3.3.7",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},a.prototype.show=function(i){var o=this,t=s.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',s.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(t){s(t.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=s.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),t&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var e=s.Event("shown.bs.modal",{relatedTarget:i});t?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(a.TRANSITION_DURATION):o.$element.trigger("focus").trigger(e)}))},a.prototype.hide=function(t){t&&t.preventDefault(),t=s.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),s(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),s.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",s.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){s(document).off("focusin.bs.modal").on("focusin.bs.modal",s.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",s.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?s(window).on("resize.bs.modal",s.proxy(this.handleUpdate,this)):s(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(t){var e,i=this,o=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(e=s.support.transition&&o,this.$backdrop=s(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",s.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),t&&(e?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):t())):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e=function(){i.removeBackdrop(),t&&t()},s.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):e()):t&&t()},a.prototype.handleUpdate=function(){this.adjustDialog()},a.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){var t,e=window.innerWidth;e||(e=(t=document.documentElement.getBoundingClientRect()).right-Math.abs(t.left)),this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},a.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=s.fn.modal;s.fn.modal=n,s.fn.modal.Constructor=a,s.fn.modal.noConflict=function(){return s.fn.modal=t,this},s(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=s(this),i=e.attr("href"),o=s(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),i=o.data("bs.modal")?"toggle":s.extend({remote:!/#/.test(i)&&i},o.data(),e.data());e.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),n.call(o,i,this)})}(jQuery),function(l){"use strict";function h(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)}h.VERSION="3.3.7",h.TRANSITION_DURATION=150,h.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},h.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=l(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&l(l.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),n=o.length;n--;){var s,a=o[n];"click"==a?this.$element.on("click."+this.type,this.options.selector,l.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focusin",a="hover"==a?"mouseleave":"focusout",this.$element.on(s+"."+this.type,this.options.selector,l.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,l.proxy(this.leave,this)))}this.options.selector?this._options=l.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},h.prototype.getDefaults=function(){return h.DEFAULTS},h.prototype.getOptions=function(t){return(t=l.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},h.prototype.getDelegateOptions=function(){var i={},o=this.getDefaults();return this._options&&l.each(this._options,function(t,e){o[t]!=e&&(i[t]=e)}),i},h.prototype.enter=function(t){var e=t instanceof this.constructor?t:l(t.currentTarget).data("bs."+this.type);return e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),l(t.currentTarget).data("bs."+this.type,e)),t instanceof l.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState?void(e.hoverState="in"):(clearTimeout(e.timeout),e.hoverState="in",e.options.delay&&e.options.delay.show?void(e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)):e.show())},h.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},h.prototype.leave=function(t){var e=t instanceof this.constructor?t:l(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),l(t.currentTarget).data("bs."+this.type,e)),t instanceof l.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue())return clearTimeout(e.timeout),e.hoverState="out",e.options.delay&&e.options.delay.hide?void(e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)):e.hide()},h.prototype.show=function(){var e,t,i,o,n,s,a,r=l.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(r),i=l.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),!r.isDefaultPrevented()&&i&&(t=(e=this).tip(),s=this.getUID(this.type),this.setContent(),t.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&t.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,(n=(o=/\s?auto?\s?/i).test(a))&&(a=a.replace(o,"")||"top"),t.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type),r=this.getPosition(),i=t[0].offsetWidth,s=t[0].offsetHeight,n&&(o=a,n=this.getPosition(this.$viewport),a="bottom"==a&&r.bottom+s>n.bottom?"top":"top"==a&&r.top-s<n.top?"bottom":"right"==a&&r.right+i>n.width?"left":"left"==a&&r.left-i<n.left?"right":a,t.removeClass(o).addClass(a)),s=this.getCalculatedOffset(a,r,i,s),this.applyPlacement(s,a),a=function(){var t=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==t&&e.leave(e)},l.support.transition&&this.$tip.hasClass("fade")?t.one("bsTransitionEnd",a).emulateTransitionEnd(h.TRANSITION_DURATION):a()))},h.prototype.applyPlacement=function(t,e){var i=this.tip(),o=i[0].offsetWidth,n=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,l.offset.setOffset(i[0],l.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in");var r=i[0].offsetWidth,s=i[0].offsetHeight;"top"==e&&s!=n&&(t.top=t.top+n-s);a=this.getViewportAdjustedDelta(e,t,r,s);a.left?t.left+=a.left:t.top+=a.top;e=/top|bottom/.test(e),n=e?2*a.left-o+r:2*a.top-n+s,s=e?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(n,i[0][s],e)},h.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},h.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},h.prototype.hide=function(t){function e(){"in"!=i.hoverState&&o.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=l(this.$tip),n=l.Event("hide.bs."+this.type);if(this.$element.trigger(n),!n.isDefaultPrevented())return o.removeClass("in"),l.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",e).emulateTransitionEnd(h.TRANSITION_DURATION):e(),this.hoverState=null,this},h.prototype.fixTitle=function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("data-original-title")||t.attr("data-original-title",t.attr("title")||"").attr("title","")},h.prototype.hasContent=function(){return this.getTitle()},h.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],i="BODY"==e.tagName,o=e.getBoundingClientRect();null==o.width&&(o=l.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));e=window.SVGElement&&e instanceof window.SVGElement,e=i?{top:0,left:0}:e?null:t.offset(),t={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},i=i?{width:l(window).width(),height:l(window).height()}:null;return l.extend({},o,t,i,e)},h.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},h.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s,a=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);return/right|left/.test(t)?(t=e.top-a-r.scroll,s=e.top+a-r.scroll+o,t<r.top?n.top=r.top-t:s>r.top+r.height&&(n.top=r.top+r.height-s)):(s=e.left-a,i=e.left+a+i,s<r.left?n.left=r.left-s:i>r.right&&(n.left=r.left+r.width-i)),n},h.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},h.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},h.prototype.tip=function(){if(!this.$tip&&(this.$tip=l(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},h.prototype.enable=function(){this.enabled=!0},h.prototype.disable=function(){this.enabled=!1},h.prototype.toggleEnabled=function(){this.enabled=!this.enabled},h.prototype.toggle=function(t){var e=this;t&&((e=l(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),l(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},h.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var t=l.fn.tooltip;l.fn.tooltip=function(o){return this.each(function(){var t=l(this),e=t.data("bs.tooltip"),i="object"==typeof o&&o;!e&&/destroy|hide/.test(o)||(e||t.data("bs.tooltip",e=new h(this,i)),"string"==typeof o&&e[o]())})},l.fn.tooltip.Constructor=h,l.fn.tooltip.noConflict=function(){return l.fn.tooltip=t,this}}(jQuery),function(n){"use strict";function s(t,e){this.init("popover",t,e)}if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");s.VERSION="3.3.7",s.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((s.prototype=n.extend({},n.fn.tooltip.Constructor.prototype)).constructor=s).prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},s.prototype.hasContent=function(){return this.getTitle()||this.getContent()},s.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=n.fn.popover;n.fn.popover=function(o){return this.each(function(){var t=n(this),e=t.data("bs.popover"),i="object"==typeof o&&o;!e&&/destroy|hide/.test(o)||(e||t.data("bs.popover",e=new s(this,i)),"string"==typeof o&&e[o]())})},n.fn.popover.Constructor=s,n.fn.popover.noConflict=function(){return n.fn.popover=t,this}}(jQuery),function(n){"use strict";function s(t,e){this.$body=n(document.body),this.$scrollElement=n(n(t).is(document.body)?window:t),this.options=n.extend({},s.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this)),this.refresh(),this.process()}function e(o){return this.each(function(){var t=n(this),e=t.data("bs.scrollspy"),i="object"==typeof o&&o;e||t.data("bs.scrollspy",e=new s(this,i)),"string"==typeof o&&e[o]()})}s.VERSION="3.3.7",s.DEFAULTS={offset:10},s.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},s.prototype.refresh=function(){var t=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),n.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=n(this),e=t.data("target")||t.attr("href"),t=/^#./.test(e)&&n(e);return t&&t.length&&t.is(":visible")?[[t[i]().top+o,e]]:null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},s.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),o<=e)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},s.prototype.activate=function(t){this.activeTarget=t,this.clear();t=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',t=n(t).parents("li").addClass("active");(t=t.parent(".dropdown-menu").length?t.closest("li.dropdown").addClass("active"):t).trigger("activate.bs.scrollspy")},s.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=n.fn.scrollspy;n.fn.scrollspy=e,n.fn.scrollspy.Constructor=s,n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=t,this},n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);e.call(t,t.data())})})}(jQuery),function(a){"use strict";function e(i){return this.each(function(){var t=a(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new r(this)),"string"==typeof i&&e[i]()})}function r(t){this.element=a(t)}r.VERSION="3.3.7",r.TRANSITION_DURATION=150,r.prototype.show=function(){var t,e,i,o=this.element,n=o.closest("ul:not(.dropdown-menu)"),s=o.data("target");s||(s=(s=o.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(t=n.find(".active:last a"),e=a.Event("hide.bs.tab",{relatedTarget:o[0]}),i=a.Event("show.bs.tab",{relatedTarget:t[0]}),t.trigger(e),o.trigger(i),i.isDefaultPrevented()||e.isDefaultPrevented()||(s=a(s),this.activate(o.closest("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"hidden.bs.tab",relatedTarget:o[0]}),o.trigger({type:"shown.bs.tab",relatedTarget:t[0]})})))},r.prototype.activate=function(t,e,i){function o(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var n=e.find("> .active"),s=i&&a.support.transition&&(n.length&&n.hasClass("fade")||!!e.find("> .fade").length);n.length&&s?n.one("bsTransitionEnd",o).emulateTransitionEnd(r.TRANSITION_DURATION):o(),n.removeClass("in")};var t=a.fn.tab;a.fn.tab=e,a.fn.tab.Constructor=r,a.fn.tab.noConflict=function(){return a.fn.tab=t,this};function i(t){t.preventDefault(),e.call(a(this),"show")}a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(a){"use strict";function i(o){return this.each(function(){var t=a(this),e=t.data("bs.affix"),i="object"==typeof o&&o;e||t.data("bs.affix",e=new r(this,i)),"string"==typeof o&&e[o]()})}var r=function(t,e){this.options=a.extend({},r.DEFAULTS,e),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};r.VERSION="3.3.7",r.RESET="affix affix-top affix-bottom",r.DEFAULTS={offset:0,target:window},r.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,s=r?n:s.top;return null!=i&&n<=i?"top":null!=o&&t-o<=s+(r?a:e)&&"bottom"},r.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(r.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},r.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},r.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,i=e.top,o=e.bottom,n=Math.max(a(document).height(),a(document.body).height());"object"!=typeof e&&(o=i=e),"function"==typeof i&&(i=e.top(this.$element)),"function"==typeof o&&(o=e.bottom(this.$element));var s=this.getState(n,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");e="affix"+(s?"-"+s:""),i=a.Event(e+".bs.affix");if(this.$element.trigger(i),i.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(r.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:n-t-o})}};var t=a.fn.affix;a.fn.affix=i,a.fn.affix.Constructor=r,a.fn.affix.noConflict=function(){return a.fn.affix=t,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var t=a(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),i.call(t,e)})})}(jQuery);
!function(n){"use strict";function i(t,e){this.$element=n(t),this.options=n.extend({},this.defaults(),e),this.render()}i.VERSION="2.2.0",i.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null},i.prototype.defaults=function(){return{on:this.$element.attr("data-on")||i.DEFAULTS.on,off:this.$element.attr("data-off")||i.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||i.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||i.DEFAULTS.offstyle,size:this.$element.attr("data-size")||i.DEFAULTS.size,style:this.$element.attr("data-style")||i.DEFAULTS.style,width:this.$element.attr("data-width")||i.DEFAULTS.width,height:this.$element.attr("data-height")||i.DEFAULTS.height}},i.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var t="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",e=n('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+t+" active"),o=n('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+t),s=n('<span class="toggle-handle btn btn-default">').addClass(t),i=n('<div class="toggle-group">').append(e,o,s),t=n('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(t).addClass(this.options.style);this.$element.wrap(t),n.extend(this,{$toggle:this.$element.parent(),$toggleOn:e,$toggleOff:o,$toggleGroup:i}),this.$toggle.append(i);i=this.options.width||Math.max(e.outerWidth(),o.outerWidth())+s.outerWidth()/2,s=this.options.height||Math.max(e.outerHeight(),o.outerHeight());e.addClass("toggle-on"),o.addClass("toggle-off"),this.$toggle.css({width:i,height:s}),this.options.height&&(e.css("line-height",e.height()+"px"),o.css("line-height",o.height()+"px")),this.update(!0),this.trigger(!0)},i.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},i.prototype.on=function(t){return!this.$element.prop("disabled")&&(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void(t||this.trigger()))},i.prototype.off=function(t){return!this.$element.prop("disabled")&&(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void(t||this.trigger()))},i.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},i.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},i.prototype.update=function(t){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on(t):this.off(t)},i.prototype.trigger=function(t){this.$element.off("change.bs.toggle"),t||this.$element.change(),this.$element.on("change.bs.toggle",n.proxy(function(){this.update()},this))},i.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var t=n.fn.bootstrapToggle;n.fn.bootstrapToggle=function(s){return this.each(function(){var t=n(this),e=t.data("bs.toggle"),o="object"==typeof s&&s;e||t.data("bs.toggle",e=new i(this,o)),"string"==typeof s&&e[s]&&e[s]()})},n.fn.bootstrapToggle.Constructor=i,n.fn.toggle.noConflict=function(){return n.fn.bootstrapToggle=t,this},n(function(){n("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()}),n(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(t){n(this).find("input[type=checkbox]").bootstrapToggle("toggle"),t.preventDefault()})}(jQuery);
!function(t){"use strict";"object"==typeof exports?module.exports=t(window.jQuery):"function"==typeof define&&define.amd?define(["jquery"],t):window.jQuery&&!window.jQuery.fn.colorpicker&&t(window.jQuery)}(function(a){"use strict";function i(t,e){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,e&&a.extend(this.colors,e),t&&(void 0!==t.toLowerCase?(t+="",this.setColor(t)):void 0!==t.h&&(this.value=t))}function s(t,e){var o;this.element=a(t).addClass("colorpicker-element"),this.options=a.extend(!0,{},r,this.element.data(),e),this.component=this.options.component,this.component=!1!==this.component&&this.element.find(this.component),this.component&&0===this.component.length&&(this.component=!1),this.container=!0===this.options.container?this.element:this.options.container,this.container=!1!==this.container&&a(this.container),this.input=this.element.is("input")?this.element:!!this.options.input&&this.element.find(this.options.input),this.input&&0===this.input.length&&(this.input=!1),this.color=new i(!1!==this.options.color?this.options.color:this.getValue(),this.options.colorSelectors),this.format=!1!==this.options.format?this.options.format:this.color.origFormat,!1!==this.options.color&&(this.updateInput(this.color),this.updateData(this.color)),this.picker=a(this.options.template),this.options.customClass&&this.picker.addClass(this.options.customClass),this.options.inline?this.picker.addClass("colorpicker-inline colorpicker-visible"):this.picker.addClass("colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),"rgba"!==this.format&&"hsla"!==this.format&&!1!==this.options.format||this.picker.addClass("colorpicker-with-alpha"),"right"===this.options.align&&this.picker.addClass("colorpicker-right"),!0===this.options.inline&&this.picker.addClass("colorpicker-no-arrow"),this.options.colorSelectors&&(o=this,a.each(this.options.colorSelectors,function(t,e){t=a("<i />").css("background-color",e).data("class",t);t.click(function(){o.setValue(a(this).css("background-color"))}),o.picker.find(".colorpicker-selectors").append(t)}),this.picker.find(".colorpicker-selectors").show()),this.picker.on("mousedown.colorpicker touchstart.colorpicker",a.proxy(this.mousedown,this)),this.picker.appendTo(this.container||a("body")),!1!==this.input&&(this.input.on({"keyup.colorpicker":a.proxy(this.keyup,this)}),this.input.on({"change.colorpicker":a.proxy(this.change,this)}),!1===this.component&&this.element.on({"focus.colorpicker":a.proxy(this.show,this)}),!1===this.options.inline&&this.element.on({"focusout.colorpicker":a.proxy(this.hide,this)})),!1!==this.component&&this.component.on({"click.colorpicker":a.proxy(this.show,this)}),!1===this.input&&!1===this.component&&this.element.on({"click.colorpicker":a.proxy(this.show,this)}),!1!==this.input&&!1!==this.component&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":a.proxy(this.show,this),"focus.colorpicker":a.proxy(this.show,this)}),this.update(),a(a.proxy(function(){this.element.trigger("create")},this))}var r={horizontal:!(i.prototype={constructor:i,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"},_sanitizeNumber:function(t){return"number"==typeof t?t:isNaN(t)||null===t||""===t||void 0===t?1:""===t?0:void 0!==t.toLowerCase?(t.match(/^\./)&&(t="0"+t),Math.ceil(100*parseFloat(t))/100):1},isTransparent:function(t){return!!t&&("transparent"===(t=t.toLowerCase().trim())||t.match(/#?00000000/)||t.match(/(rgba|hsla)\(0,0,0,0?\.?0\)/))},rgbaIsTransparent:function(t){return 0===t.r&&0===t.g&&0===t.b&&0===t.a},setColor:function(t){(t=t.toLowerCase().trim())&&(this.isTransparent(t)?this.value={h:0,s:0,b:0,a:0}:this.value=this.stringToHSB(t)||{h:0,s:0,b:0,a:1})},stringToHSB:function(i){var r;i=i.toLowerCase(),void 0!==this.colors[i]&&(i=this.colors[i],r="alias");var s=this,n=!1;return a.each(this.stringParsers,function(t,e){var o=e.re.exec(i),o=o&&e.parse.apply(s,[o]),e=r||e.format||"rgba";return!o||(n=e.match(/hsla?/)?s.RGBtoHSB.apply(s,s.HSLtoRGB.apply(s,o)):s.RGBtoHSB.apply(s,o),s.origFormat=e,!1)}),n},setHue:function(t){this.value.h=1-t},setSaturation:function(t){this.value.s=t},setBrightness:function(t){this.value.b=1-t},setAlpha:function(t){this.value.a=Math.round(parseInt(100*(1-t),10)/100*100)/100},toRGB:function(t,e,o,i){var r,s,n;return t||(t=this.value.h,e=this.value.s,o=this.value.b),t=(t*=360)%360/60,o=r=s=o-(n=o*e),o+=[n,e=n*(1-Math.abs(t%2-1)),0,0,e,n][t=~~t],r+=[e,n,n,e,0,0][t],s+=[0,0,e,n,n,e][t],{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*s),a:i||this.value.a}},toHex:function(t,e,o,i){i=this.toRGB(t,e,o,i);return this.rgbaIsTransparent(i)?"transparent":"#"+(1<<24|parseInt(i.r)<<16|parseInt(i.g)<<8|parseInt(i.b)).toString(16).substr(1)},toHSL:function(t,e,o,i){t=t||this.value.h,e=e||this.value.s,o=o||this.value.b,i=i||this.value.a;var r=t,t=(2-e)*o,o=e*o;return o/=0<t&&t<=1?t:2-t,t/=2,1<o&&(o=1),{h:isNaN(r)?0:r,s:isNaN(o)?0:o,l:isNaN(t)?0:t,a:isNaN(i)?0:i}},toAlias:function(t,e,o,i){var r,s=this.toHex(t,e,o,i);for(r in this.colors)if(this.colors[r]===s)return r;return!1},RGBtoHSB:function(t,e,o,i){var r,s;return t/=255,e/=255,o/=255,e=((e=0==(s=(r=Math.max(t,e,o))-Math.min(t,e,o))?null:r===t?(e-o)/s:r===e?(o-t)/s+2:(t-e)/s+4)+360)%6*60/360,s=0==s?0:s/r,{h:this._sanitizeNumber(e),s:s,b:r,a:this._sanitizeNumber(i)}},HueToRGB:function(t,e,o){return o<0?o+=1:1<o&&--o,6*o<1?t+(e-t)*o*6:2*o<1?e:3*o<2?t+(e-t)*(2/3-o)*6:t},HSLtoRGB:function(t,e,o,i){e<0&&(e=0);var r,s=2*o-(r=o<=.5?o*(1+e):o+e-o*e),o=t+1/3,e=t,t=t-1/3;return[Math.round(255*this.HueToRGB(s,r,o)),Math.round(255*this.HueToRGB(s,r,e)),Math.round(255*this.HueToRGB(s,r,t)),this._sanitizeNumber(i)]},toString:function(t){var e=!1;switch(t=t||"rgba"){case"rgb":return e=this.toRGB(),this.rgbaIsTransparent(e)?"transparent":"rgb("+e.r+","+e.g+","+e.b+")";case"rgba":return"rgba("+(e=this.toRGB()).r+","+e.g+","+e.b+","+e.a+")";case"hsl":return e=this.toHSL(),"hsl("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%)";case"hsla":return e=this.toHSL(),"hsla("+Math.round(360*e.h)+","+Math.round(100*e.s)+"%,"+Math.round(100*e.l)+"%,"+e.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return e}},stringParsers:[{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(t){return[t[1],t[2],t[3],1]}},{re:/rgb\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba\(\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/hsl\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/hsla\(\s*(\d*(?:\.\d+)?)\s*,\s*(\d*(?:\.\d+)?)\%\s*,\s*(\d*(?:\.\d+)?)\%\s*(?:,\s*(\d*(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(t){return[t[1]/360,t[2]/100,t[3]/100,t[4]]}},{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}}],colorNameToHex:function(t){return void 0!==this.colors[t.toLowerCase()]&&this.colors[t.toLowerCase()]}}),inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div><div class="colorpicker-selectors"></div></div>',align:"right",customClass:null,colorSelectors:null};s.Color=i,s.prototype={constructor:s,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker","color").off(".colorpicker"),!1!==this.input&&this.input.off(".colorpicker"),!1!==this.component&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(!1!==this.options.inline||this.options.container)return!1;var t=this.container&&this.container[0]!==document.body?"position":"offset",e=this.component||this.element,t=e[t]();"right"===this.options.align&&(t.left-=this.picker.outerWidth()-e.outerWidth()),this.picker.css({top:t.top+e.outerHeight(),left:t.left})},show:function(t){return!this.isDisabled()&&(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),a(window).on("resize.colorpicker",a.proxy(this.reposition,this)),!t||this.hasInput()&&"color"!==this.input.attr("type")||t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!this.component&&this.input||!1!==this.options.inline||a(window.document).on({"mousedown.colorpicker":a.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(t){a(t.target).closest(".colorpicker").length||(this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),a(window).off("resize.colorpicker",this.reposition),a(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color}))},updateData:function(t){return t=t||this.color.toString(this.format),this.element.data("color",t),t},updateInput:function(t){var e;return t=t||this.color.toString(this.format),!1!==this.input&&(this.options.colorSelectors&&(e=new i(t,this.options.colorSelectors).toAlias(),void 0!==this.options.colorSelectors[e]&&(t=e)),this.input.prop("value",t)),t},updatePicker:function(t){void 0!==t&&(this.color=new i(t,this.options.colorSelectors));var e=!1===this.options.horizontal?this.options.sliders:this.options.slidersHorz,o=this.picker.find("i");if(0!==o.length)return!1===this.options.horizontal?(e=this.options.sliders,o.eq(1).css("top",e.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",e.alpha.maxTop*(1-this.color.value.a))):(e=this.options.slidersHorz,o.eq(1).css("left",e.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",e.alpha.maxLeft*(1-this.color.value.a))),o.eq(0).css({top:e.saturation.maxTop-this.color.value.b*e.saturation.maxTop,left:this.color.value.s*e.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),t},updateComponent:function(t){var e;return t=t||this.color.toString(this.format),!1!==this.component&&(0<(e=this.component.find("i").eq(0)).length?e:this.component).css({backgroundColor:t}),t},update:function(t){var e;return!1===this.getValue(!1)&&!0!==t||(e=this.updateComponent(),this.updateInput(e),this.updateData(e),this.updatePicker()),e},setValue:function(t){this.color=new i(t,this.options.colorSelectors),this.update(!0),this.element.trigger({type:"changeColor",color:this.color,value:t})},getValue:function(t){var e;return t=void 0===t?"#000000":t,e=void 0===(e=this.hasInput()?this.input.val():this.element.data("color"))||""===e||null===e?t:e},hasInput:function(){return!1!==this.input},isDisabled:function(){return!!this.hasInput()&&!0===this.input.prop("disabled")},disable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!0),this.element.trigger({type:"disable",color:this.color,value:this.getValue()}),!0)},enable:function(){return!!this.hasInput()&&(this.input.prop("disabled",!1),this.element.trigger({type:"enable",color:this.color,value:this.getValue()}),!0)},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(t){if(!a(t.target).is("input")){a(t.target).closest(".colorpicker").find("input").blur(),!t.pageX&&!t.pageY&&t.originalEvent&&t.originalEvent.touches&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=a(t.target).closest("div"),o=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!e.is(".colorpicker")){if(e.is(".colorpicker-saturation"))this.currentSlider=a.extend({},o.saturation);else if(e.is(".colorpicker-hue"))this.currentSlider=a.extend({},o.hue);else{if(!e.is(".colorpicker-alpha"))return!1;this.currentSlider=a.extend({},o.alpha)}o=e.offset();this.currentSlider.guide=e.find("i")[0].style,this.currentSlider.left=t.pageX-o.left,this.currentSlider.top=t.pageY-o.top,this.mousePointer={left:t.pageX,top:t.pageY},a(document).on({"mousemove.colorpicker":a.proxy(this.mousemove,this),"touchmove.colorpicker":a.proxy(this.mousemove,this),"mouseup.colorpicker":a.proxy(this.mouseup,this),"touchend.colorpicker":a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1}},mousemove:function(t){!t.pageX&&!t.pageY&&t.originalEvent&&t.originalEvent.touches&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((t.pageX||this.mousePointer.left)-this.mousePointer.left))),t=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((t.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=e+"px",this.currentSlider.guide.top=t+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,e/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,t/this.currentSlider.maxTop),"setAlpha"===this.currentSlider.callTop&&!1===this.options.format&&(1!==this.color.value.a?(this.format="rgba",this.color.origFormat="rgba"):(this.format="hex",this.color.origFormat="hex")),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(t){return t.stopPropagation(),t.preventDefault(),a(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},change:function(t){this.keyup(t)},keyup:function(t){38===t.keyCode?(this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0)):40===t.keyCode?(0<this.color.value.a&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0)):(this.color=new i(this.input.val(),this.options.colorSelectors),this.color.origFormat&&!1===this.options.format&&(this.format=this.color.origFormat),!1!==this.getValue(!1)&&(this.updateData(),this.updateComponent(),this.updatePicker())),this.element.trigger({type:"changeColor",color:this.color,value:this.input.val()})}},a.colorpicker=s,a.fn.colorpicker=function(o){var i=Array.prototype.slice.call(arguments,1),t=1===this.length,r=null,e=this.each(function(){var t=a(this),e=t.data("colorpicker");e||(e=new s(this,"object"==typeof o?o:{}),t.data("colorpicker",e)),r="string"==typeof o?a.isFunction(e[o])?e[o].apply(e,i):(i.length&&(e[o]=i[0]),e[o]):t});return t?r:e},a.fn.colorpicker.constructor=s});
!function(){"use strict";var s,o,i,n=function(t,i){return function(){return t.apply(i,arguments)}};function t(){}function e(t){null==t&&(t={}),this.container=n(this.container,this),this.content=n(this.content,this),this.html=n(this.html,this),this.$growl=n(this.$growl,this),this.$growls=n(this.$growls,this),this.animate=n(this.animate,this),this.remove=n(this.remove,this),this.dismiss=n(this.dismiss,this),this.present=n(this.present,this),this.cycle=n(this.cycle,this),this.close=n(this.close,this),this.click=n(this.click,this),this.unbind=n(this.unbind,this),this.bind=n(this.bind,this),this.render=n(this.render,this),this.settings=s.extend({},e.settings,t),this.$growls().attr("class",this.settings.location),this.render()}s=jQuery,t.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"},t.transition=function(t){var i,s,n=t[0],e=this.transitions;for(s in e)if(i=e[s],null!=n.style[s])return i},o=t,e.settings={namespace:"growl",duration:3200,close:"&#215;",location:"default",style:"default",size:"medium"},e.growl=function(t){return null==t&&(t={}),this.initialize(),new e(t)},e.initialize=function(){return s("body:not(:has(#growls))").append('<div id="growls" />')},e.prototype.render=function(){var t=this.$growl();this.$growls().append(t),this.settings.fixed?this.present():this.cycle()},e.prototype.bind=function(t){return(t=null==t?this.$growl():t).on("click",this.click),t.on("contextmenu",this.close).find("."+this.settings.namespace+"-close").on("click",this.close)},e.prototype.unbind=function(t){return(t=null==t?this.$growl():t).off("click",this.click),t.off("contextmenu",this.close).find("."+this.settings.namespace+"-close").off("click",this.close)},e.prototype.click=function(t){if(null!=this.settings.url)return t.preventDefault(),t.stopPropagation(),window.open(this.settings.url)},e.prototype.close=function(t){return t.preventDefault(),t.stopPropagation(),this.$growl().stop().queue(this.dismiss).queue(this.remove)},e.prototype.cycle=function(){return this.$growl().queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)},e.prototype.present=function(t){var i=this.$growl();return this.bind(i),this.animate(i,this.settings.namespace+"-incoming","out",t)},e.prototype.dismiss=function(t){var i=this.$growl();return this.unbind(i),this.animate(i,this.settings.namespace+"-outgoing","in",t)},e.prototype.remove=function(t){return this.$growl().remove(),t()},e.prototype.animate=function(t,i,s,n){var e;null==s&&(s="in"),e=o.transition(t),t["in"===s?"removeClass":"addClass"](i),t.offset().position,t["in"===s?"addClass":"removeClass"](i),null!=n&&(null!=e?t.one(e,n):n())},e.prototype.$growls=function(){return null!=this.$_growls?this.$_growls:this.$_growls=s("#growls")},e.prototype.$growl=function(){return null!=this.$_growl?this.$_growl:this.$_growl=s(this.html())},e.prototype.html=function(){return this.container(this.content())},e.prototype.content=function(){return"<div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n<div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n<div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>"},e.prototype.container=function(t){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  "+t+"\n</div>"},i=e,this.Growl=i,s.growl=function(t){return null==t&&(t={}),i.growl(t)},s.growl.error=function(t){var i;return null==t&&(t={}),i={title:"Error!",style:"error"},s.growl(s.extend(i,t))},s.growl.notice=function(t){var i;return null==t&&(t={}),i={title:"Notice!",style:"notice"},s.growl(s.extend(i,t))},s.growl.warning=function(t){var i;return null==t&&(t={}),i={title:"Warning!",style:"warning"},s.growl(s.extend(i,t))}}.call(this);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e,n,i,o,d,s,p,h,g,f,r,a,m,v,y,l,o=((e=t&&t.fn&&t.fn.mselect2&&t.fn.mselect2.amd?t.fn.mselect2.amd:e)&&e.requirejs||(e?i=e:e={},p={},h={},g={},f={},r=Object.prototype.hasOwnProperty,a=[].slice,m=/\.js$/,v=function(e,t){var n,i,o=u(e),s=o[0];return e=o[1],s&&(n=b(s=c(s,t))),s?e=n&&n.normalize?n.normalize(e,(i=t,function(e){return c(e,i)})):c(e,t):(s=(o=u(e=c(e,t)))[0],e=o[1],s&&(n=b(s))),{f:s?s+"!"+e:e,n:e,pr:s,p:n}},y={require:function(e){return w(e)},exports:function(e){var t=p[e];return void 0!==t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:(t=e,function(){return g&&g.config&&g.config[t]||{}})};var t}},l=function(e,t,n,i){var o,s,r,a,l,c=[],u=typeof n;if(i=i||e,"undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,a=0;a<t.length;a+=1)if("require"===(s=(r=v(t[a],i)).f))c[a]=y.require(e);else if("exports"===s)c[a]=y.exports(e),l=!0;else if("module"===s)o=c[a]=y.module(e);else if(_(p,s)||_(h,s)||_(f,s))c[a]=b(s);else{if(!r.p)throw new Error(e+" missing "+s);r.p.load(r.n,w(i,!0),function(t){return function(e){p[t]=e}}(s),{}),c[a]=p[s]}u=n?n.apply(p[e],c):void 0,e&&(o&&o.exports!==d&&o.exports!==p[e]?p[e]=o.exports:u===d&&l||(p[e]=u))}else e&&(p[e]=n)},n=i=s=function(e,t,n,i,o){if("string"==typeof e)return y[e]?y[e](t):b(v(e,t).f);if(!e.splice){if((g=e).deps&&s(g.deps,g.callback),!t)return;t.splice?(e=t,t=n,n=null):e=d}return t=t||function(){},"function"==typeof n&&(n=i,i=o),i?l(d,e,t,n):setTimeout(function(){l(d,e,t,n)},4),s},s.config=function(e){return s(e)},n._defined=p,(o=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),_(p,e)||_(h,e)||(h[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=n,e.require=i,e.define=o),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(s){function c(e){var t,n=e.prototype,i=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&i.push(t);return i}var e={Extend:function(e,t){function n(){this.constructor=e}var i,o={}.hasOwnProperty;for(i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}};e.Decorate=function(i,o){function s(){var e=Array.prototype.unshift,t=o.prototype.constructor.length,n=i.prototype.constructor;0<t&&(e.call(arguments,i.prototype.constructor),n=o.prototype.constructor),n.apply(this,arguments)}var e=c(o),t=c(i);o.displayName=i.displayName,s.prototype=new function(){this.constructor=s};for(var n=0;n<t.length;n++){var r=t[n];s.prototype[r]=i.prototype[r]}for(var a=0;a<e.length;a++){var l=e[a];s.prototype[l]=function(e){var t=function(){};e in s.prototype&&(t=s.prototype[e]);var n=o.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}(l)}return s};function t(){this.listeners={}}return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var o=0;o<n.length;o++){var s=n[o];(s=s.substring(0,1).toLowerCase()+s.substring(1))in i||(i[s]={}),o==n.length-1&&(i[s]=e[t]),i=i[s]}delete e[t]}}return e},e.hasScroll=function(e,t){var n=s(t),i=t.style.overflowX,o=t.style.overflowY;return(i!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===i||"scroll"===o||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},e.appendMany=function(e,t){var n;"1.7"===s.fn.jquery.substr(0,3)&&(n=s(),s.map(t,function(e){n=n.add(e)}),t=n),e.append(t)},e}),e.define("select2/results",["jquery","./utils"],function(d,e){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=d('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=d('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(e.message);n.append(t(i(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],i=this.option(i);t.push(i)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current(function(e){var i=d.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=d(this),t=d.data(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<d.inArray(n,i)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},i.prototype.showLoading=function(e){this.hideLoading();e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},e=this.option(e);e.className+=" loading-results",this.$results.prepend(e)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n,i={role:"treeitem","aria-selected":"false"};for(n in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var o=i[n];t.setAttribute(n,o)}if(e.children){var s=d(t),r=document.createElement("strong");r.className="select2-results__group",d(r),this.template(e,r);for(var a=[],l=0;l<e.children.length;l++){var c=e.children[l],c=this.option(c);a.push(c)}var u=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});u.append(a),s.append(r),s.append(u)}else this.template(e,t);return d.data(t,"data",e),t},i.prototype.bind=function(t,e){var o=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){o.clear(),o.append(e.data),t.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),t.on("results:append",function(e){o.append(e.data),t.isOpen()&&o.setClasses()}),t.on("query",function(e){o.hideMessages(),o.showLoading(e)}),t.on("select",function(){t.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(o.setClasses(),o.highlightFirstItem())}),t.on("open",function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()}),t.on("close",function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=o.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e,t=o.getHighlightedResults();0!==t.length&&(e=t.data("data"),"true"==t.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:e}))}),t.on("results:previous",function(){var e,t=o.getHighlightedResults(),n=o.$results.find("[aria-selected]"),i=n.index(t);0!==i&&(e=i-1,0===t.length&&(e=0),(i=n.eq(e)).trigger("mouseenter"),t=o.$results.offset().top,n=i.offset().top,i=o.$results.scrollTop()+(n-t),0===e?o.$results.scrollTop(0):n-t<0&&o.$results.scrollTop(i))}),t.on("results:next",function(){var e,t=o.getHighlightedResults(),n=o.$results.find("[aria-selected]"),i=n.index(t)+1;i>=n.length||((e=n.eq(i)).trigger("mouseenter"),t=o.$results.offset().top+o.$results.outerHeight(!1),n=e.offset().top+e.outerHeight(!1),e=o.$results.scrollTop()+n-t,0===i?o.$results.scrollTop(0):t<n&&o.$results.scrollTop(e))}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){o.displayMessage(e)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=o.$results.height();t?(o.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=d(this),n=t.data("data");return"true"===t.attr("aria-selected")?void(o.options.get("multiple")?o.trigger("unselect",{originalEvent:e,data:n}):o.trigger("close",{})):void o.trigger("select",{originalEvent:e,data:n})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=d(this).data("data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:t,element:d(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e,t,n,i,o=this.getHighlightedResults();0!==o.length&&(e=this.$results.find("[aria-selected]").index(o),i=this.$results.offset().top,t=o.offset().top,n=this.$results.scrollTop()+(t-i),i=t-i,n-=2*o.outerHeight(!1),e<=2?this.$results.scrollTop(0):(i>this.$results.outerHeight()||i<0)&&this.$results.scrollTop(n))},i.prototype.template=function(e,t){var n=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),e=n(e,t);null==e?t.style.display="none":"string"==typeof e?t.innerHTML=i(e):d(t).append(e)},i}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,e,o){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},i.prototype.bind=function(e,t){var n=this,i=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===o.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",i),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.focus(),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)}),e.on("disable",function(){n.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},i.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){var e=n(this);this!=t[0]&&e.data("element").mselect2("close")})})},i.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(t,e){var n=this;o.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.focus()}),t.on("selection:update",function(e){n.update(e.data)})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){var t,n;0!==e.length?(t=e[0],n=this.$selection.find(".select2-selection__rendered"),e=this.display(t,n),n.empty().append(e),n.prop("title",t.title||t.text)):this.clear()},o}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,a){function o(e,t){o.__super__.constructor.apply(this,arguments)}return a.Extend(o,e),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},o.prototype.bind=function(e,t){var n=this;o.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){var t;n.options.get("disabled")||(t=i(this).parent().data("data"),n.trigger("unselect",{originalEvent:e,data:t}))})},o.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},o.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=this.selectionContainer(),s=this.display(i,o);o.append(s),o.prop("title",i.title||i.text),o.data("data",i),t.push(o)}var r=this.$selection.find(".select2-selection__rendered");a.appendMany(r,t)}},o}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();t=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(t)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(n,i){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),o=0;o<i.length;o++){var s={data:i[o]};if(this.trigger("unselect",s),s.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=i.DELETE&&t.which!=i.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){e.call(this,t),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||((e=n('<span class="select2-selection__clear">&times;</span>')).data("data",t),this.$selection.find(".select2-selection__rendered").prepend(e))},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,e,s){function t(e,t,n){e.call(this,t,n)}return t.prototype.render=function(e){var t=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");e=e.call(this);return this._transferTabIndex(),e},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",function(){i.$search.trigger("focus")}),t.on("close",function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")}),t.on("enable",function(){i.$search.prop("disabled",!1),i._transferTabIndex()}),t.on("disable",function(){i.$search.prop("disabled",!0)}),t.on("focus",function(e){i.$search.trigger("focus")}),t.on("results:focus",function(e){i.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){i.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){i._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){var t;e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which!==s.BACKSPACE||""!==i.$search.val()||0<(t=i.$searchContainer.prev(".select2-selection__choice")).length&&(t=t.data("data"),i.searchRemoveChoice(t),e.preventDefault())});var t=document.documentMode,o=t&&t<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){return o?void i.$selection.off("input.search input.searchcheck"):void i.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){var t;o&&"input"===e.type?i.$selection.off("input.search input.searchcheck"):(t=e.which)!=s.SHIFT&&t!=s.CTRL&&t!=s.ALT&&t!=s.TAB&&i.handleSearch(e)})},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},t.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},t}),e.define("select2/selection/eventRelay",["jquery"],function(r){function e(){}return e.prototype.bind=function(e,t,n){var i=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];e.call(this,t,n),t.on("*",function(e,t){var n;-1!==r.inArray(e,o)&&(t=t||{},n=r.Event("select2:"+e,{params:t}),i.$element.trigger(n),-1!==r.inArray(e,s)&&(t.prevented=n.isDefaultPrevented()))})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(e){var t;return e in i._cache||(t=n(e),i._cache[e]=t),new i(i._cache[e])},i}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),e.define("select2/data/base",["../utils"],function(n){function i(e,t){i.__super__.constructor.call(this)}return n.Extend(i,n.Observable),i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(e,t){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(e,t){e=e.id+"-result-";return(e+=n.generateChars(4))+(null!=t.id?"-"+t.id.toString():"-"+n.generateChars(4))},i}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,t,r){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,e),n.prototype.current=function(e){var t=[],n=this;this.$element.find(":selected").each(function(){var e=r(this),e=n.item(e);t.push(e)}),e(t)},n.prototype.select=function(o){var e,s=this;if(o.selected=!0,r(o.element).is("option"))return o.element.selected=!0,void this.$element.trigger("change");this.$element.prop("multiple")?this.current(function(e){var t=[];(o=[o]).push.apply(o,e);for(var n=0;n<o.length;n++){var i=o[n].id;-1===r.inArray(i,t)&&t.push(i)}s.$element.val(t),s.$element.trigger("change")}):(e=o.id,this.$element.val(e),this.$element.trigger("change"))},n.prototype.unselect=function(o){var s=this;if(this.$element.prop("multiple"))return o.selected=!1,r(o.element).is("option")?(o.element.selected=!1,void this.$element.trigger("change")):void this.current(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].id;i!==o.id&&-1===r.inArray(i,t)&&t.push(i)}s.$element.val(t),s.$element.trigger("change")})},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){r.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],i=this;this.$element.children().each(function(){var e=r(this);(e.is("option")||e.is("optgroup"))&&(e=i.item(e),null!==(e=i.matches(t,e))&&n.push(e))}),e({results:n})},n.prototype.addOptions=function(e){t.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=r(t),e=this._normalizeItem(e);return e.element=t,r.data(t,"data",e),n},n.prototype.item=function(e){var t={};if(null!=(t=r.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},n=e.children("option"),i=[],o=0;o<n.length;o++){var s=r(n[o]),s=this.item(s);i.push(s)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],r.data(e[0],"data",t),t},n.prototype._normalizeItem=function(e){r.isPlainObject(e)||(e={id:e,text:e});return null!=(e=r.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),r.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,c,u){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return c.Extend(i,e),i.prototype.select=function(n){var e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()});0===e.length&&(e=this.option(n),this.addOptions(e)),i.__super__.select.call(this,n)},i.prototype.convertToOptions=function(e){for(var t=this,n=this.$element.find("option"),i=n.map(function(){return t.item(u(this)).id}).get(),o=[],s=0;s<e.length;s++){var r,a,l=this._normalizeItem(e[s]);0<=u.inArray(l.id,i)?(r=n.filter(function(e){return function(){return u(this).val()==e.id}}(l)),a=this.item(r),a=u.extend(!0,{},l,a),a=this.option(a),r.replaceWith(a)):(a=this.option(l),l.children&&(l=this.convertToOptions(l.children),c.appendMany(a,l)),o.push(a))}return o},i}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,s){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return s.extend({},e,{q:e.term})},transport:function(e,t,n){e=s.ajax(e);return e.then(t),e.fail(n),e}};return s.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){function e(){var e=o.transport(o,function(e){e=i.processResults(e,t);i.options.get("debug")&&window.console&&console.error&&(e&&e.results&&s.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){e.status&&"0"===e.status||i.trigger("results:message",{message:"errorLoading"})});i._request=e}var i=this;null!=this._request&&(s.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=s.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(a){function e(e,t,n){var i=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);o=n.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,n),a.isArray(i))for(var s=0;s<i.length;s++){var r=i[s],r=this._normalizeItem(r),r=this.option(r);this.$element.append(r)}}return e.prototype.query=function(e,c,u){var d=this;return this._removeOldTags(),null==c.term||null!=c.page?void e.call(this,c,u):void e.call(this,c,function e(t,n){for(var i=t.results,o=0;o<i.length;o++){var s=i[o],r=null!=s.children&&!e({results:s.children},!0);if(s.text===c.term||r)return!n&&(t.data=i,void u(t))}if(n)return!0;var a,l=d.createTag(c);null!=l&&((a=d.option(l)).attr("data-select2-tag",!0),d.addOptions([a]),d.insertTag(i,l)),t.results=i,u(t)})},e.prototype.createTag=function(e,t){t=a.trim(t.term);return""===t?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||a(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(c){function e(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var o=this.tokenizer(t,this.options,function(e){var t,n=i._normalizeItem(e);i.$element.find("option").filter(function(){return c(this).val()===n.id}).length||((t=i.option(n)).attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([t])),t=n,i.trigger("select",{data:t})});o.term!==t.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),t.term=o.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,i){for(var o=n.get("tokenSeparators")||[],s=t.term,r=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};r<s.length;){var l=s[r];-1!==c.inArray(l,o)?(l=s.substr(0,r),null!=(l=a(c.extend({},t,{term:l})))?(i(l),s=s.substr(r+1)||"",r=0):r++):r++}return{term:s}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",t.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){return t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):void e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(t,n,i){var o=this;this.current(function(e){e=null!=e?e.length:0;return 0<o.maximumSelectionLength&&e>=o.maximumSelectionLength?void o.trigger("results:message",{message:"maximumSelected",args:{maximum:o.maximumSelectionLength}}):void t.call(o,n,i)})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(o,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),e=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=e,this.$search=e.find("input"),t.prepend(e),t},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),this.$search.on("keydown",function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){o(this).off("keyup")}),this.$search.on("keyup input",function(e){i.handleSearch(e)}),t.on("open",function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout(function(){i.$search.focus()},0)}),t.on("close",function(){i.$search.attr("tabindex",-1),i.$search.val("")}),t.on("focus",function(){t.isOpen()&&i.$search.focus()}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide"))})},t.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var o=t[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(o){function e(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",function(e){i.lastParams=e,i.loading=!0}),t.on("query:append",function(e){i.lastParams=e,i.loading=!0}),this.$results.on("scroll",function(){var e=o.contains(document.documentElement,i.$loadingMore[0]);!i.loading&&e&&(e=i.$results.offset().top+i.$results.outerHeight(!1),i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1)<=e+50&&i.loadMore())})},e.prototype.loadMore=function(){this.loading=!0;var e=o.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=o('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(c,r){function e(e,t,n){this.$dropdownParent=n.get("dropdownParent")||c(document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this,o=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),o||(o=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=c("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var n=this,i="scroll.select2."+t.id,o="resize.select2."+t.id,s="orientationchange.select2."+t.id,t=this.$container.parents().filter(r.hasScroll);t.each(function(){c(this).data("select2-scroll-position",{x:c(this).scrollLeft(),y:c(this).scrollTop()})}),t.on(i,function(e){var t=c(this).data("select2-scroll-position");c(this).scrollTop(t.y)}),c(window).on(i+" "+o+" "+s,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,i="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(r.hasScroll).off(n),c(window).off(n+" "+i+" "+t)},e.prototype._positionDropdown=function(){var e=c(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),i=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var r=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),e=a<o.top-r,a=l>o.bottom+r,l={left:o.left,top:s.bottom},o=this.$dropdownParent,o=(o="static"===o.css("position")?o.offsetParent():o).offset();l.top-=o.top,l.left-=o.left,t||n||(i="below"),a||!e||t?!e&&a&&t&&(i="below"):i="above",("above"==i||t&&"below"!==i)&&(l.top=s.top-o.top-r),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(l)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var o=t[i];o.children?n+=e(o.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}n=this.getHighlightedResults();n.length<1||(null!=(n=n.data("data")).element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n}))},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,e="Please delete "+t+" character";return 1!=t&&(e+="s"),e},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(u,d,p,h,f,g,m,v,y,_,w,t,$,b,x,A,C,S,O,E,D,T,q,j,L,k,P,I,e){function n(){this.reset()}return n.prototype.apply=function(t){var e,n;if(null==(t=u.extend(!0,{},this.defaults,t)).dataAdapter&&(null!=t.ajax?t.dataAdapter=x:null!=t.data?t.dataAdapter=b:t.dataAdapter=$,0<t.minimumInputLength&&(t.dataAdapter=_.Decorate(t.dataAdapter,S)),0<t.maximumInputLength&&(t.dataAdapter=_.Decorate(t.dataAdapter,O)),0<t.maximumSelectionLength&&(t.dataAdapter=_.Decorate(t.dataAdapter,E)),t.tags&&(t.dataAdapter=_.Decorate(t.dataAdapter,A)),null==t.tokenSeparators&&null==t.tokenizer||(t.dataAdapter=_.Decorate(t.dataAdapter,C)),null!=t.query&&(e=d(t.amdBase+"compat/query"),t.dataAdapter=_.Decorate(t.dataAdapter,e)),null!=t.initSelection&&(e=d(t.amdBase+"compat/initSelection"),t.dataAdapter=_.Decorate(t.dataAdapter,e))),null==t.resultsAdapter&&(t.resultsAdapter=p,null!=t.ajax&&(t.resultsAdapter=_.Decorate(t.resultsAdapter,j)),null!=t.placeholder&&(t.resultsAdapter=_.Decorate(t.resultsAdapter,q)),t.selectOnClose&&(t.resultsAdapter=_.Decorate(t.resultsAdapter,P))),null==t.dropdownAdapter&&(t.multiple?t.dropdownAdapter=D:(n=_.Decorate(D,T),t.dropdownAdapter=n),0!==t.minimumResultsForSearch&&(t.dropdownAdapter=_.Decorate(t.dropdownAdapter,k)),t.closeOnSelect&&(t.dropdownAdapter=_.Decorate(t.dropdownAdapter,I)),null==t.dropdownCssClass&&null==t.dropdownCss&&null==t.adaptDropdownCssClass||(n=d(t.amdBase+"compat/dropdownCss"),t.dropdownAdapter=_.Decorate(t.dropdownAdapter,n)),t.dropdownAdapter=_.Decorate(t.dropdownAdapter,L)),null==t.selectionAdapter&&(t.multiple?t.selectionAdapter=f:t.selectionAdapter=h,null!=t.placeholder&&(t.selectionAdapter=_.Decorate(t.selectionAdapter,g)),t.allowClear&&(t.selectionAdapter=_.Decorate(t.selectionAdapter,m)),t.multiple&&(t.selectionAdapter=_.Decorate(t.selectionAdapter,v)),null==t.containerCssClass&&null==t.containerCss&&null==t.adaptContainerCssClass||(l=d(t.amdBase+"compat/containerCss"),t.selectionAdapter=_.Decorate(t.selectionAdapter,l)),t.selectionAdapter=_.Decorate(t.selectionAdapter,y)),"string"==typeof t.language&&(0<t.language.indexOf("-")?(c=t.language.split("-")[0],t.language=[t.language,c]):t.language=[t.language]),u.isArray(t.language)){var i=new w;t.language.push("en");for(var o=t.language,s=0;s<o.length;s++){var r=o[s],a={};try{a=w.loadPath(r)}catch(e){try{r=this.defaults.amdLanguageBase+r,a=w.loadPath(r)}catch(e){t.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.');continue}}i.extend(a)}t.translations=i}else{var l=w.loadPath(this.defaults.amdLanguageBase+"en"),c=new w(t.language);c.extend(l),t.translations=c}return t},n.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:_.escapeMarkup,language:e,matcher:function e(t,n){if(""===u.trim(t.term))return n;if(n.children&&0<n.children.length){for(var i=u.extend(!0,{},n),o=n.children.length-1;0<=o;o--)null==e(t,n.children[o])&&i.children.splice(o,1);return 0<i.children.length?i:e(t,i)}var s=a(n.text).toUpperCase(),r=a(t.term).toUpperCase();return-1<s.indexOf(r)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.set=function(e,t){var n={};n[u.camelCase(e)]=t;n=_._convertData(n);u.extend(this.defaults,n)},new n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,s,i,r){function e(e,t){this.options=e,null!=t&&this.fromElement(t),this.options=i.apply(this.options),t&&t.is("input")&&(t=n(this.get("amdBase")+"compat/inputData"),this.options.dataAdapter=r.Decorate(this.options.dataAdapter,t))}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var n,i=s.fn.jquery&&"1."==s.fn.jquery.substr(0,2)&&e[0].dataset?s.extend(!0,{},e[0].dataset,e.data()):e.data(),o=s.extend(!0,{},i);for(n in o=r._convertData(o))-1<s.inArray(n,t)||(s.isPlainObject(this.options[n])?s.extend(this.options[n],o[n]):this.options[n]=o[n]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(o,s,n,i){var r=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new s(t,e),r.__super__.constructor.call(this);var n=e.attr("tabindex")||0;e.data("old-tabindex",n),e.attr("tabindex","-1");t=this.options.get("dataAdapter");this.dataAdapter=new t(e,this.options);n=this.render();this._placeContainer(n);t=this.options.get("selectionAdapter");this.selection=new t(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,n);t=this.options.get("dropdownAdapter");this.dropdown=new t(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,n);n=this.options.get("resultsAdapter");this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var i=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){i=e.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"!=t)return t;e=e.attr("style");if("string"!=typeof e)return null;for(var o=e.split(";"),s=0,r=o.length;s<r;s+=1){var a=o[s].replace(/\s/g,"").match(n);if(null!==a&&1<=a.length)return a[1]}return null},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){o.each(e,t._syncA),o.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},r.prototype._registerSelectionEvents=function(){var n=this,i=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===o.inArray(e,i)&&n.trigger(e,t)})},r.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},r.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},r.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")}),this.on("close",function(){n.$container.removeClass("select2-container--open")}),this.on("enable",function(){n.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){n.$container.addClass("select2-container--disabled")}),this.on("blur",function(){n.$container.removeClass("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;t===i.ENTER&&(e.ctrlKey||e.metaKey)&&(n.close()||MapSVG.formBuilder.save()),t!==i.ESC||n.isOpen()||n.close()||MapSVG.formBuilder.close(),n.isOpen()?t===i.ESC||t===i.TAB||t===i.UP&&e.altKey?(n.close(),e.preventDefault()):t!==i.ENTER||e.ctrlKey||e.metaKey?t===i.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===i.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===i.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(n.trigger("results:select",{}),e.preventDefault()):(t===(i.ENTER&&!e.ctrlKey&&!e.metaKey)||t===i.SPACE||t===i.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var o=0;o<t.addedNodes.length;o++)t.addedNodes[o].selected&&(n=!0);else t.removedNodes&&0<t.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var o=i[e],i={prevented:!1,name:e,args:t};if(n.call(this,o,i),i.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');e=!(e=null==e||0===e.length?[!0]:e)[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0];o.isArray(e)&&(e=o.map(e,function(e){return e.toString()})),this.$element.val(e).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=o('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r}),e.define("select2/compat/utils",["jquery"],function(r){return{syncCssClasses:function(e,t,n){var i,o=[],s=r.trim(e.attr("class"));s&&r((s=""+s).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)}),(s=r.trim(t.attr("class")))&&r((s=""+s).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(null!=(i=n(this))&&o.push(i))}),e.attr("class",o.join(" "))}}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(s,r){function a(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("containerCssClass")||"";s.isFunction(n)&&(n=n(this.$element));var i,o=this.options.get("adaptContainerCssClass");o=o||a,-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),i=o,o=function(e){var t=i(e);return null!=t?t+" "+e:e});e=this.options.get("containerCss")||{};return s.isFunction(e)&&(e=e(this.$element)),r.syncCssClasses(t,this.$element,o),t.css(e),t.addClass(n),t},e}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(s,r){function a(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("dropdownCssClass")||"";s.isFunction(n)&&(n=n(this.$element));var i,o=this.options.get("adaptDropdownCssClass");o=o||a,-1!==n.indexOf(":all:")&&(n=n.replace(":all:",""),i=o,o=function(e){var t=i(e);return null!=t?t+" "+e:e});e=this.options.get("dropdownCss")||{};return s.isFunction(e)&&(e=e(this.$element)),r.syncCssClasses(t,this.$element,o),t.css(e),t.addClass(n),t},e}),e.define("select2/compat/initSelection",["jquery"],function(i){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=n.get("initSelection"),this._isInitialized=!1,e.call(this,t,n)}return e.prototype.current=function(e,t){var n=this;return this._isInitialized?void e.call(this,t):void this.initSelection.call(null,this.$element,function(e){n._isInitialized=!0,i.isArray(e)||(e=[e]),t(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(s){function e(e,t,n){this._currentData=[],this._valueSeparator=n.get("valueSeparator")||",","hidden"===t.prop("type")&&n.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,n)}return e.prototype.current=function(e,t){for(var n=[],i=0;i<this._currentData.length;i++){var o=this._currentData[i];n.push.apply(n,function e(t,n){var i=[];return t.selected||-1!==s.inArray(t.id,n)?(t.selected=!0,i.push(t)):t.selected=!1,t.children&&i.push.apply(i,e(t.children,n)),i}(o,this.$element.val().split(this._valueSeparator)))}t(n)},e.prototype.select=function(e,t){var n;this.options.get("multiple")?(n=this.$element.val(),n+=this._valueSeparator+t.id,this.$element.val(n)):(this.current(function(e){s.map(e,function(e){e.selected=!1})}),this.$element.val(t.id)),this.$element.trigger("change")},e.prototype.unselect=function(e,o){var s=this;o.selected=!1,this.current(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];o.id!=i.id&&t.push(i.id)}s.$element.val(t.join(s._valueSeparator)),s.$element.trigger("change")})},e.prototype.query=function(e,t,n){for(var i=[],o=0;o<this._currentData.length;o++){var s=this._currentData[o],s=this.matches(t,s);null!==s&&i.push(s)}n({results:i})},e.prototype.addOptions=function(e,t){t=s.map(t,function(e){return s.data(e[0],"data")});this._currentData.push.apply(this._currentData,t)},e}),e.define("select2/compat/matcher",["jquery"],function(r){return function(s){return function(e,t){var n=r.extend(!0,{},t);if(null==e.term||""===r.trim(e.term))return n;if(t.children){for(var i=t.children.length-1;0<=i;i--){var o=t.children[i];s(e.term,o.text,o)||n.children.splice(i,1)}if(0<n.children.length)return n}return s(e.term,t.text,t)?n:null}}}),e.define("select2/compat/query",[],function(){function e(e,t,n){n.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.callback=n,this.options.get("query").call(null,t)},e}),e.define("select2/dropdown/attachContainer",[],function(){function e(e,t,n){e.call(this,t,n)}return e.prototype.position=function(e,t,n){n.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),n.addClass("select2-container--below")},e}),e.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),e.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,n){e.call(this,t,n);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),o=function(u){function t(e){var t,n=e||window.event,i=g.call(arguments,1),o=0,s=0,r=0,a=0,l=0,c=0;if((e=u.event.fix(n)).type="mousewheel","detail"in n&&(r=-1*n.detail),"wheelDelta"in n&&(r=n.wheelDelta),"wheelDeltaY"in n&&(r=n.wheelDeltaY),"wheelDeltaX"in n&&(s=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(s=-1*r,r=0),o=0===r?s:r,"deltaY"in n&&(o=r=-1*n.deltaY),"deltaX"in n&&(s=n.deltaX,0===r&&(o=-1*s)),0!==r||0!==s){1===n.deltaMode?(o*=t=u.data(this,"mousewheel-line-height"),r*=t,s*=t):2===n.deltaMode&&(o*=t=u.data(this,"mousewheel-page-height"),r*=t,s*=t);var a=Math.max(Math.abs(r),Math.abs(s));return f&&!(a<f)||p(n,f=a)&&(f/=40),p(n,a)&&(o/=40,s/=40,r/=40),o=Math[1<=o?"floor":"ceil"](o/f),s=Math[1<=s?"floor":"ceil"](s/f),r=Math[1<=r?"floor":"ceil"](r/f),m.settings.normalizeOffset&&this.getBoundingClientRect&&(a=this.getBoundingClientRect(),l=e.clientX-a.left,c=e.clientY-a.top),e.deltaX=s,e.deltaY=r,e.deltaFactor=f,e.offsetX=l,e.offsetY=c,e.deltaMode=0,i.unshift(e,o,s,r),h&&clearTimeout(h),h=setTimeout(d,200),(u.event.dispatch||u.event.handle).apply(this,i)}}function d(){f=null}function p(e,t){return m.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var h,f,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g=Array.prototype.slice;if(u.event.fixHooks)for(var i=e.length;i;)u.event.fixHooks[e[--i]]=u.event.mouseHooks;var m=u.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t;u.data(this,"mousewheel-line-height",m.getLineHeight(this)),u.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null;u.removeData(this,"mousewheel-line-height"),u.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=u(e),e=t["offsetParent"in u.fn?"offsetParent":"parent"]();return e.length||(e=u("body")),parseInt(e.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return u(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};u.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],o):"object"==typeof exports?module.exports=o:o(t),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(o,e,s,t){var r;return null==o.fn.mselect2&&(r=["open","close","destroy"],o.fn.mselect2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=o.extend(!0,{},t);new s(o(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o(this).data("select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,i)}),-1<o.inArray(t,r)?this:n}),null==o.fn.mselect2.defaults&&(o.fn.mselect2.defaults=t),s}),{define:e.define,require:e.require}),e=o.require("jquery.select2");function _(e,t){return r.call(e,t)}function c(e,t){var n,i,o,s,r,a,l,c,u,d,p=t&&t.split("/"),h=g.map,f=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(t=(e=e.split("/")).length-1,g.nodeIdCompat&&m.test(e[t])&&(e[t]=e[t].replace(m,"")),e=p.slice(0,p.length-1).concat(e),c=0;c<e.length;c+=1)if("."===(d=e[c]))e.splice(c,1),--c;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;0<c&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||f)&&h){for(c=(n=e.split("/")).length;0<c;--c){if(i=n.slice(0,c).join("/"),p)for(u=p.length;0<u;--u)if(o=(o=h[p.slice(0,u).join("/")])&&o[i]){s=o,r=c;break}if(s)break;!a&&f&&f[i]&&(a=f[i],l=c)}!s&&a&&(s=a,r=l),s&&(n.splice(0,r,s),e=n.join("/"))}return e}function w(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(d,e.concat([t,n]))}}function b(e){var t;if(_(h,e)&&(t=h[e],delete h[e],f[e]=!0,l.apply(d,t)),!_(p,e)&&!_(f,e))throw new Error("No "+e);return p[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}return t.fn.mselect2.amd=o,e});
!function(h,r,n,t){var i,s=0,o=(i=t.userAgent,t=/msie\s\d+/i,0<i.search(t)&&(i=(i=t.exec(i).toString()).split(" ")[1])<9&&(h("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(s){var o=this,e=[].slice;if("function"!=typeof o)throw new TypeError;var h=e.call(arguments,1),r=function(){if(this instanceof r){(t=function(){}).prototype=o.prototype;var t=new t,i=o.apply(t,h.concat(e.call(arguments)));return Object(i)===i?i:t}return o.apply(s,h.concat(e.call(arguments)))};return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,i){var s;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),e=o.length>>>0;if(0==e)return-1;if(s=+i||0,e<=(s=1/0===Math.abs(s)?0:s))return-1;for(s=Math.max(0<=s?s:e-Math.abs(s),0);s<e;){if(s in o&&o[s]===t)return s;s++}return-1});function e(t,i,s){this.VERSION="2.1.2",this.input=t,this.plugin_count=s,this.old_to=this.old_from=this.update_tm=this.calc_count=this.current_plugin=0,this.raf_id=this.old_min_interval=null,this.is_update=this.is_key=this.no_diapason=this.force_redraw=this.dragging=!1,this.is_start=!0,this.is_click=this.is_resize=this.is_active=this.is_finish=!1,this.$cache={win:h(n),body:h(r.body),input:h(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var o,e=this.$cache.input;for(o in t=e.prop("value"),s={type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!1,keyboard_step:5,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" — ",input_values_separator:";",disable:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null},(e={type:e.data("type"),min:e.data("min"),max:e.data("max"),from:e.data("from"),to:e.data("to"),step:e.data("step"),min_interval:e.data("minInterval"),max_interval:e.data("maxInterval"),drag_interval:e.data("dragInterval"),values:e.data("values"),from_fixed:e.data("fromFixed"),from_min:e.data("fromMin"),from_max:e.data("fromMax"),from_shadow:e.data("fromShadow"),to_fixed:e.data("toFixed"),to_min:e.data("toMin"),to_max:e.data("toMax"),to_shadow:e.data("toShadow"),prettify_enabled:e.data("prettifyEnabled"),prettify_separator:e.data("prettifySeparator"),force_edges:e.data("forceEdges"),keyboard:e.data("keyboard"),keyboard_step:e.data("keyboardStep"),grid:e.data("grid"),grid_margin:e.data("gridMargin"),grid_num:e.data("gridNum"),grid_snap:e.data("gridSnap"),hide_min_max:e.data("hideMinMax"),hide_from_to:e.data("hideFromTo"),prefix:e.data("prefix"),postfix:e.data("postfix"),max_postfix:e.data("maxPostfix"),decorate_both:e.data("decorateBoth"),values_separator:e.data("valuesSeparator"),input_values_separator:e.data("inputValuesSeparator"),disable:e.data("disable")}).values=e.values&&e.values.split(","),e)e.hasOwnProperty(o)&&(e[o]||0===e[o]||delete e[o]);t&&((t=t.split(e.input_values_separator||i.input_values_separator||";"))[0]&&t[0]==+t[0]&&(t[0]=+t[0]),t[1]&&t[1]==+t[1]&&(t[1]=+t[1]),i&&i.values&&i.values.length?(s.from=t[0]&&i.values.indexOf(t[0]),s.to=t[1]&&i.values.indexOf(t[1])):(s.from=t[0]&&+t[0],s.to=t[1]&&+t[1])),h.extend(s,i),h.extend(s,e),this.options=s,this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()}e.prototype={init:function(t){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){this.$cache.input.before('<span class="irs js-irs-'+this.plugin_count+'"></span>'),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="-1"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span><span class="irs-bar"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar-edge"></span><span class="irs-shadow shadow-single"></span><span class="irs-slider single"></span>'),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.cont.removeClass("irs-disabled"),this.$cache.input[0].disabled=!1,this.bindEvents()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.max,i=this.options.to;this.options.from>this.options.min&&i===t?this.$cache.s_from.addClass("type_last"):i<t&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),o&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),o&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerMove:function(t){this.dragging&&(this.coords.x_pointer=(t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX)-this.coords.x_gap,this.calc())},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,o&&h("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(h.contains(this.$cache.cont[0],t.target)||this.dragging)&&(this.is_finish=!0,this.callOnFinish()),this.dragging=!1)},pointerDown:function(t,i){i.preventDefault();var s=i.pageX||i.originalEvent.touches&&i.originalEvent.touches[0].pageX;2!==i.button&&("both"===t&&this.setTempMinInterval(),t=t||this.target,this.current_plugin=this.plugin_count,this.target=t,this.dragging=this.is_active=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=s-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),o&&h("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,i){i.preventDefault();var s=i.pageX||i.originalEvent.touches&&i.originalEvent.touches[0].pageX;2!==i.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(s-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,i){if(!(this.current_plugin!==this.plugin_count||i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)){switch(i.which){case 83:case 65:case 40:case 37:i.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:i.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var i=this.coords.p_pointer,i=t?i+this.options.keyboard_step:i-this.options.keyboard_step;this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*i),this.is_key=!0,this.calc()},setMinMax:function(){this.options&&(this.options.hide_min_max?(this.$cache.min[0].style.display="none",this.$cache.max[0].style.display="none"):(this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(this.$cache.min.html(this.decorate(this._prettify(this.options.min),this.options.min)),this.$cache.max.html(this.decorate(this._prettify(this.options.max),this.options.max))),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)))},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){if(this.options&&(this.calc_count++,10!==this.calc_count&&!t||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){switch(this.calcPointerPercent(),t=this.getHandleX(),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,t=this.getHandleX(),this.target=this.options.drag_interval?"both_one":this.chooseHandle(t)),this.target){case"base":var i=(this.options.max-this.options.min)/100;t=(this.result.from-this.options.min)/i,i=(this.result.to-this.options.min)/i,this.coords.p_single_real=this.toFixed(t),this.coords.p_from_real=this.toFixed(t),this.coords.p_to_real=this.toFixed(i),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(t),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(t),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(t),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;t=this.toFixed(t+.1*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(t)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(t)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var s=this.convertToRealPercent(t),o=(t=this.result.to_percent-this.result.from_percent)/2,i=s-o,s=s+o;100<(s=i<0?(i=0)+t:s)&&(i=(s=100)-t),this.coords.p_from_real=this.calcWithStep(i),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(s),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,i=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return i<0?i=0:t<i&&(i=t),i},calcHandlePercent:function(){this.coords.w_handle=("single"===this.options.type?this.$cache.s_single:this.$cache.s_from).outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":t>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%",this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%"),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to)),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||this.$cache.input.trigger("change"),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_click=this.is_key=!1,this.callOnFinish()),this.is_finish=this.is_resize=this.is_update=!1),this.force_redraw=this.is_click=this.is_key=this.is_start=!1))},drawLabels:function(){var t,i,s,o;this.options&&(i=this.options.values.length,t=this.options.p_values,this.options.hide_from_to||("single"===this.options.type?(i=i?this.decorate(t[this.result.from]):this.decorate(this._prettify(this.result.from),this.result.from),this.$cache.single.html(i),this.calcLabels(),this.$cache.min[0].style.visibility=this.labels.p_single_left<this.labels.p_min+1?"hidden":"visible",this.$cache.max[0].style.visibility=this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?"hidden":"visible"):(t=i?(this.options.decorate_both?(i=this.decorate(t[this.result.from]),i+=this.options.values_separator,i+=this.decorate(t[this.result.to])):i=this.decorate(t[this.result.from]+this.options.values_separator+t[this.result.to]),s=this.decorate(t[this.result.from]),this.decorate(t[this.result.to])):(this.options.decorate_both?(i=this.decorate(this._prettify(this.result.from),this.result.from),i+=this.options.values_separator,i+=this.decorate(this._prettify(this.result.to),this.result.to)):i=this.decorate(this._prettify(this.result.from)+this.options.values_separator+this._prettify(this.result.to),this.result.to),s=this.decorate(this._prettify(this.result.from),this.result.from),this.decorate(this._prettify(this.result.to),this.result.to)),this.$cache.single.html(i),this.$cache.from.html(s),this.$cache.to.html(t),this.calcLabels(),t=Math.min(this.labels.p_single_left,this.labels.p_from_left),i=this.labels.p_single_left+this.labels.p_single_fake,s=this.labels.p_to_left+this.labels.p_to_fake,o=Math.max(i,s),this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",o=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target&&(this.$cache.to[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",s):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(i,s))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),this.$cache.min[0].style.visibility=t<this.labels.p_min+1?"hidden":"visible",this.$cache.max[0].style.visibility=o>100-this.labels.p_max-1?"hidden":"visible")))},drawShadow:function(){var t=this.options,i=this.$cache,s="number"==typeof t.from_min&&!isNaN(t.from_min),o="number"==typeof t.from_max&&!isNaN(t.from_max),e="number"==typeof t.to_min&&!isNaN(t.to_min),h="number"==typeof t.to_max&&!isNaN(t.to_max);"single"===t.type?t.from_shadow&&(s||o)?(s=this.convertToPercent(s?t.from_min:t.min),o=this.convertToPercent(o?t.from_max:t.max)-s,s=this.toFixed(s-this.coords.p_handle/100*s),o=this.toFixed(o-this.coords.p_handle/100*o),s+=this.coords.p_handle/2,i.shad_single[0].style.display="block",i.shad_single[0].style.left=s+"%",i.shad_single[0].style.width=o+"%"):i.shad_single[0].style.display="none":(t.from_shadow&&(s||o)?(s=this.convertToPercent(s?t.from_min:t.min),o=this.convertToPercent(o?t.from_max:t.max)-s,s=this.toFixed(s-this.coords.p_handle/100*s),o=this.toFixed(o-this.coords.p_handle/100*o),s+=this.coords.p_handle/2,i.shad_from[0].style.display="block",i.shad_from[0].style.left=s+"%",i.shad_from[0].style.width=o+"%"):i.shad_from[0].style.display="none",t.to_shadow&&(e||h)?(e=this.convertToPercent(e?t.to_min:t.min),t=this.convertToPercent(h?t.to_max:t.max)-e,e=this.toFixed(e-this.coords.p_handle/100*e),t=this.toFixed(t-this.coords.p_handle/100*t),e+=this.coords.p_handle/2,i.shad_to[0].style.display="block",i.shad_to[0].style.left=e+"%",i.shad_to[0].style.width=t+"%"):i.shad_to[0].style.display="none")},callOnStart:function(){this.options.onStart&&"function"==typeof this.options.onStart&&this.options.onStart(this.result)},callOnChange:function(){this.options.onChange&&"function"==typeof this.options.onChange&&this.options.onChange(this.result)},callOnFinish:function(){this.options.onFinish&&"function"==typeof this.options.onFinish&&this.options.onFinish(this.result)},callOnUpdate:function(){this.options.onUpdate&&"function"==typeof this.options.onUpdate&&this.options.onUpdate(this.result)},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input")},convertToPercent:function(t,i){var s=this.options.max-this.options.min;return s?this.toFixed((i?t:t-this.options.min)/(s/100)):(this.no_diapason=!0,0)},convertToValue:function(t){var i,s,o=this.options.min,e=this.options.max,h=o.toString().split(".")[1],r=e.toString().split(".")[1],n=0,a=0;return 0===t?this.options.min:100===t?this.options.max:(h&&(n=i=h.length),r&&(n=s=r.length),i&&s&&(n=s<=i?i:s),o<0&&(o=+(o+(a=Math.abs(o))).toFixed(n),e=+(e+a).toFixed(n)),t=(e-o)/100*t+o,t=(o=this.options.step.toString().split(".")[1])?+t.toFixed(o.length):(t/=this.options.step,+(t*=this.options.step).toFixed(0)),a&&(t-=a),(a=o?+t.toFixed(o.length):this.toFixed(t))<this.options.min?a=this.options.min:a>this.options.max&&(a=this.options.max),a)},calcWithStep:function(t){var i=Math.round(t/this.coords.p_step)*this.coords.p_step;return 100<i&&(i=100),100===t&&(i=100),this.toFixed(i)},checkMinInterval:function(t,i,s){var o=this.options;return o.min_interval?(t=this.convertToValue(t),i=this.convertToValue(i),"from"===s?i-t<o.min_interval&&(t=i-o.min_interval):t-i<o.min_interval&&(t=i+o.min_interval),this.convertToPercent(t)):t},checkMaxInterval:function(t,i,s){var o=this.options;return o.max_interval?(t=this.convertToValue(t),i=this.convertToValue(i),"from"===s?i-t>o.max_interval&&(t=i-o.max_interval):t-i>o.max_interval&&(t=i+o.max_interval),this.convertToPercent(t)):t},checkDiapason:function(t,i,s){t=this.convertToValue(t);var o=this.options;return"number"!=typeof i&&(i=o.min),(s="number"!=typeof s?o.max:s)<(t=t<i?i:t)&&(t=s),this.convertToPercent(t)},toFixed:function(t){return+(t=t.toFixed(9))},_prettify:function(t){return this.options.prettify_enabled?(this.options.prettify&&"function"==typeof this.options.prettify?this.options:this).prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,i){return this.options.force_edges&&(t<0?t=0:100-i<t&&(t=100-i)),this.toFixed(t)},validate:function(){var t,i,s=this.options,o=this.result,e=s.values,h=e.length;if("string"==typeof s.min&&(s.min=+s.min),"string"==typeof s.max&&(s.max=+s.max),"string"==typeof s.from&&(s.from=+s.from),"string"==typeof s.to&&(s.to=+s.to),"string"==typeof s.step&&(s.step=+s.step),"string"==typeof s.from_min&&(s.from_min=+s.from_min),"string"==typeof s.from_max&&(s.from_max=+s.from_max),"string"==typeof s.to_min&&(s.to_min=+s.to_min),"string"==typeof s.to_max&&(s.to_max=+s.to_max),"string"==typeof s.keyboard_step&&(s.keyboard_step=+s.keyboard_step),"string"==typeof s.grid_num&&(s.grid_num=+s.grid_num),s.max<s.min&&(s.max=s.min),h)for(s.p_values=[],s.min=0,s.max=h-1,s.step=1,s.grid_num=s.max,s.grid_snap=!0,i=0;i<h;i++)t=+e[i],t=isNaN(t)?e[i]:(e[i]=t,this._prettify(t)),s.p_values.push(t);"number"==typeof s.from&&!isNaN(s.from)||(s.from=s.min),"number"==typeof s.to&&!isNaN(s.from)||(s.to=s.max),"single"===s.type?(s.from<s.min&&(s.from=s.min),s.from>s.max&&(s.from=s.max)):((s.from<s.min||s.from>s.max)&&(s.from=s.min),(s.to>s.max||s.to<s.min)&&(s.to=s.max),s.from>s.to&&(s.from=s.to)),("number"!=typeof s.step||isNaN(s.step)||!s.step||s.step<0)&&(s.step=1),("number"!=typeof s.keyboard_step||isNaN(s.keyboard_step)||!s.keyboard_step||s.keyboard_step<0)&&(s.keyboard_step=5),"number"==typeof s.from_min&&s.from<s.from_min&&(s.from=s.from_min),"number"==typeof s.from_max&&s.from>s.from_max&&(s.from=s.from_max),"number"==typeof s.to_min&&s.to<s.to_min&&(s.to=s.to_min),"number"==typeof s.to_max&&s.from>s.to_max&&(s.to=s.to_max),o&&(o.min!==s.min&&(o.min=s.min),o.max!==s.max&&(o.max=s.max),(o.from<o.min||o.from>o.max)&&(o.from=s.from),(o.to<o.min||o.to>o.max)&&(o.to=s.to)),("number"!=typeof s.min_interval||isNaN(s.min_interval)||!s.min_interval||s.min_interval<0)&&(s.min_interval=0),("number"!=typeof s.max_interval||isNaN(s.max_interval)||!s.max_interval||s.max_interval<0)&&(s.max_interval=0),s.min_interval&&s.min_interval>s.max-s.min&&(s.min_interval=s.max-s.min),s.max_interval&&s.max_interval>s.max-s.min&&(s.max_interval=s.max-s.min)},decorate:function(t,i){var s="",o=this.options;return o.prefix&&(s+=o.prefix),s+=t,o.max_postfix&&(o.values.length&&t===o.p_values[o.max]||i===o.max)&&(s+=o.max_postfix,o.postfix&&(s+=" ")),o.postfix&&(s+=o.postfix),s},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,i,s,o=this.options,e=o.max-o.min,h=o.grid_num,r=0,n=0,a=4,c=0,l="";for(this.calcGridMargin(),r=o.grid_snap?(h=e/o.step,this.toFixed(o.step/(e/100))):this.toFixed(100/h),4<h&&(a=3),7<h&&(a=2),14<h&&(a=1),28<h&&(a=0),e=0;e<h+1;e++){for(i=a,100<(n=this.toFixed(r*e))&&(n=100,(i-=2)<0&&(i=0)),s=((this.coords.big[e]=n)-r*(e-1))/(i+1),t=1;t<=i&&0!==n;t++)l+='<span class="irs-grid-pol small" style="left: '+(c=this.toFixed(n-s*t))+'%"></span>';l+='<span class="irs-grid-pol" style="left: '+n+'%"></span>',c=this.convertToValue(n),l+='<span class="irs-grid-text js-grid-text-'+e+'" style="left: '+n+'%">'+(c=o.values.length?o.p_values[c]:this._prettify(c))+"</span>"}this.coords.big_num=Math.ceil(h+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(l),this.cacheGridLabels()}},cacheGridLabels:function(){for(var t,i=this.coords.big_num,s=0;s<i;s++)t=this.$cache.grid.find(".js-grid-text-"+s),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){for(var t=[],i=[],s=this.coords.big_num,o=0;o<s;o++)this.coords.big_w[o]=this.$cache.grid_labels[o].outerWidth(!1),this.coords.big_p[o]=this.toFixed(this.coords.big_w[o]/this.coords.w_rs*100),this.coords.big_x[o]=this.toFixed(this.coords.big_p[o]/2),t[o]=this.toFixed(this.coords.big[o]-this.coords.big_x[o]),i[o]=this.toFixed(t[o]+this.coords.big_p[o]);for(this.options.force_edges&&(t[0]<-this.coords.grid_gap&&(t[0]=-this.coords.grid_gap,i[0]=this.toFixed(t[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),i[s-1]>100+this.coords.grid_gap&&(i[s-1]=100+this.coords.grid_gap,t[s-1]=this.toFixed(i[s-1]-this.coords.big_p[s-1]),this.coords.big_x[s-1]=this.toFixed(this.coords.big_p[s-1]-this.coords.grid_gap))),this.calcGridCollision(2,t,i),this.calcGridCollision(4,t,i),o=0;o<s;o++)(t=this.$cache.grid_labels[o][0]).style.marginLeft=-this.coords.big_x[o]+"%"},calcGridCollision:function(t,i,s){for(var o,e=this.coords.big_num,h=0;h<e&&!(e<=(o=h+t/2));h+=t)this.$cache.grid_labels[o][0].style.visibility=s[h]<=i[o]?"visible":"hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_handle=("single"===this.options.type?this.$cache.s_single:this.$cache.s_from).outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.options=h.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),h.data(this.input,"ionRangeSlider",null),this.remove(),this.options=this.input=null)}},h.fn.ionRangeSlider=function(t){return this.each(function(){h.data(this,"ionRangeSlider")||h.data(this,"ionRangeSlider",new e(this,t,s++))})},function(){for(var h=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[t[i]+"CancelAnimationFrame"]||n[t[i]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(t,i){var s=(new Date).getTime(),o=Math.max(0,16-(s-h)),e=n.setTimeout(function(){t(s+o)},o);return h=s+o,e}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){clearTimeout(t)})}()}(jQuery,document,window,navigator);
!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);(this||window).CodeMirror=e()}}(function(){"use strict";var e=navigator.userAgent,t=navigator.platform,f=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),v=n||r,y=v&&(n?document.documentMode||6:r[1]),d=/WebKit\//.test(e),n=d&&/Qt\/\d+\.\d+/.test(e),r=/Chrome\//.test(e),p=/Opera\//.test(e),a=/Apple Computer/.test(navigator.vendor),i=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),u=/PhantomJS/.test(e),l=/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),s=l||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),g=l||/Mac/.test(t),t=/win/i.test(t),e=p&&e.match(/Version\/(\d*\.\d*)/);(e=e&&Number(e[1]))&&15<=e&&(d=!(p=!1));var o=g&&(n||p&&(null==e||e<12.11)),m=f||v&&9<=y,c=!1,h=!1;function b(e,t){if(!(this instanceof b))return new b(e,t);this.options=t=t?Zi(t):{},Zi(In,t,!1),O(t);var n=t.value;"string"==typeof n&&(n=new _r(n,t.mode,null,t.lineSeparator)),this.doc=n;var r=new b.inputStyles[t.inputStyle](this),r=this.display=new w(e,n,r);M(r.wrapper.CodeMirror=this),T(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!s&&r.input.focus(),E(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Bi,keySeq:null,specialChars:null};var i,o=this;for(i in v&&y<11&&setTimeout(function(){o.display.input.reset(!0)},20),function(r){var i=r.display;Si(i.scroller,"mousedown",Dt(r,Xt)),Si(i.scroller,"dblclick",v&&y<11?Dt(r,function(e){var t;Oi(r,e)||(!(t=jt(r,e))||_t(r,e)||Kt(r.display,e)||(vi(e),t=r.findWordAt(t),Oe(r.doc,t.anchor,t.head)))}):function(e){Oi(r,e)||vi(e)});m||Si(i.scroller,"contextmenu",function(e){gn(r,e)});var n,o={end:0};function l(){i.activeTouch&&(n=setTimeout(function(){i.activeTouch=null},1e3),(o=i.activeTouch).end=+new Date)}function s(e,t){if(null==t.left)return 1;var n=t.left-e.left,e=t.top-e.top;return 400<n*n+e*e}Si(i.scroller,"touchstart",function(e){var t;Oi(r,e)||function(e){if(1==e.touches.length){e=e.touches[0];return e.radiusX<=1&&e.radiusY<=1}}(e)||(clearTimeout(n),t=+new Date,i.activeTouch={start:t,moved:!1,prev:t-o.end<=300?o:null},1==e.touches.length&&(i.activeTouch.left=e.touches[0].pageX,i.activeTouch.top=e.touches[0].pageY))}),Si(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Si(i.scroller,"touchend",function(e){var t,n=i.activeTouch;n&&!Kt(i,e)&&null!=n.left&&!n.moved&&new Date-n.start<300&&(t=r.coordsChar(i.activeTouch,"page"),t=!n.prev||s(n,n.prev)?new Se(t,t):!n.prev.prev||s(n,n.prev.prev)?r.findWordAt(t):new Se(ie(t.line,0),Me(r.doc,ie(t.line+1,0))),r.setSelection(t.anchor,t.head),r.focus(),vi(e)),l()}),Si(i.scroller,"touchcancel",l),Si(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Qt(r,i.scroller.scrollTop),Jt(r,i.scroller.scrollLeft,!0),Mi(r,"scroll",r))}),Si(i.scroller,"mousewheel",function(e){rn(r,e)}),Si(i.scroller,"DOMMouseScroll",function(e){rn(r,e)}),Si(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(e){Oi(r,e)||wi(e)},over:function(e){Oi(r,e)||(function(e,t){var n=jt(e,t);if(!n)return;t=document.createDocumentFragment();Xe(e,n,t),e.display.dragCursor||(e.display.dragCursor=oo("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv));so(e.display.dragCursor,t)}(r,e),wi(e))},start:function(e){!function(e,t){if(v&&(!e.state.draggingText||+new Date-$t<100))return wi(t);if(Oi(e,t)||Kt(e.display,t))return;{var n;t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!a&&((n=oo("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),p&&n.parentNode.removeChild(n))}}(r,e)},drop:Dt(r,qt),leave:function(){Zt(r)}};var e=i.input.getField();Si(e,"keyup",function(e){hn.call(r,e)}),Si(e,"keydown",Dt(r,cn)),Si(e,"keypress",Dt(r,fn)),Si(e,"focus",Qi(dn,r)),Si(e,"blur",Qi(pn,r))}(this),function(){if(vo)return;(function(){var e;Si(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,mo(Vt)},100))}),Si(window,"blur",function(){mo(pn)})})(),vo=!0}(),Wt(this),this.curOp.forceUpdate=!0,Qr(this,n),t.autofocus&&!s||o.hasFocus()?setTimeout(Qi(dn,this),20):pn(this),zn)zn.hasOwnProperty(i)&&zn[i](this,t[i],Rn);B(this),t.finishInit&&t.finishInit(this);for(var l=0;l<Vn.length;++l)Vn[l](this);At(this),d&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function w(e,t,n){var r=this;this.input=n,r.scrollbarFiller=oo("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=oo("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=oo("div",null,"CodeMirror-code"),r.selectionDiv=oo("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=oo("div",null,"CodeMirror-cursors"),r.measure=oo("div",null,"CodeMirror-measure"),r.lineMeasure=oo("div",null,"CodeMirror-measure"),r.lineSpace=oo("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=oo("div",[oo("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=oo("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=oo("div",null,null,"position: absolute; height: "+Ei+"px; width: 1px;"),r.gutters=oo("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=oo("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=oo("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),v&&y<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),d||f&&s||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function x(e){e.doc.mode=b.getMode(e.options,e.doc.modeOption),C(e)}function C(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,_e(e,100),e.state.modeGen++,e.curOp&&zt(e)}function S(r){var i=St(r.display),o=r.options.lineWrapping,l=o&&Math.max(5,r.display.scroller.clientWidth/Lt(r.display)-3);return function(e){if(Sr(r.doc,e))return 0;var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;n++)e.widgets[n].height&&(t+=e.widgets[n].height);return o?t+(Math.ceil(e.text.length/l)||1)*i:t+i}}function L(e){var t=e.doc,n=S(e);t.iter(function(e){var t=n(e);t!=e.height&&ni(e,t)})}function T(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),dt(e)}function k(e){M(e),zt(e),setTimeout(function(){R(e)},20)}function M(e){var t=e.display.gutters,n=e.options.gutters;lo(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(oo("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",N(e)}function N(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function W(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=vr(r);){r=(i=t.find(0,!0)).from.line;n+=i.from.ch-i.to.ch}for(r=e;t=yr(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,n+=(r=i.to.line).text.length-i.to.ch}return n}function A(e){var n=e.display,e=e.doc;n.maxLine=Jr(e,e.first),n.maxLineLength=W(n.maxLine),n.maxLineChanged=!0,e.iter(function(e){var t=W(e);t>n.maxLineLength&&(n.maxLineLength=t,n.maxLine=e)})}function O(e){var t=Yi(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function D(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+et(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function H(e,t,n){this.cm=n;var r=this.vert=oo("div",[oo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=oo("div",[oo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(i),Si(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Si(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,v&&y<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function P(){}function E(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&fo(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new b.scrollbarModel[n.options.scrollbarStyle](function(e){n.display.wrapper.insertBefore(e,n.display.scrollbarFiller),Si(e,"mousedown",function(){n.state.focused&&setTimeout(function(){n.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){("horizontal"==t?Jt:Qt)(n,e)},n),n.display.scrollbars.addClass&&po(n.display.wrapper,n.display.scrollbars.addClass)}function I(e,t){t=t||D(e);var n=e.display.barWidth,r=e.display.barHeight;z(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&_(e),z(e,D(e)),n=e.display.barWidth,r=e.display.barHeight}function z(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function F(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop,r=Math.floor(r-Ze(e)),i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=ii(t,r),r=ii(t,i);return n&&n.ensure&&(i=n.ensure.from.line,n=n.ensure.to.line,i<o?r=ii(t,oi(Jr(t,o=i))+e.wrapper.clientHeight):Math.min(n,t.lastLine())>=r&&(o=ii(t,oi(Jr(t,n))-e.wrapper.clientHeight),r=n)),{from:o,to:Math.max(r,o+1)}}function R(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=U(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",l=0;l<n.length;l++)if(!n[l].hidden){e.options.fixedGutter&&n[l].gutter&&(n[l].gutter.style.left=o);var s=n[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function B(e){if(e.options.lineNumbers){var t=e.doc,n=G(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(oo("div",[oo("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),t=i.firstChild.offsetWidth,i=i.offsetWidth-t;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(t,r.lineGutter.offsetWidth-i)+1,r.lineNumWidth=r.lineNumInnerWidth+i,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",N(e),1}}}function G(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function U(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function V(e,t,n){var r=e.display;this.viewport=t,this.visible=F(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=tt(e),this.force=n,this.dims=q(e),this.events=[]}function K(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Rt(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Ut(e))return!1;B(e)&&(Rt(e),t.dims=q(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>l&&n.viewTo-l<20&&(l=Math.min(i,n.viewTo)),h&&(o=xr(e.doc,o),l=Cr(e.doc,l));i=o!=n.viewFrom||l!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=It(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=It(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Bt(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(It(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Bt(e,n))));r.viewTo=n}(e,o,l),n.viewOffset=oi(Jr(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";o=Ut(e);if(!i&&0==o&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;l=co();return 4<o&&(n.lineDiv.style.display="none"),function(n,e,t){var r=n.display,i=n.options.lineNumbers,o=r.lineDiv,l=o.firstChild;function s(e){var t=e.nextSibling;return d&&g&&n.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var a=r.view,u=r.viewFrom,c=0;c<a.length;c++){var h=a[c];if(!h.hidden)if(h.node&&h.node.parentNode==o){for(;l!=h.node;)l=s(l);var f=i&&null!=e&&e<=u&&h.lineNumber;h.changes&&(-1<Yi(h.changes,"gutter")&&(f=!1),Z(n,h,u,t)),f&&(lo(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(G(n.options,u)))),l=h.node.nextSibling}else{f=function(e,t,n,r){var i=J(e,t);t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass);i.textClass&&(t.textClass=i.textClass);return ee(t),te(e,t,n,r),ne(e,t,r),t.node}(n,h,u,t);o.insertBefore(f,l)}u+=h.size}for(;l;)l=s(l)}(e,n.updateLineNumbers,t.dims),4<o&&(n.lineDiv.style.display=""),n.renderedView=n.view,l&&co()!=l&&l.offsetHeight&&l.focus(),lo(n.cursorDiv),lo(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,i&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,_e(e,400)),!(n.updateLineNumbers=null)}function j(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=tt(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Qe(e.display)-nt(e),n.top)}),t.visible=F(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&K(e,t);r=!1){_(e);var i=D(e);Ke(e),Y(e,i),I(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function X(e,t){var n=new V(e,t);K(e,n)&&(_(e),j(e,n),t=D(e),Ke(e),Y(e,t),I(e,t),n.finish())}function Y(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var n=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=n+"px",e.display.gutters.style.height=Math.max(n+et(e),t.clientHeight)+"px"}function _(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o,l=t.view[r];if(!l.hidden){v&&y<8?(o=(i=l.node.offsetTop+l.node.offsetHeight)-n,n=i):o=(s=l.node.getBoundingClientRect()).bottom-s.top;var s=l.line.height-o;if(o<2&&(o=St(t)),(.001<s||s<-.001)&&(ni(l.line,o),$(l.line),l.rest))for(var a=0;a<l.rest.length;a++)$(l.rest[a])}}}function $(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function q(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)n[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[l]]=o.clientWidth;return{fixedPos:U(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Z(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?function(e,t){var n=t.text.className,e=J(e,t);t.text==t.node&&(t.node=e.pre);t.text.parentNode.replaceChild(e.pre,t.text),t.text=e.pre,e.bgClass!=t.bgClass||e.textClass!=t.textClass?(t.bgClass=e.bgClass,t.textClass=e.textClass,ee(t)):n&&(t.text.className=n)}(e,t):"gutter"==o?te(e,t,n,r):"class"==o?ee(t):"widget"==o&&function(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild;r;r=i){var i=r.nextSibling;"CodeMirror-linewidget"==r.className&&t.node.removeChild(r)}ne(e,t,n)}(e,t,r)}t.changes=null}function Q(e){return e.node==e.text&&(e.node=oo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),v&&y<8&&(e.node.style.zIndex=2)),e.node}function J(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Rr(e,t)}function ee(e){var t,n;(n=(t=e).bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass)&&(n+=" CodeMirror-linebackground"),t.background?n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null):n&&(r=Q(t),t.background=r.insertBefore(oo("div",null,n),r.firstChild)),e.line.wrapClass?Q(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var r=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=r||""}function te(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass&&(o=Q(t),t.gutterBackground=oo("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),o.insertBefore(t.gutterBackground,t.text));var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=Q(t),l=t.gutter=oo("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),o.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(oo("div",G(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var a=e.options.gutters[s],u=i.hasOwnProperty(a)&&i[a];u&&l.appendChild(oo("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[a]+"px; width: "+r.gutterWidth[a]+"px"))}}}function ne(e,t,n){if(re(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)re(e,t.rest[r],t,n,!1)}function re(e,t,n,r,i){if(t.widgets)for(var o=Q(n),l=0,s=t.widgets;l<s.length;++l){var a=s[l],u=oo("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),function(e,t,n,r){e.noHScroll&&((n.alignable||(n.alignable=[])).push(t),n=r.wrapperWidth,t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px");e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}(a,u,n,r),e.display.input.setUneditable(u),i&&a.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),Wi(a,"redraw")}}H.prototype=Zi({update:function(e){var t,n=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;return r?(this.vert.style.display="block",this.vert.style.bottom=n?i+"px":"0",t=e.viewHeight-(n?i:0),this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+t)+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),n?(this.horiz.style.display="block",this.horiz.style.right=r?i+"px":"0",this.horiz.style.left=e.barLeft+"px",t=e.viewWidth-e.barLeft-(r?i:0),this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+t+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?i:0,bottom:n?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=g&&!i?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Bi,this.disableVert=new Bi},enableZeroWidthBar:function(n,r){n.style.pointerEvents="auto",r.set(1e3,function e(){var t=n.getBoundingClientRect();document.elementFromPoint(t.left+1,t.bottom-1)!=n?n.style.pointerEvents="none":r.set(1e3,e)})},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},H.prototype),P.prototype=Zi({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},P.prototype),b.scrollbarModel={native:H,null:P},V.prototype.signal=function(e,t){Hi(e,t)&&this.events.push(arguments)},V.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Mi.apply(null,this.events[e])};var ie=b.Pos=function(e,t){if(!(this instanceof ie))return new ie(e,t);this.line=e,this.ch=t},oe=b.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};function le(e){return ie(e.line,e.ch)}function se(e,t){return oe(e,t)<0?t:e}function ae(e,t){return oe(e,t)<0?e:t}function ue(e){e.state.focused||(e.display.input.focus(),dn(e))}var ce=null;function he(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r=r||o.sel;var l=e.state.pasteIncoming||"paste"==i,s=o.splitLines(t),a=null;if(l&&1<r.ranges.length)if(ce&&ce.join("\n")==t){if(r.ranges.length%ce.length==0)for(var a=[],u=0;u<ce.length;u++)a.push(o.splitLines(ce[u]))}else s.length==r.ranges.length&&(a=_i(s,function(e){return[e]}));for(u=r.ranges.length-1;0<=u;u--){var c=r.ranges[u],h=c.from(),f=c.to();c.empty()&&(n&&0<n?h=ie(h.line,h.ch-n):e.state.overwrite&&!l&&(f=ie(f.line,Math.min(Jr(o,f.line).text.length,f.ch+ji(s).length))));var d=e.curOp.updateInput,f={from:h,to:f,text:a?a[u%a.length]:s,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};xn(e.doc,f),Wi(e,"inputRead",e,f)}t&&!l&&de(e,t),Wn(e),e.curOp.updateInput=d,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function fe(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");return n&&(e.preventDefault(),t.isReadOnly()||t.options.disableInput||Ot(t,function(){he(t,n,0,null,"paste")}),1)}function de(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;0<=r;r--){var i=n.ranges[r];if(!(100<i.head.ch||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(-1<t.indexOf(o.electricChars.charAt(s))){l=On(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Jr(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=On(e,i.head.line,"smart"));l&&Wi(e,"electricInput",e,i.head.line)}}}function pe(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,i={anchor:ie(i,0),head:ie(i+1,0)};n.push(i),t.push(e.getRange(i.anchor,i.head))}return{text:t,ranges:n}}function ge(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function me(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Bi,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function ve(){var e=oo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=oo("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return d?e.style.width="1000px":e.setAttribute("wrap","off"),l&&(e.style.border="1px solid black"),ge(e),t}function ye(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Bi,this.gracePeriod=!1}function be(e,t){var n=ot(e,t.line);if(!n||n.hidden)return null;var r=Jr(e.doc,t.line),e=rt(n,r,t.line),n=li(r),r="left";n&&(r=Ho(n,t.ch)%2?"right":"left");r=ct(e.map,t.ch,r);return r.offset="right"==r.collapse?r.end:r.start,r}function we(e,t){return t&&(e.bad=!0),e}function xe(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return we(e.clipPos(ie(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return function(u,e,t){var n=u.text.firstChild,r=!1;if(!e||!uo(n,e))return we(ie(ri(u.line),0),!0);if(e==n&&(r=!0,e=n.childNodes[t],t=0,!e)){var i=u.rest?ji(u.rest):u.line;return we(ie(ri(i),i.text.length),r)}var i=3==e.nodeType?e:null,o=e;i||1!=e.childNodes.length||3!=e.firstChild.nodeType||(i=e.firstChild,t=t&&i.nodeValue.length);for(;o.parentNode!=n;)o=o.parentNode;var c=u.measure,h=c.maps;function l(e,t,n){for(var r=-1;r<(h?h.length:0);r++)for(var i=r<0?c.map:h[r],o=0;o<i.length;o+=3){var l=i[o+2];if(l==e||l==t){var s=ri(r<0?u.line:u.rest[r]),a=i[o]+n;return(n<0||l!=e)&&(a=i[o+(n?1:0)]),ie(s,a)}}}var s=l(i,o,t);if(s)return we(s,r);for(var a=o.nextSibling,f=i?i.nodeValue.length-t:0;a;a=a.nextSibling){if(s=l(a,a.firstChild,0))return we(ie(s.line,s.ch-f),r);f+=a.textContent.length}for(var d=o.previousSibling,f=t;d;d=d.previousSibling){if(s=l(d,d.firstChild,-1))return we(ie(s.line,s.ch+f),r);f+=a.textContent.length}}(o,t,n)}}function Ce(e,t){this.ranges=e,this.primIndex=t}function Se(e,t){this.anchor=e,this.head=t}function Le(e,t){var n=e[t];e.sort(function(e,t){return oe(e.from(),t.from())}),t=Yi(e,n);for(var r=1;r<e.length;r++){var i,o,l=e[r],s=e[r-1];0<=oe(s.to(),l.from())&&(i=ae(s.from(),l.from()),o=se(s.to(),l.to()),s=s.empty()?l.from()==l.head:s.from()==s.head,r<=t&&--t,e.splice(--r,2,new Se(s?o:i,s?i:o)))}return new Ce(e,t)}function Te(e,t){return new Ce([new Se(e,t||e)],0)}function ke(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Me(e,t){if(t.line<e.first)return ie(e.first,0);var n=e.first+e.size-1;return t.line>n?ie(n,Jr(e,n).text.length):(e=Jr(e,(n=t).line).text.length,null==(t=n.ch)||e<t?ie(n.line,e):t<0?ie(n.line,0):n)}function Ne(e,t){return t>=e.first&&t<e.first+e.size}function We(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Me(e,t[r]);return n}function Ae(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){e=t.anchor;return r&&((t=oe(n,e)<0)!=oe(r,e)<0?(e=n,n=r):t!=oe(n,r)<0&&(n=r)),new Se(e,n)}return new Se(r||n,n)}function Oe(e,t,n,r){Ie(e,new Ce([Ae(e,e.sel.primary(),t,n)],0),r)}function De(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=Ae(e,e.sel.ranges[i],t[i],null);Ie(e,Le(r,e.sel.primIndex),n)}function He(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Ie(e,Le(i,e.sel.primIndex),r)}function Pe(e,t,n,r){Ie(e,Te(t,n),r)}function Ee(e,t,n){var r=e.history.done,i=ji(r);i&&i.ranges?ze(e,r[r.length-1]=t,n):Ie(e,t,n)}function Ie(e,t,n){ze(e,t,n),function(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){t=t.charAt(0);return"*"==t||"+"==t&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,ji(i.done),t))?i.done[i.done.length-1]=t:hi(t,i.done);i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&ui(i.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function ze(e,t,n){var r,i;(Hi(e,"beforeSelectionChange")||e.cm&&Hi(e.cm,"beforeSelectionChange"))&&(r=e,i=n,i={ranges:(o=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new Se(Me(r,e[t].anchor),Me(r,e[t].head))},origin:i&&i.origin},Mi(r,"beforeSelectionChange",r,i),r.cm&&Mi(r.cm,"beforeSelectionChange",r.cm,i),t=i.ranges!=o.ranges?Le(i.ranges,i.ranges.length-1):o);var o=n&&n.bias||(oe(t.primary().head,e.sel.primary().head)<0?-1:1);Fe(e,Be(e,t,o,!0)),n&&!1===n.scroll||!e.cm||Wn(e.cm)}function Fe(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Di(e.cm)),Wi(e,"cursorActivity",e))}function Re(e){Fe(e,Be(e,e.sel,null,!1))}function Be(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],a=Ue(e,l.anchor,s&&s.anchor,n,r),s=Ue(e,l.head,s&&s.head,n,r);!i&&a==l.anchor&&s==l.head||((i=i||t.ranges.slice(0,o))[o]=new Se(a,s))}return i?Le(i,t.primIndex):t}function Ge(e,t,n,r,i){var o=Jr(e,t.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],a=s.marker;if((null==s.from||(a.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(a.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(Mi(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(a.atomic){if(n){var u,c=a.find(r<0?1:-1);if((c=(r<0?a.inclusiveRight:a.inclusiveLeft)?Ve(e,c,-r,o):c)&&c.line==t.line&&(u=oe(c,n))&&(r<0?u<0:0<u))return Ge(e,c,t,r,i)}c=a.find(r<0?-1:1);return(c=(r<0?a.inclusiveLeft:a.inclusiveRight)?Ve(e,c,r,o):c)?Ge(e,c,t,r,i):null}}}return t}function Ue(e,t,n,r,i){r=r||1,r=Ge(e,t,n,r,i)||!i&&Ge(e,t,n,r,!0)||Ge(e,t,n,-r,i)||!i&&Ge(e,t,n,-r,!0);return r||(e.cantEdit=!0,ie(e.first,0))}function Ve(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?Me(e,ie(t.line-1)):null:0<n&&t.ch==(r||Jr(e,t.line)).text.length?t.line<e.first+e.size-1?ie(t.line+1,0):null:new ie(t.line,t.ch+n)}function Ke(e){e.display.input.showSelection(e.display.input.prepareSelection())}function je(e,t){for(var n,r,i=e.doc,o={},l=o.cursors=document.createDocumentFragment(),s=o.selection=document.createDocumentFragment(),a=0;a<i.sel.ranges.length;a++)!1===t&&a==i.sel.primIndex||(((r=(n=i.sel.ranges[a]).empty())||e.options.showCursorWhenSelecting)&&Xe(e,n.head,l),r||function(i,e,t){var n=i.display,o=i.doc,l=document.createDocumentFragment(),r=Je(i.display),d=r.left,p=Math.max(n.sizerWidth,tt(i)-n.sizer.offsetLeft)-r.right;function g(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),l.appendChild(oo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?p-e:n)+"px; height: "+(r-t)+"px"))}function s(n,s,a){var u,c,r=Jr(o,n),h=r.text.length;function f(e,t){return yt(i,ie(n,e),"div",r,t)}return function(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<n&&l.to>t||t==n&&l.to==t)&&(r(Math.max(l.from,t),Math.min(l.to,n),1==l.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}(li(r),s||0,null==a?h:a,function(e,t,n){var r,i,o,l=f(e,"left");e==t?r=i=(o=l).left:(o=f(t-1,"right"),"rtl"==n&&(n=l,l=o,o=n),r=l.left,i=o.right),null==s&&0==e&&(r=d),3<o.top-l.top&&(g(r,l.top,null,l.bottom),r=d,l.bottom<o.top&&g(r,l.bottom,null,o.top)),null==a&&t==h&&(i=p),(!u||l.top<u.top||l.top==u.top&&l.left<u.left)&&(u=l),(!c||o.bottom>c.bottom||o.bottom==c.bottom&&o.right>c.right)&&(c=o),g(r=r<d+1?d:r,o.top,i-r,o.bottom)}),{start:u,end:c}}var a=e.from(),n=e.to();a.line==n.line?s(a.line,a.ch,n.ch):(r=Jr(o,a.line),e=Jr(o,n.line),e=wr(r)==wr(e),r=s(a.line,a.ch,e?r.text.length+1:null).end,n=s(n.line,e?0:null,n.ch).start,e&&(r.top<n.top-2?(g(r.right,r.top,null,r.bottom),g(d,n.top,n.left,n.bottom)):g(r.right,r.top,n.left-r.right,r.bottom)),r.bottom<n.top&&g(d,r.bottom,null,n.top));t.appendChild(l)}(e,n,s));return o}function Xe(e,t,n){var r=bt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),t=n.appendChild(oo("div"," ","CodeMirror-cursor"));t.style.left=r.left+"px",t.style.top=r.top+"px",t.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other&&((n=n.appendChild(oo("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",n.style.left=r.other.left+"px",n.style.top=r.other.top+"px",n.style.height=.85*(r.other.bottom-r.other.top)+"px")}function Ye(e){var t,n;e.state.focused&&(t=e.display,clearInterval(t.blinker),n=!0,t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden"))}function _e(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Qi($e,e))}function $e(s){var a,u,c,h=s.doc;h.frontier<h.first&&(h.frontier=h.first),h.frontier>=s.display.viewTo||(a=+new Date+s.options.workTime,u=jn(h.mode,qe(s,h.frontier)),c=[],h.iter(h.frontier,Math.min(h.first+h.size,s.display.viewTo+500),function(e){if(h.frontier>=s.display.viewFrom){var t=e.styles,n=e.text.length>s.options.maxHighlightLength,r=Hr(s,e,n?jn(h.mode,u):u,!0);e.styles=r.styles;var i=e.styleClasses,r=r.classes;r?e.styleClasses=r:i&&(e.styleClasses=null);for(var o=!t||t.length!=e.styles.length||i!=r&&(!i||!r||i.bgClass!=r.bgClass||i.textClass!=r.textClass),l=0;!o&&l<t.length;++l)o=t[l]!=e.styles[l];o&&c.push(h.frontier),e.stateAfter=n?u:jn(h.mode,u)}else e.text.length<=s.options.maxHighlightLength&&Er(s,e.text,u),e.stateAfter=h.frontier%5==0?jn(h.mode,u):null;if(++h.frontier,+new Date>a)return _e(s,s.options.workDelay),!0}),c.length&&Ot(s,function(){for(var e=0;e<c.length;e++)Ft(s,c[e],"text")}))}function qe(n,r,e){var i=n.doc,o=n.display;if(!i.mode.startState)return!0;var l=function(e,t,n){for(var r,i,o=e.doc,l=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;l<s;--s){if(s<=o.first)return o.first;var a=Jr(o,s-1);if(a.stateAfter&&(!n||s<=o.frontier))return s;a=Gi(a.text,null,e.options.tabSize);(null==i||a<r)&&(i=s-1,r=a)}return i}(n,r,e),s=(s=l>i.first&&Jr(i,l-1).stateAfter)?jn(i.mode,s):Xn(i.mode);return i.iter(l,r,function(e){Er(n,e.text,s);var t=l==r-1||l%5==0||l>=o.viewFrom&&l<o.viewTo;e.stateAfter=t?jn(i.mode,s):null,++l}),e&&(i.frontier=l),s}function Ze(e){return e.lineSpace.offsetTop}function Qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Je(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=so(e.measure,oo("pre","x")),t=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,t={left:parseInt(t.paddingLeft),right:parseInt(t.paddingRight)};return isNaN(t.left)||isNaN(t.right)||(e.cachedPaddingH=t),t}function et(e){return Ei-e.display.nativeBarWidth}function tt(e){return e.display.scroller.clientWidth-et(e)-e.display.barWidth}function nt(e){return e.display.scroller.clientHeight-et(e)-e.display.barHeight}function rt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(r=0;r<e.rest.length;r++)if(ri(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function it(e,t,n,r){return st(e,lt(e,t),n,r)}function ot(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Bt(e,t)];e=e.display.externalMeasured;return e&&t>=e.lineN&&t<e.lineN+e.size?e:void 0}function lt(e,t){var n,r,i=ri(t),o=ot(e,i);o&&!o.text?o=null:o&&o.changes&&(Z(e,o,i,q(e)),e.curOp.forceUpdate=!0),o||(n=e,e=ri(r=wr(r=t)),(r=n.display.externalMeasured=new Et(n.doc,r,e)).lineN=e,e=r.built=Rr(n,r),r.text=e.pre,so(n.display.lineMeasure,e.pre),o=r);i=rt(o,t,i);return{line:t,view:o,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function st(e,t,n,r,i){var o,l=(n=t.before?-1:n)+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,e=r&&tt(e);if(!t.measure.heights||r&&t.measure.width!=e){var i=t.measure.heights=[];if(r){t.measure.width=e;for(var o=t.text.firstChild.getClientRects(),l=0;l<o.length-1;l++){var s=o[l],a=o[l+1];2<Math.abs(s.bottom-a.bottom)&&i.push((s.bottom+a.top)/2-n.top)}}i.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=ct(t.map,n,r),l=o.node,s=o.start,a=o.end,u=o.collapse;if(3==l.nodeType){for(var c,h=0;h<4;h++){for(;s&&io(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+a<o.coverEnd&&io(t.line.text.charAt(o.coverStart+a));)++a;if((i=v&&y<9&&0==s&&a==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():v&&e.options.lineWrapping?(c=ao(l,s,a).getClientRects()).length?c["right"==r?c.length-1:0]:ut:ao(l,s,a).getBoundingClientRect()||ut).left||i.right||0==s)break;a=s,s-=1,u="right"}v&&y<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Lo)return Lo;var t=so(e,oo("span","x")),e=t.getBoundingClientRect(),t=ao(t,0,1).getBoundingClientRect();return Lo=1<Math.abs(e.left-t.left)}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,e=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*e,bottom:t.bottom*e}}(e.display.measure,i))}else 0<s&&(u=r="right"),i=e.options.lineWrapping&&1<(c=l.getClientRects()).length?c["right"==r?c.length-1:0]:l.getBoundingClientRect();!(v&&y<9)||s||i&&(i.left||i.right)||(m=l.parentNode.getClientRects()[0],i=m?{left:m.left,right:m.left+Lt(e.display),top:m.top,bottom:m.bottom}:ut);for(var f=i.top-t.rect.top,d=i.bottom-t.rect.top,p=(f+d)/2,g=t.view.measure.heights,h=0;h<g.length-1&&!(p<g[h]);h++);var n=h?g[h-1]:0,m=g[h],m={left:("right"==u?i.right:i.left)-t.rect.left,right:("left"==u?i.left:i.right)-t.rect.left,top:n,bottom:m};i.left||i.right||(m.bogus=!0);e.options.singleCursorHeightPerLine||(m.rtop=f,m.rbottom=d);return m}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}me.prototype=Zi({init:function(t){var n=this,r=this.cm,e=this.wrapper=ve(),i=this.textarea=e.firstChild;function o(e){if(!Oi(r,e)){if(r.somethingSelected())ce=r.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,i.value=ce.join("\n"),Xi(i));else{if(!r.options.lineWiseCopyCut)return;var t=pe(r);ce=t.text,"cut"==e.type?r.setSelections(t.ranges,null,zi):(n.prevInput="",i.value=t.text.join("\n"),Xi(i))}"cut"==e.type&&(r.state.cutIncoming=!0)}}t.wrapper.insertBefore(e,t.wrapper.firstChild),l&&(i.style.width="0px"),Si(i,"input",function(){v&&9<=y&&n.hasSelection&&(n.hasSelection=null),n.poll()}),Si(i,"paste",function(e){Oi(r,e)||fe(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),Si(i,"cut",o),Si(i,"copy",o),Si(t.scroller,"paste",function(e){Kt(t,e)||Oi(r,e)||(r.state.pasteIncoming=!0,n.focus())}),Si(t.lineSpace,"selectstart",function(e){Kt(t,e)||vi(e)}),Si(i,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Si(i,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},prepareSelection:function(){var e,t=this.cm,n=t.display,r=t.doc,i=je(t);return t.options.moveInputWithCursor&&(e=bt(t,r.sel.primary().head,"div"),t=n.wrapper.getBoundingClientRect(),r=n.lineDiv.getBoundingClientRect(),i.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,e.top+r.top-t.top)),i.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,e.left+r.left-t.left))),i},showSelection:function(e){var t=this.cm.display;so(t.cursorDiv,e.cursors),so(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){var t,n,r,i;this.contextMenuPending||(n=(t=this.cm).doc,t.somethingSelected()?(this.prevInput="",r=n.sel.primary(),i=(r=So&&(100<r.to().line-r.from().line||1e3<(i=t.getSelection()).length))?"-":i||t.getSelection(),this.textarea.value=i,t.state.focused&&Xi(this.textarea),v&&9<=y&&(this.hasSelection=i)):e||(this.prevInput=this.textarea.value="",v&&9<=y&&(this.hasSelection=null)),this.inaccurateSelection=r)},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!s||co()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))})},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||Co(t)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=t.value;if(r==n&&!e.somethingSelected())return!1;if(v&&9<=y&&this.hasSelection===r||g&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var i=r.charCodeAt(0);if(8203!=i||n||(n="​"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var o=0,l=Math.min(n.length,r.length);o<l&&n.charCodeAt(o)==r.charCodeAt(o);)++o;var s=this;return Ot(e,function(){he(e,r.slice(o),n.length-o,null,s.composing?"*compose":null),1e3<r.length||-1<r.indexOf("\n")?t.value=s.prevInput="":s.prevInput=r,s.composing&&(s.composing.range.clear(),s.composing.range=e.markText(s.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){v&&9<=y&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var n,t,r,i=this,o=i.cm,l=o.display,s=i.textarea,a=jt(o,e),u=l.scroller.scrollTop;function c(){var e,t;null!=s.selectionStart&&(t="​"+((e=o.somethingSelected())?s.value:""),s.value="⇚",s.value=t,i.prevInput=e?"":"​",s.selectionStart=1,s.selectionEnd=t.length,l.selForContextMenu=o.doc.sel)}function h(){var e,t;i.contextMenuPending=!1,i.wrapper.style.position="relative",s.style.cssText=n,v&&y<9&&l.scrollbars.setScrollTop(l.scroller.scrollTop=u),null!=s.selectionStart&&((!v||v&&y<9)&&c(),e=0,t=function(){l.selForContextMenu==o.doc.sel&&0==s.selectionStart&&0<s.selectionEnd&&"​"==i.prevInput?Dt(o,Yn.selectAll)(o):e++<10?l.detectingSelectAll=setTimeout(t,500):l.input.reset()},l.detectingSelectAll=setTimeout(t,200))}a&&!p&&(o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(a)&&Dt(o,Ie)(o.doc,Te(a),zi),n=s.style.cssText,i.wrapper.style.position="absolute",s.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(v?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",d&&(t=window.scrollY),l.input.focus(),d&&window.scrollTo(null,t),l.input.reset(),o.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=!0,l.selForContextMenu=o.doc.sel,clearTimeout(l.detectingSelectAll),v&&9<=y&&c(),m?(wi(e),r=function(){ki(window,"mouseup",r),setTimeout(h,20)},Si(window,"mouseup",r)):setTimeout(h,50))},readOnlyChanged:function(e){e||this.reset()},setUneditable:$i,needsContentAttribute:!1},me.prototype),ye.prototype=Zi({init:function(e){var r=this,i=r.cm,e=r.div=e.lineDiv;function t(e){if(!Oi(i,e)){if(i.somethingSelected())ce=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=pe(i);ce=t.text,"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,zi),i.replaceSelection("",null,"cut")})}var n,r;e.clipboardData&&!l?(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",ce.join("\n"))):(e=(n=ve()).firstChild,i.display.lineSpace.insertBefore(n,i.display.lineSpace.firstChild),e.value=ce.join("\n"),r=document.activeElement,Xi(e),setTimeout(function(){i.display.lineSpace.removeChild(n),r.focus()},50))}}ge(e),Si(e,"paste",function(e){Oi(i,e)||fe(e,i)}),Si(e,"compositionstart",function(e){var t,n=e.data;r.composing={sel:i.doc.sel,data:n,startData:n},n&&(t=i.doc.sel.primary(),-1<(e=i.getLine(t.head.line).indexOf(n,Math.max(0,t.head.ch-n.length)))&&e<=t.head.ch&&(r.composing.sel=Te(ie(t.head.line,e),ie(t.head.line,e+n.length))))}),Si(e,"compositionupdate",function(e){r.composing.data=e.data}),Si(e,"compositionend",function(e){var t=r.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||r.applyComposition(t),r.composing==t&&(r.composing=null)},50))}),Si(e,"touchstart",function(){r.forceCompositionEnd()}),Si(e,"input",function(){r.composing||!i.isReadOnly()&&r.pollContent()||Ot(r.cm,function(){zt(i)})}),Si(e,"copy",t),Si(e,"cut",t)},prepareSelection:function(){var e=je(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=xe(this.cm,e.anchorNode,e.anchorOffset),r=xe(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=oe(ae(n,r),t.from())||0!=oe(se(n,r),t.to())){var i=be(this.cm,t.from()),o=be(this.cm,t.to());if(i||o){n=this.cm.display.view,r=e.rangeCount&&e.getRangeAt(0);i?o||(o={node:(t=(t=n[n.length-1].measure).maps?t.maps[t.maps.length-1]:t.map)[t.length-1],offset:t[t.length-2]-t[t.length-3]}):i={node:n[0].measure.map[2],offset:0};try{var l=ao(i.node,i.offset,o.offset,o.node)}catch(e){}l&&(!f&&this.cm.state.focused?(e.collapse(i.node,i.offset),l.collapsed||e.addRange(l)):(e.removeAllRanges(),e.addRange(l)),r&&null==e.anchorNode?e.addRange(r):f&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){so(this.cm.display.cursorDiv,e.cursors),so(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;e=e.getRangeAt(0).commonAncestorContainer;return uo(this.div,e)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var t=this;this.selectionInEditor()?this.pollSelection():Ot(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){var e,t,n,r;this.composing||this.gracePeriod||!this.selectionChanged()||(e=window.getSelection(),t=this.cm,this.rememberSelection(),n=xe(t,e.anchorNode,e.anchorOffset),r=xe(t,e.focusNode,e.focusOffset),n&&r&&Ot(t,function(){Ie(t.doc,Te(n,r),zi),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))},pollContent:function(){var e,t=this.cm,n=t.display,r=t.doc.sel.primary(),i=r.from(),r=r.to();if(i.line<n.viewFrom||r.line>n.viewTo-1)return!1;m=i.line==n.viewFrom||0==(m=Bt(t,i.line))?(e=ri(n.view[0].line),n.view[0].node):(e=ri(n.view[m].line),n.view[m-1].node.nextSibling);var o,r=Bt(t,r.line);r=r==n.view.length-1?(o=n.viewTo-1,n.lineDiv.lastChild):(o=ri(n.view[r+1].line)-1,n.view[r+1].node.previousSibling);for(var l=t.doc.splitLines(function(l,e,t,s,a){var u="",c=!1,h=l.doc.lineSeparator();for(;!function e(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(u+=n);if(n=t.getAttribute("cm-marker"))(n=l.findMarks(ie(s,0),ie(a+1,0),(o=+n,function(e){return e.id==o}))).length&&(i=n[0].find())&&(u+=ei(l.doc,i.from,i.to).join(h));else if("false"!=t.getAttribute("contenteditable")){for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r]);/^(pre|div|p)$/i.test(t.nodeName)&&(c=!0)}}else{var i;3!=t.nodeType||(i=t.nodeValue)&&(c&&(u+=h,c=!1),u+=i)}var o}(e),e!=t;)e=e.nextSibling;return u}(t,m,r,e,o)),s=ei(t.doc,ie(e,0),ie(o,Jr(t.doc,o).text.length));1<l.length&&1<s.length;)if(ji(l)==ji(s))l.pop(),s.pop(),o--;else{if(l[0]!=s[0])break;l.shift(),s.shift(),e++}for(var a=0,u=0,c=l[0],h=s[0],f=Math.min(c.length,h.length);a<f&&c.charCodeAt(a)==h.charCodeAt(a);)++a;for(var d=ji(l),p=ji(s),g=Math.min(d.length-(1==l.length?a:0),p.length-(1==s.length?a:0));u<g&&d.charCodeAt(d.length-u-1)==p.charCodeAt(p.length-u-1);)++u;l[l.length-1]=d.slice(0,d.length-u),l[0]=l[0].slice(a);var m=ie(e,a),r=ie(o,s.length?ji(s).length-u:0);return 1<l.length||l[0]||oe(m,r)?(kn(t.doc,l,m,r,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Dt(this.cm,zt)(this.cm):e.data&&e.data!=e.startData&&Dt(this.cm,he)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Dt(this.cm,he)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:$i,resetPosition:$i,needsContentAttribute:!0},ye.prototype),b.inputStyles={textarea:me,contenteditable:ye},Ce.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=oe(n.anchor,r.anchor)||0!=oe(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Se(le(this.ranges[t].anchor),le(this.ranges[t].head));return new Ce(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t=t||e;for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(0<=oe(t,r.from())&&oe(e,r.to())<=0)return n}return-1}},Se.prototype={from:function(){return ae(this.anchor,this.head)},to:function(){return se(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var at,ut={left:0,right:0,top:0,bottom:0};function ct(e,t,n){for(var r,i,o,l,s=0;s<e.length;s+=3){var a=e[s],u=e[s+1];if(t<a?(i=0,o=1,l="left"):t<u?o=(i=t-a)+1:(s==e.length-3||t==u&&e[s+3]>t)&&(i=(o=u-a)-1,u<=t&&(l="right")),null!=i){if(r=e[s+2],a==u&&n==(r.insertLeft?"left":"right")&&(l=n),"left"==n&&0==i)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)r=e[2+(s-=3)],l="left";if("right"==n&&i==u-a)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)r=e[(s+=3)+2],l="right";break}}return{node:r,start:i,end:o,collapse:l,coverStart:a,coverEnd:u}}function ht(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ft(e){e.display.externalMeasure=null,lo(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ht(e.display.view[t])}function dt(e){ft(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function pt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function gt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function mt(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i){var o;t.widgets[i].above&&(o=kr(t.widgets[i]),n.top+=o,n.bottom+=o)}if("line"==r)return n;r=r||"local";var l=oi(t);return"local"==r?l+=Ze(e.display):l-=e.display.viewOffset,"page"!=r&&"window"!=r||(l+=(e=e.display.lineSpace.getBoundingClientRect()).top+("window"==r?0:gt()),r=e.left+("window"==r?0:pt()),n.left+=r,n.right+=r),n.top+=l,n.bottom+=l,n}function vt(e,t,n){if("div"==n)return t;var r=t.left,t=t.top;"page"==n?(r-=pt(),t-=gt()):"local"!=n&&n||(r+=(n=e.display.sizer.getBoundingClientRect()).left,t+=n.top);e=e.display.lineSpace.getBoundingClientRect();return{left:r-e.left,top:t-e.top}}function yt(e,t,n,r,i){return mt(e,r=r||Jr(e.doc,t.line),it(e,r,t.ch,i),n)}function bt(n,e,r,i,o,l){function s(e,t){e=st(n,o,e,t?"right":"left",l);return t?e.left=e.right:e.right=e.left,mt(n,i,e,r)}function t(e,t){var n=a[t],r=n.level%2;return e==Mo(n)&&t&&n.level<a[t-1].level?(e=No(n=a[--t])-(n.level%2?0:1),r=!0):e==No(n)&&t<a.length-1&&n.level<a[t+1].level&&(e=Mo(n=a[++t])-n.level%2,r=!1),r&&e==n.to&&e>n.from?s(e-1):s(e,r)}i=i||Jr(n.doc,e.line),o=o||lt(n,i);var a=li(i),u=e.ch;if(!a)return s(u);e=t(u,Ho(a,u));return null!=To&&(e.other=t(u,To)),e}function wt(e,t){var n=0,t=Me(e.doc,t);e.options.lineWrapping||(n=Lt(e.display)*t.ch);t=Jr(e.doc,t.line),e=oi(t)+Ze(e.display);return{left:n,right:n,top:e,bottom:e+t.height}}function xt(e,t,n,r){t=ie(e,t);return t.xRel=r,n&&(t.outside=!0),t}function Ct(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return xt(r.first,0,!0,-1);var i=ii(r,n),o=r.first+r.size-1;if(o<i)return xt(r.first+r.size-1,Jr(r,o).text.length,!0,1);t<0&&(t=0);for(var l=Jr(r,i);;){var s=function(t,n,r,e,i){var o=i-oi(n),l=!1,s=2*t.display.wrapper.clientWidth,a=lt(t,n);function u(e){e=bt(t,ie(r,e),"line",n,a);return l=!0,o>e.bottom?e.left-s:o<e.top?e.left+s:(l=!1,e.left)}var c=li(n),h=n.text.length,f=Wo(n),d=Ao(n),p=u(f),g=l,m=u(d),v=l;if(m<e)return xt(r,d,v,1);for(;;){if(c?d==f||d==Eo(n,f,1):d-f<=1){for(var y=e<p||e-p<=m-e?f:d,b=e-(y==f?p:m);io(n.text.charAt(y));)++y;return xt(r,y,y==f?g:v,b<-1?-1:1<b?1:0)}var w=Math.ceil(h/2),x=f+w;if(c){x=f;for(var C=0;C<w;++C)x=Eo(n,x,1)}b=u(x);e<b?(d=x,m=b,(v=l)&&(m+=1e3),h=w):(f=x,p=b,g=l,h-=w)}}(e,l,i,t,n),a=yr(l),u=a&&a.find(0,!0);if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&0<s.xRel))return s;i=ri(l=u.to.line)}}function St(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==at){at=oo("pre");for(var t=0;t<49;++t)at.appendChild(document.createTextNode("x")),at.appendChild(oo("br"));at.appendChild(document.createTextNode("x"))}so(e.measure,at);var n=at.offsetHeight/50;return 3<n&&(e.cachedTextHeight=n),lo(e.measure),n||1}function Lt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=oo("span","xxxxxxxxxx"),n=oo("pre",[t]);so(e.measure,n);t=t.getBoundingClientRect(),t=(t.right-t.left)/10;return 2<t&&(e.cachedCharWidth=t),t||10}var Tt,kt,Mt=null,Nt=0;function Wt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Nt},Mt?Mt.ops.push(e.curOp):e.curOp.ownsGroup=Mt={ops:[e.curOp],delayedCallbacks:[]}}function At(e){var t=e.curOp.ownsGroup;if(t)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(t)}finally{Mt=null;for(var n=0;n<t.ops.length;n++)t.ops[n].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)!function(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=et(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=et(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&A(t);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new V(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}(t[n]);for(n=0;n<t.length;n++)!function(e){e.updatedDisplay=e.mustUpdate&&K(e.cm,e.update)}(t[n]);for(n=0;n<t.length;n++)!function(e){var t=e.cm,n=t.display;e.updatedDisplay&&_(t);e.barMeasure=D(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=it(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+et(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-tt(t)));(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}(t[n]);for(n=0;n<t.length;n++)!function(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Jt(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);e.preparedSelection&&t.display.input.showSelection(e.preparedSelection);e.updatedDisplay&&Y(t,e.barMeasure);!e.updatedDisplay&&e.startHeight==t.doc.height||I(t,e.barMeasure);e.selectionChanged&&Ye(t);t.state.focused&&e.updateInput&&t.display.input.reset(e.typing);!e.focus||e.focus!=co()||document.hasFocus&&!document.hasFocus()||ue(e.cm)}(t[n]);for(n=0;n<t.length;n++)!function(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&j(t,e.update);null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null);null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop);null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-tt(t),e.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,R(t));{var i;e.scrollToPos&&(i=function(e,t,n,r){null==r&&(r=0);for(var i=0;i<5;i++){var o=!1,l=bt(e,t),s=n&&n!=t?bt(e,n):l,a=Mn(e,Math.min(l.left,s.left),Math.min(l.top,s.top)-r,Math.max(l.left,s.left),Math.max(l.bottom,s.bottom)+r),u=e.doc.scrollTop,s=e.doc.scrollLeft;if(null!=a.scrollTop&&(Qt(e,a.scrollTop),1<Math.abs(e.doc.scrollTop-u)&&(o=!0)),null!=a.scrollLeft&&(Jt(e,a.scrollLeft),1<Math.abs(e.doc.scrollLeft-s)&&(o=!0)),!o)break}return l}(t,Me(r,e.scrollToPos.from),Me(r,e.scrollToPos.to),e.scrollToPos.margin),e.scrollToPos.isCursor&&t.state.focused&&function(e,t){if(Oi(e,"scrollCursorIntoView"))return;var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);null==i||u||(t=oo("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-Ze(e.display))+"px; height: "+(t.bottom-t.top+et(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;"),e.display.lineSpace.appendChild(t),t.scrollIntoView(i),e.display.lineSpace.removeChild(t))}(t,i))}var o=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Mi(o[s],"hide");if(l)for(s=0;s<l.length;++s)l[s].lines.length&&Mi(l[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop);e.changeObjs&&Mi(t,"changes",t,e.changeObjs);e.update&&e.update.finish()}(t[n])}(t)}}function Ot(e,t){if(e.curOp)return t();Wt(e);try{return t()}finally{At(e)}}function Dt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Wt(e);try{return t.apply(e,arguments)}finally{At(e)}}}function Ht(e){return function(){if(this.curOp)return e.apply(this,arguments);Wt(this);try{return e.apply(this,arguments)}finally{At(this)}}}function Pt(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Wt(e);try{return t.apply(this,arguments)}finally{At(e)}}}function Et(e,t,n){this.line=t,this.rest=function(e){var t,n;for(;t=yr(e);)e=t.find(1,!0).line,(n=n||[]).push(e);return n}(t),this.size=this.rest?ri(ji(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Sr(e,t)}function It(e,t,n){for(var r=[],i=t;i<n;i=l){var o=new Et(e.doc,Jr(e.doc,i),i),l=i+o.size;r.push(o)}return r}function zt(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r=r||0;var i,o,l=e.display;r&&n<l.viewTo&&(null==l.updateLineNumbers||l.updateLineNumbers>t)&&(l.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=l.viewTo?h&&xr(e.doc,t)<l.viewTo&&Rt(e):n<=l.viewFrom?h&&Cr(e.doc,n+r)>l.viewFrom?Rt(e):(l.viewFrom+=r,l.viewTo+=r):t<=l.viewFrom&&n>=l.viewTo?Rt(e):t<=l.viewFrom?(o=Gt(e,n,n+r,1))?(l.view=l.view.slice(o.index),l.viewFrom=o.lineN,l.viewTo+=r):Rt(e):n>=l.viewTo?(o=Gt(e,t,t,-1))?(l.view=l.view.slice(0,o.index),l.viewTo=o.lineN):Rt(e):(i=Gt(e,t,t,-1),o=Gt(e,n,n+r,1),i&&o?(l.view=l.view.slice(0,i.index).concat(It(e,i.lineN,o.lineN)).concat(l.view.slice(o.index)),l.viewTo+=r):Rt(e));e=l.externalMeasured;e&&(n<e.lineN?e.lineN+=r:t<e.lineN+e.size&&(l.externalMeasured=null))}function Ft(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),t<r.viewFrom||t>=r.viewTo||(null==(t=r.view[Bt(e,t)]).node||-1==Yi(t=t.changes||(t.changes=[]),n)&&t.push(n))}function Rt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Bt(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function Gt(e,t,n,r){var i,o=Bt(e,t),l=e.display.view;if(!h||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=0,a=e.display.viewFrom;s<o;s++)a+=l[s].size;if(a!=t){if(0<r){if(o==l.length-1)return null;i=a+l[o].size-t,o++}else i=a-t;t+=i,n+=i}for(;xr(e.doc,n)!=n;){if(o==(r<0?0:l.length-1))return null;n+=r*l[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function Ut(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function Vt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Kt(e,t){for(var n=xi(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return 1}function jt(e,t,n,r){var i=e.display;if(!n&&"true"==xi(t).getAttribute("cm-not-content"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var a,i=Ct(e,o,l);return r&&1==i.xRel&&(a=Jr(e.doc,i.line).text).length==i.ch&&(a=Gi(a,a.length,e.options.tabSize)-a.length,i=ie(i.line,Math.max(0,Math.round((o-Je(e.display).left)/Lt(e.display))-a))),i}function Xt(e){var t=this,n=t.display;if(!(Oi(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.shift=e.shiftKey,Kt(n,e))d||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100));else if(!_t(t,e)){var r,i=jt(t,e);switch(window.focus(),Ci(e)){case 1:t.state.selectingText?t.state.selectingText(e):i?function(e,t,n){v?setTimeout(Qi(ue,e),0):e.curOp.focus=co();var r,i=+new Date;kt&&kt.time>i-400&&0==oe(kt.pos,n)?r="triple":Tt&&Tt.time>i-400&&0==oe(Tt.pos,n)?(r="double",kt={time:i,pos:n}):(r="single",Tt={time:i,pos:n});var o,l=e.doc.sel,i=g?t.metaKey:t.ctrlKey;e.options.dragDrop&&wo&&!e.isReadOnly()&&"single"==r&&-1<(o=l.contains(n))&&(oe((o=l.ranges[o]).from(),n)<0||0<n.xRel)&&(0<oe(o.to(),n)||n.xRel<0)?function(t,n,r,i){var o=t.display,l=+new Date,s=Dt(t,function(e){d&&(o.scroller.draggable=!1),t.state.draggingText=!1,ki(document,"mouseup",s),ki(o.scroller,"drop",s),Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)<10&&(vi(e),!i&&+new Date-200<l&&Oe(t.doc,r),d||v&&9==y?setTimeout(function(){document.body.focus(),o.input.focus()},20):o.input.focus())});d&&(o.scroller.draggable=!0);t.state.draggingText=s,o.scroller.dragDrop&&o.scroller.dragDrop();Si(document,"mouseup",s),Si(o.scroller,"drop",s)}(e,t,n,i):function(f,e,d,p,t){var o=f.display,g=f.doc;vi(e);var m,v,y=g.sel,n=y.ranges;t&&!e.shiftKey?(v=g.sel.contains(d),m=-1<v?n[v]:new Se(d,d)):(m=g.sel.primary(),v=g.sel.primIndex);{var r;e.altKey?(p="rect",t||(m=new Se(d,d)),d=jt(f,e,!0,!0),v=-1):m="double"==p?(r=f.findWordAt(d),f.display.shift||g.extend?Ae(g,m,r.anchor,r.head):r):"triple"==p?(r=new Se(ie(d.line,0),Me(g,ie(d.line+1,0))),f.display.shift||g.extend?Ae(g,m,r.anchor,r.head):r):Ae(g,m,d)}t?-1==v?(v=n.length,Ie(g,Le(n.concat([m]),v),{scroll:!1,origin:"*mouse"})):1<n.length&&n[v].empty()&&"single"==p&&!e.shiftKey?(Ie(g,Le(n.slice(0,v).concat(n.slice(v+1)),0),{scroll:!1,origin:"*mouse"}),y=g.sel):He(g,v,m,Fi):(Ie(g,new Ce([m],v=0),Fi),y=g.sel);var b=d;var l=o.wrapper.getBoundingClientRect(),s=0;function a(e){var t,n,r=++s,i=jt(f,e,!0,"rect"==p);i&&(0!=oe(i,b)?(f.curOp.focus=co(),function(e){if(0!=oe(b,e))if(b=e,"rect"==p){for(var t=[],n=f.options.tabSize,r=Gi(Jr(g,d.line).text,d.ch,n),i=Gi(Jr(g,e.line).text,e.ch,n),o=Math.min(r,i),l=Math.max(r,i),s=Math.min(d.line,e.line),a=Math.min(f.lastLine(),Math.max(d.line,e.line));s<=a;s++){var u=Jr(g,s).text,c=Ui(u,o,n);o==l?t.push(new Se(ie(s,c),ie(s,c))):u.length>c&&t.push(new Se(ie(s,c),ie(s,Ui(u,l,n))))}t.length||t.push(new Se(d,d)),Ie(g,Le(y.ranges.slice(0,v).concat(t),v),{origin:"*mouse",scroll:!1}),f.scrollIntoView(e)}else{var h=m,r=h.anchor,i=e;"single"!=p&&(e="double"==p?f.findWordAt(e):new Se(ie(e.line,0),Me(g,ie(e.line+1,0))),r=0<oe(e.anchor,r)?(i=e.head,ae(h.from(),e.anchor)):(i=e.anchor,se(h.to(),e.head))),(t=y.ranges.slice(0))[v]=new Se(Me(g,r),i),Ie(g,Le(t,v),Fi)}}(i),t=F(o,g),(i.line>=t.to||i.line<t.from)&&setTimeout(Dt(f,function(){s==r&&a(e)}),150)):(n=e.clientY<l.top?-20:e.clientY>l.bottom?20:0)&&setTimeout(Dt(f,function(){s==r&&(o.scroller.scrollTop+=n,a(e))}),50))}function i(e){f.state.selectingText=!1,s=1/0,vi(e),o.input.focus(),ki(document,"mousemove",u),ki(document,"mouseup",c),g.history.lastSelOrigin=null}var u=Dt(f,function(e){(Ci(e)?a:i)(e)}),c=Dt(f,i);f.state.selectingText=c,Si(document,"mousemove",u),Si(document,"mouseup",c)}(e,t,n,r,i)}(t,e,i):xi(e)==n.scroller&&vi(e);break;case 2:d&&(t.state.lastMiddleDown=+new Date),i&&Oe(t.doc,i),setTimeout(function(){n.input.focus()},20),vi(e);break;case 3:m?gn(t,e):((r=t).state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,pn(r))},100))}}}function Yt(e,t,n,r){try{var i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&vi(t);var l=e.display,r=l.lineDiv.getBoundingClientRect();if(o>r.bottom||!Hi(e,n))return bi(t);o-=r.top-l.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var a=l.gutters.childNodes[s];if(a&&a.getBoundingClientRect().right>=i){var u=ii(e.doc,o),a=e.options.gutters[s];return Mi(e,n,e,u,a,t),bi(t)}}}function _t(e,t){return Yt(e,t,"gutterClick",!0)}var $t=0;function qt(e){var r=this;if(Zt(r),!Oi(r,e)&&!Kt(r.display,e)){vi(e),v&&($t=+new Date);var t,i=jt(r,e,!0),n=e.dataTransfer.files;if(i&&!r.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var o=n.length,l=Array(o),s=0,a=0;a<o;++a)!function(e,t){var n;r.options.allowDropFileTypes&&-1==Yi(r.options.allowDropFileTypes,e.type)||((n=new FileReader).onload=Dt(r,function(){var e=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),l[t]=e,++s==o&&(e={from:i=Me(r.doc,i),to:i,text:r.doc.splitLines(l.join(r.doc.lineSeparator())),origin:"paste"},xn(r.doc,e),Ee(r.doc,Te(i,mn(e))))}),n.readAsText(e))}(n[a],a);else{if(r.state.draggingText&&-1<r.doc.sel.contains(i))return r.state.draggingText(e),void setTimeout(function(){r.display.input.focus()},20);try{if(l=e.dataTransfer.getData("Text")){if(r.state.draggingText&&!(g?e.altKey:e.ctrlKey)&&(t=r.listSelections()),ze(r.doc,Te(i,i)),t)for(a=0;a<t.length;++a)kn(r.doc,"",t[a].anchor,t[a].head,"drag");r.replaceSelection(l,"around","paste"),r.display.input.focus()}}catch(e){}}}}function Zt(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Qt(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,f||X(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),f&&X(e),_e(e,100))}function Jt(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,R(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}var en=0,tn=null;v?tn=-.53:f?tn=15:r?tn=-.7:a&&(tn=-1/3);var nn=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};function rn(e,t){var n=nn(t),r=n.x,i=n.y,o=e.display,l=o.scroller,s=l.scrollWidth>l.clientWidth,a=l.scrollHeight>l.clientHeight;if(r&&s||i&&a){if(i&&g&&d)e:for(var u=t.target,c=o.view;u!=l;u=u.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==u){e.display.currentWheelTarget=u;break e}if(r&&!f&&!p&&null!=tn)return i&&a&&Qt(e,Math.max(0,Math.min(l.scrollTop+i*tn,l.scrollHeight-l.clientHeight))),Jt(e,Math.max(0,Math.min(l.scrollLeft+r*tn,l.scrollWidth-l.clientWidth))),(!i||i&&a)&&vi(t),void(o.wheelStartX=null);i&&null!=tn&&(n=i*tn,a=(s=e.doc.scrollTop)+o.wrapper.clientHeight,n<0?s=Math.max(0,s+n-50):a=Math.min(e.doc.height,a+n+50),X(e,{top:s,bottom:a})),en<20&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){var e,t;null!=o.wheelStartX&&(t=l.scrollLeft-o.wheelStartX,t=(e=l.scrollTop-o.wheelStartY)&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX,o.wheelStartX=o.wheelStartY=null,t&&(tn=(tn*en+t)/(en+1),++en))},200)):(o.wheelDX+=r,o.wheelDY+=i))}}function on(e,t,n){if("string"==typeof t&&!(t=Yn[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Ii}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}b.wheelEventPixels=function(e){e=nn(e);return e.x*=tn,e.y*=tn,e};var ln=new Bi;function sn(e,t,n,r){var i=e.state.keySeq;if(i){if(Zn(t))return"handled";ln.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}r=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=qn(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&qn(t,e.options.extraKeys,n,e)||qn(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&Wi(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(vi(n),Ye(e)),i&&!r&&/\'$/.test(t)?(vi(n),!0):!!r}function an(t,e){var n=Qn(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?sn(t,"Shift-"+n,e,function(e){return on(t,e,!0)})||sn(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return on(t,e)}):sn(t,n,e,function(e){return on(t,e)}))}var un=null;function cn(e){var t,n,r,i=this;function o(e){18!=e.keyCode&&e.altKey||(fo(r,"CodeMirror-crosshair"),ki(document,"keyup",o),ki(document,"mouseover",o))}i.curOp.focus=co(),Oi(i,e)||(v&&y<11&&27==e.keyCode&&(e.returnValue=!1),t=e.keyCode,i.display.shift=16==t||e.shiftKey,n=an(i,e),p&&(un=n?t:null,!n&&88==t&&!So&&(g?e.metaKey:e.ctrlKey)&&i.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)||(r=i.display.lineDiv,po(r,"CodeMirror-crosshair"),Si(document,"keyup",o),Si(document,"mouseover",o)))}function hn(e){16==e.keyCode&&(this.doc.sel.shift=!1),Oi(this,e)}function fn(e){var t=this;if(!(Kt(t.display,e)||Oi(t,e)||e.ctrlKey&&!e.altKey||g&&e.metaKey)){var n,r=e.keyCode,i=e.charCode;if(p&&r==un)return un=null,void vi(e);p&&(!e.which||e.which<10)&&an(t,e)||(i=String.fromCharCode(null==i?r:i),sn(n=t,"'"+i+"'",e,function(e){return on(n,e,!0)})||t.display.input.onKeyPress(e))}}function dn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Mi(e,"focus",e),e.state.focused=!0,po(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),d&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ye(e))}function pn(e){e.state.delayingBlurEvent||(e.state.focused&&(Mi(e,"blur",e),e.state.focused=!1,fo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function gn(e,t){var n,r;Kt(e.display,t)||(r=t,Hi(n=e,"gutterContextMenu")&&Yt(n,r,"gutterContextMenu",!1))||Oi(e,t,"contextmenu")||e.display.input.onContextMenu(t)}var mn=b.changeEnd=function(e){return e.text?ie(e.from.line+e.text.length-1,ji(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};function vn(e,t){if(oe(e,t.from)<0)return e;if(oe(e,t.to)<=0)return mn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=mn(t).ch-t.to.ch),ie(n,r)}function yn(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Se(vn(i.anchor,t),vn(i.head,t)))}return Le(n,e.sel.primIndex)}function bn(e,t,n){return e.line==t.line?ie(n.line,e.ch-t.ch+n.ch):ie(n.line+(e.line-t.line),e.ch)}function wn(i,e,t){e={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return t&&(e.update=function(e,t,n,r){e&&(this.from=Me(i,e)),t&&(this.to=Me(i,t)),n&&(this.text=n),void 0!==r&&(this.origin=r)}),Mi(i,"beforeChange",i,e),i.cm&&Mi(i.cm,"beforeChange",i.cm,e),e.canceled?null:{from:e.from,to:e.to,text:e.text,origin:e.origin}}function xn(e,t,n){if(e.cm){if(!e.cm.curOp)return Dt(e.cm,xn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Hi(e,"beforeChange")||e.cm&&Hi(e.cm,"beforeChange"))||(t=wn(e,t,!0))){var r=c&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=Yi(r,n)||(r=r||[]).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var l=r[o],s=l.find(0),a=0;a<i.length;++a){var u,c,h,f=i[a];oe(f.to,s.from)<0||0<oe(f.from,s.to)||(u=[a,1],c=oe(f.from,s.from),h=oe(f.to,s.to),(c<0||!l.inclusiveLeft&&!c)&&u.push({from:f.from,to:s.from}),(0<h||!l.inclusiveRight&&!h)&&u.push({from:s.to,to:f.to}),i.splice.apply(i,u),a+=u.length-1)}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;0<=i;--i)Cn(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Cn(e,t)}}function Cn(e,n){var t,r;1==n.text.length&&""==n.text[0]&&0==oe(n.from,n.to)||(t=yn(e,n),ci(e,n,t,e.cm?e.cm.curOp.id:NaN),Tn(e,n,t,ar(e,n)),r=[],Zr(e,function(e,t){t||-1!=Yi(r,e.history)||(mi(e.history,n),r.push(e.history)),Tn(e,n,null,ar(e,n))}))}function Sn(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,a=0;a<l.length&&(r=l[a],n?!r.ranges||r.equals(e.sel):r.ranges);a++);if(a!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;(r=l.pop()).ranges;){if(hi(r,s),n&&!r.equals(e.sel))return void Ie(e,r,{clearRedo:!1});o=r}var u=[];hi(o,s),s.push({changes:u,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var c=Hi(e,"beforeChange")||e.cm&&Hi(e.cm,"beforeChange"),a=r.changes.length-1;0<=a;--a){var h=r.changes[a];if(h.origin=t,c&&!wn(e,h,!1))return void(l.length=0);u.push(ai(e,h));var f=a?yn(e,h):ji(l);Tn(e,h,f,cr(e,h)),!a&&e.cm&&e.cm.scrollIntoView({from:h.from,to:mn(h)});var d=[];Zr(e,function(e,t){t||-1!=Yi(d,e.history)||(mi(e.history,h),d.push(e.history)),Tn(e,h,null,cr(e,h))})}}}}function Ln(e,t){if(0!=t&&(e.first+=t,e.sel=new Ce(_i(e.sel.ranges,function(e){return new Se(ie(e.anchor.line+t,e.anchor.ch),ie(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){zt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Ft(e.cm,r,"gutter")}}function Tn(e,t,n,r){if(e.cm&&!e.cm.curOp)return Dt(e.cm,Tn)(e,t,n,r);var i;t.to.line<e.first?Ln(e,t.text.length-1-(t.to.line-t.from.line)):t.from.line>e.lastLine()||(t.from.line<e.first&&(Ln(e,i=t.text.length-1-(e.first-t.from.line)),t={from:ie(e.first,0),to:ie(t.to.line+i,t.to.ch),text:[ji(t.text)],origin:t.origin}),i=e.lastLine(),(t=t.to.line>i?{from:t.from,to:ie(i,Jr(e,i).text.length),text:[t.text[0]],origin:t.origin}:t).removed=ei(e,t.from,t.to),n=n||yn(e,t),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=ri(wr(Jr(r,o.line))),r.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0}));-1<r.sel.contains(t.from,t.to)&&Di(e);Kr(r,t,n,S(e)),e.options.lineWrapping||(r.iter(a,o.line+t.text.length,function(e){var t=W(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0));r.frontier=Math.min(r.frontier,o.line),_e(e,400);a=t.text.length-(l.line-o.line)-1;t.full?zt(e):o.line!=l.line||1!=t.text.length||Vr(e.doc,t)?zt(e,o.line,l.line+1,a):Ft(e,o.line,"text");r=Hi(e,"changes"),a=Hi(e,"change");(a||r)&&(t={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin},a&&Wi(e,"change",e,t),r&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(t));e.display.selForContextMenu=null}(e.cm,t,r):Kr(e,t,r),ze(e,n,zi))}function kn(e,t,n,r,i){var o;oe(r=r||n,n)<0&&(o=r,r=n,n=o),"string"==typeof t&&(t=e.splitLines(t)),xn(e,{from:n,to:r,text:t,origin:i})}function Mn(e,t,n,r,i){var o=e.display,l=St(e.display);n<0&&(n=0);var s=(e.curOp&&null!=e.curOp.scrollTop?e.curOp:o.scroller).scrollTop,a=nt(e),u={};a<i-n&&(i=n+a);var c=e.doc.height+Qe(o),h=n<l,l=c-l<i;n<s?u.scrollTop=h?0:n:s+a<i&&((f=Math.min(n,(l?c:i)-a))!=s&&(u.scrollTop=f));var f=(e.curOp&&null!=e.curOp.scrollLeft?e.curOp:o.scroller).scrollLeft,e=tt(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),o=e<r-t;return o&&(r=t+e),t<10?u.scrollLeft=0:t<f?u.scrollLeft=Math.max(0,t-(o?0:10)):e+f-3<r&&(u.scrollLeft=r+(o?0:10)-e),u}function Nn(e,t,n){null==t&&null==n||An(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc:e.curOp).scrollLeft+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc:e.curOp).scrollTop+n)}function Wn(e){An(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?ie(t.line,t.ch-1):t,r=ie(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function An(e){var t,n,r=e.curOp.scrollToPos;r&&(e.curOp.scrollToPos=null,t=wt(e,r.from),n=wt(e,r.to),r=Mn(e,Math.min(t.left,n.left),Math.min(t.top,n.top)-r.margin,Math.max(t.right,n.right),Math.max(t.bottom,n.bottom)+r.margin),e.scrollTo(r.scrollLeft,r.scrollTop))}function On(e,t,n,r){var i,o=e.doc;"smart"==(n=null==n?"add":n)&&(o.mode.indent?i=qe(e,t):n="prev");var l=e.options.tabSize,s=Jr(o,t),a=Gi(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((c=o.mode.indent(i,s.text.slice(u.length),s.text))==Ii||150<c)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?Gi(Jr(o,t-1).text,null,l):0:"add"==n?c=a+e.options.indentUnit:"subtract"==n?c=a-e.options.indentUnit:"number"==typeof n&&(c=a+n);var c=Math.max(0,c),h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/l);d;--d)f+=l,h+="\t";if(f<c&&(h+=Ki(c-f)),h!=u)return kn(o,h,ie(t,0),ie(t,u.length),"+input"),!(s.stateAfter=null);for(d=0;d<o.sel.ranges.length;d++){var p=o.sel.ranges[d];if(p.head.line==t&&p.head.ch<u.length){He(o,d,new Se(f=ie(t,u.length),f));break}}}function Dn(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Jr(e,ke(e,t)):i=ri(t),null==i?null:(r(o,i)&&e.cm&&Ft(e.cm,i,n),o)}function Hn(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&oe(o.from,ji(r).to)<=0;){var l=r.pop();if(oe(l.from,o.from)<0){o.from=l.from;break}}r.push(o)}Ot(t,function(){for(var e=r.length-1;0<=e;e--)kn(t.doc,"",r[e].from,r[e].to,"+delete");Wn(t)})}function Pn(r,e,i,t,o){var l=e.line,s=e.ch,n=i,a=Jr(r,l);function u(e){var t,n=(o?Eo:Io)(a,s,i,!0);if(null==n){if(e||(t=l+i)<r.first||t>=r.first+r.size||!(a=Jr(r,l=t)))return;s=o?(i<0?Ao:Wo)(a):i<0?a.text.length:0}else s=n;return 1}if("char"==t)u();else if("column"==t)u(!0);else if("word"==t||"group"==t)for(var c=null,h="group"==t,f=r.cm&&r.cm.getHelper(e,"wordChars"),d=!0;!(i<0)||u(!d);d=!1){var p=a.text.charAt(s)||"\n",p=to(p,f)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||d||p||(p="s"),c&&c!=p){i<0&&(i=1,u());break}if(p&&(c=p),0<i&&!u(!d))break}n=Ue(r,ie(l,s),e,n,!0);return oe(e,n)||(n.hitSide=!0),n}function En(e,t,n,r){var i,o,l=e.doc,s=t.left;for("page"==r?(i=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),o=t.top+n*(i-(n<0?1.5:.5)*St(e.display))):"line"==r&&(o=0<n?t.bottom+3:t.top-3);;){var a=Ct(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=l.height){a.hitSide=!0;break}o+=5*n}return a}b.prototype={constructor:b,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];n[e]==t&&"mode"!=e||(n[e]=t,zn.hasOwnProperty(e)&&Dt(this,zn[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Jn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Ht(function(e,t){var n=e.token?e:b.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,zt(this)}),removeOverlay:Ht(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void zt(this)}}),indentLine:Ht(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Ne(this.doc,e)&&On(this,e,t,n)}),indentSelection:Ht(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(On(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Wn(this));else{for(var o=i.from(),l=i.to(),i=Math.max(n,o.line),n=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1,s=i;s<n;++s)On(this,s,e);i=this.doc.sel.ranges;0==o.ch&&t.length==i.length&&0<i[r].from().ch&&He(this.doc,r,new Se(o,i[r].to()),zi)}}}),getTokenAt:function(e,t){return Or(this,e,t)},getLineTokens:function(e,t){return Or(this,ie(e),t,!0)},getTokenTypeAt:function(e){e=Me(this.doc,e);var t,n=Pr(this,Jr(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var l=r+i>>1;if((l?n[2*l-1]:0)>=o)i=l;else{if(!(n[2*l+1]<o)){t=n[2*l+2];break}r=1+l}}e=t?t.indexOf("cm-overlay "):-1;return e<0?t:0==e?null:t.slice(0,e-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?b.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!Kn.hasOwnProperty(t))return n;var r=Kn[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=r[i[t][o]];l&&n.push(l)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(o=0;o<r._global.length;o++){var s=r._global[o];s.pred(i,this)&&-1==Yi(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return qe(this,(e=ke(n,null==e?n.first+n.size-1:e))+1,t)},cursorCoords:function(e,t){var n=this.doc.sel.primary(),n=null==e?n.head:"object"==typeof e?Me(this.doc,e):e?n.from():n.to();return bt(this,n,t||"page")},charCoords:function(e,t){return yt(this,Me(this.doc,e),t||"page")},coordsChar:function(e,t){return Ct(this,(e=vt(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=vt(this,{top:e,left:0},t||"page").top,ii(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,r=!1,e="number"==typeof e?(n=this.doc.first+this.doc.size-1,e<this.doc.first?e=this.doc.first:n<e&&(e=n,r=!0),Jr(this.doc,e)):e;return mt(this,e,{top:0,left:0},t||"page").top+(r?this.doc.height-oi(e):0)},defaultTextHeight:function(){return St(this.display)},defaultCharWidth:function(){return Lt(this.display)},setGutterMarker:Ht(function(e,n,r){return Dn(this.doc,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[n]=r)&&no(t)&&(e.gutterMarkers=null),1})}),clearGutter:Ht(function(t){var n=this,e=n.doc,r=e.first;e.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&(e.gutterMarkers[t]=null,Ft(n,r,"gutter"),no(e.gutterMarkers)&&(e.gutterMarkers=null)),++r})}),lineInfo:function(e){if("number"==typeof e){if(!Ne(this.doc,e))return null;var t=e;if(!(e=Jr(this.doc,e)))return null}else if(null==(t=ri(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,l,s=this.display,a=(e=bt(this,Me(this.doc,e))).bottom,u=e.left;t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r?a=e.top:"above"!=r&&"near"!=r||(o=Math.max(s.wrapper.clientHeight,this.doc.height),l=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth),("above"==r||e.bottom+t.offsetHeight>o)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=o&&(a=e.bottom),u+t.offsetWidth>l&&(u=l-t.offsetWidth)),t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(i=this,s=a,u=(n=u)+t.offsetWidth,t=a+t.offsetHeight,null!=(t=Mn(i,n,s,u,t)).scrollTop&&Qt(i,t.scrollTop),null!=t.scrollLeft&&Jt(i,t.scrollLeft))},triggerOnKeyDown:Ht(cn),triggerOnKeyPress:Ht(fn),triggerOnKeyUp:hn,execCommand:function(e){if(Yn.hasOwnProperty(e))return Yn[e].call(null,this)},triggerElectric:Ht(function(e){de(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=0,l=Me(this.doc,e);o<t&&!(l=Pn(this.doc,l,i,n,r)).hitSide;++o);return l},moveH:Ht(function(t,n){var r=this;r.extendSelectionsBy(function(e){return r.display.shift||r.doc.extend||e.empty()?Pn(r.doc,e.head,t,n,r.options.rtlMoveVisually):t<0?e.from():e.to()},Ri)}),deleteH:Ht(function(n,r){var e=this.doc.sel,i=this.doc;e.somethingSelected()?i.replaceSelection("",null,"+delete"):Hn(this,function(e){var t=Pn(i,e.head,n,r,!1);return n<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var l=0,s=Me(this.doc,e);l<t;++l){var a=bt(this,s,"div");if(null==o?o=a.left:a.left=o,(s=En(this,a,i,n)).hitSide)break}return s},moveV:Ht(function(r,i){var o=this,l=this.doc,s=[],a=!o.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(e){if(a)return r<0?e.from():e.to();var t=bt(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),s.push(t.left);var n=En(o,t,r,i);return"page"==i&&e==l.sel.primary()&&Nn(o,null,yt(o,n,"div").top-t.top),n},Ri),s.length)for(var e=0;e<l.sel.ranges.length;e++)l.sel.ranges[e].goalColumn=s[e]}),findWordAt:function(e){var t=Jr(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");(e.xRel<0||r==t.length)&&n?--n:++r;for(var o=t.charAt(n),l=to(o,i)?function(e){return to(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!to(e)};0<n&&l(t.charAt(n-1));)--n;for(;r<t.length&&l(t.charAt(r));)++r}return new Se(ie(e.line,n),ie(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||(((this.state.overwrite=!this.state.overwrite)?po:fo)(this.display.cursorDiv,"CodeMirror-overwrite"),Mi(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==co()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ht(function(e,t){null==e&&null==t||An(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-et(this)-this.display.barHeight,width:e.scrollWidth-et(this)-this.display.barWidth,clientHeight:nt(this),clientWidth:tt(this)}},scrollIntoView:Ht(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ie(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(An(this),this.curOp.scrollToPos=e):(e=Mn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin),this.scrollTo(e.scrollLeft,e.scrollTop))}),setSize:Ht(function(e,t){var n=this;function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}null!=e&&(n.display.wrapper.style.width=r(e)),null!=t&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&ft(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Ft(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,Mi(n,"refresh",this)}),operation:function(e){return Ot(this,e)},refresh:Ht(function(){var e=this.display.cachedTextHeight;zt(this),this.curOp.forceUpdate=!0,dt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),N(this),(null==e||.5<Math.abs(e-St(this.display)))&&L(this),Mi(this,"refresh",this)}),swapDoc:Ht(function(e){var t=this.doc;return t.cm=null,Qr(this,e),dt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Wi(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Pi(b);var In=b.defaults={},zn=b.optionHandlers={};function Fn(e,t,r,n){b.defaults[e]=t,r&&(zn[e]=n?function(e,t,n){n!=Rn&&r(e,t,n)}:r)}var Rn=b.Init={toString:function(){return"CodeMirror.Init"}};Fn("value","",function(e,t){e.setValue(t)},!0),Fn("mode",null,function(e,t){e.doc.modeOption=t,x(e)},!0),Fn("indentUnit",2,x,!0),Fn("indentWithTabs",!1),Fn("smartIndent",!0),Fn("tabSize",4,function(e){C(e),dt(e),zt(e)},!0),Fn("lineSeparator",null,function(e,r){if(e.doc.lineSep=r){var i=[],o=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var n=e.text.indexOf(r,t);if(-1==n)break;t=n+r.length,i.push(ie(o,n))}o++});for(var t=i.length-1;0<=t;t--)kn(e.doc,r,i[t],ie(i[t].line,i[t].ch+r.length))}}),Fn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=b.Init&&e.refresh()}),Fn("specialCharPlaceholder",function(e){var t=oo("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t},function(e){e.refresh()},!0),Fn("electricChars",!0),Fn("inputStyle",s?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Fn("rtlMoveVisually",!t),Fn("wholeLineUpdateBefore",!0),Fn("theme","default",function(e){T(e),k(e)},!0),Fn("keyMap","default",function(e,t,n){t=Jn(t),n=n!=b.Init&&Jn(n);n&&n.detach&&n.detach(e,t),t.attach&&t.attach(e,n||null)}),Fn("extraKeys",null),Fn("lineWrapping",!1,function(e){e.options.lineWrapping?(po(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(fo(e.display.wrapper,"CodeMirror-wrap"),A(e)),L(e),zt(e),dt(e),setTimeout(function(){I(e)},100)},!0),Fn("gutters",[],function(e){O(e.options),k(e)},!0),Fn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?U(e.display)+"px":"0",e.refresh()},!0),Fn("coverGutterNextToScrollbar",!1,function(e){I(e)},!0),Fn("scrollbarStyle","native",function(e){E(e),I(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Fn("lineNumbers",!1,function(e){O(e.options),k(e)},!0),Fn("firstLineNumber",1,k,!0),Fn("lineNumberFormatter",function(e){return e},k,!0),Fn("showCursorWhenSelecting",!1,Ke,!0),Fn("resetSelectionOnContextMenu",!0),Fn("lineWiseCopyCut",!0),Fn("readOnly",!1,function(e,t){"nocursor"==t?(pn(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Fn("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Fn("dragDrop",!0,function(e,t,n){!t!=!(n&&n!=b.Init)&&(n=e.display.dragFunctions,(t=t?Si:ki)(e.display.scroller,"dragstart",n.start),t(e.display.scroller,"dragenter",n.enter),t(e.display.scroller,"dragover",n.over),t(e.display.scroller,"dragleave",n.leave),t(e.display.scroller,"drop",n.drop))}),Fn("allowDropFileTypes",null),Fn("cursorBlinkRate",530),Fn("cursorScrollMargin",0),Fn("cursorHeight",1,Ke,!0),Fn("singleCursorHeightPerLine",!0,Ke,!0),Fn("workTime",100),Fn("workDelay",100),Fn("flattenSpans",!0,C,!0),Fn("addModeClass",!1,C,!0),Fn("pollInterval",100),Fn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Fn("historyEventDelay",1250),Fn("viewportMargin",10,function(e){e.refresh()},!0),Fn("maxHighlightLength",1e4,C,!0),Fn("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Fn("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Fn("autofocus",null);var Bn=b.modes={},Gn=b.mimeModes={};b.defineMode=function(e,t){b.defaults.mode||"null"==e||(b.defaults.mode=e),2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Bn[e]=t},b.defineMIME=function(e,t){Gn[e]=t},b.resolveMode=function(e){if("string"==typeof e&&Gn.hasOwnProperty(e))e=Gn[e];else if(e&&"string"==typeof e.name&&Gn.hasOwnProperty(e.name)){var t=Gn[e.name];(e=qi(t="string"==typeof t?{name:t}:t,e)).name=t.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return b.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},b.getMode=function(e,t){var t=b.resolveMode(t),n=Bn[t.name];if(!n)return b.getMode(e,"text/plain");var r=n(e,t);if(Un.hasOwnProperty(t.name)){var i=Un[t.name];for(o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)r[o]=t.modeProps[o];return r},b.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),b.defineMIME("text/plain","null");var Un=b.modeExtensions={};b.extendMode=function(e,t){Zi(t,Un.hasOwnProperty(e)?Un[e]:Un[e]={})},b.defineExtension=function(e,t){b.prototype[e]=t},b.defineDocExtension=function(e,t){_r.prototype[e]=t},b.defineOption=Fn;var Vn=[];b.defineInitHook=function(e){Vn.push(e)};var Kn=b.helpers={};b.registerHelper=function(e,t,n){Kn.hasOwnProperty(e)||(Kn[e]=b[e]={_global:[]}),Kn[e][t]=n},b.registerGlobalHelper=function(e,t,n,r){b.registerHelper(e,t,r),Kn[e]._global.push({pred:n,val:r})};var jn=b.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n,r={};for(n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},Xn=b.startState=function(e,t,n){return!e.startState||e.startState(t,n)};b.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var Yn=b.commands={selectAll:function(e){e.setSelection(ie(e.firstLine(),0),ie(e.lastLine()),zi)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),zi)},killLine:function(n){Hn(n,function(e){if(e.empty()){var t=Jr(n.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<n.lastLine()?{from:e.head,to:ie(e.head.line+1,0)}:{from:e.head,to:ie(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){Hn(t,function(e){return{from:ie(e.from().line,0),to:Me(t.doc,ie(e.to().line+1,0))}})},delLineLeft:function(e){Hn(e,function(e){return{from:ie(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(n){Hn(n,function(e){var t=n.charCoords(e.head,"div").top+5;return{from:n.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(n){Hn(n,function(e){var t=n.charCoords(e.head,"div").top+5,t=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:t}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(ie(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(ie(e.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Oo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Do(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return function(e,t){var n,r=Jr(e.doc,t);for(;n=yr(r);)r=n.find(1,!0).line,t=null;e=li(r),e=e?(e[0].level%2?Wo:Ao)(r):r.text.length;return ie(null==t?ri(r):t,e)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){e=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div")},Ri)},goLineLeft:function(t){t.extendSelectionsBy(function(e){e=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:e},"div")},Ri)},goLineLeftSmart:function(n){n.extendSelectionsBy(function(e){var t=n.charCoords(e.head,"div").top+5,t=n.coordsChar({left:0,top:t},"div");return t.ch<n.getLine(t.line).search(/\S/)?Do(n,e.head):t},Ri)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),o=Gi(e.getLine(o.line),o.ch,r);t.push(new Array(r-o%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(l){Ot(l,function(){for(var e=l.listSelections(),t=[],n=0;n<e.length;n++){var r,i=e[n].head,o=Jr(l.doc,i.line).text;o&&(0<(i=i.ch==o.length?new ie(i.line,i.ch-1):i).ch?(i=new ie(i.line,i.ch+1),l.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ie(i.line,i.ch-2),i,"+transpose")):i.line>l.doc.first&&((r=Jr(l.doc,i.line-1).text)&&l.replaceRange(o.charAt(0)+l.doc.lineSeparator()+r.charAt(r.length-1),ie(i.line-1,r.length-1),ie(i.line,1),"+transpose"))),t.push(new Se(i,i))}l.setSelections(t)})},newlineAndIndent:function(r){Ot(r,function(){for(var e=r.listSelections().length,t=0;t<e;t++){var n=r.listSelections()[t];r.replaceRange(r.doc.lineSeparator(),n.anchor,n.head,"+input"),r.indentLine(n.from().line+1,null,!0)}Wn(r)})},toggleOverwrite:function(e){e.toggleOverwrite()}},_n=b.keyMap={};function $n(e){for(var t,n,r,i,o=e.split(/-(?!$)/),e=o[o.length-1],l=0;l<o.length-1;l++){var s=o[l];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),e=r?"Shift-"+e:e}_n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},_n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},_n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},_n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},_n.default=g?_n.macDefault:_n.pcDefault,b.normalizeKeyMap=function(e){var t,n,r={};for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(/^(name|fallthrough|(de|at)tach)$/.test(t))continue;if("..."==i){delete e[t];continue}for(var o=_i(t.split(" "),$n),l=0;l<o.length;l++){var s,a=l==o.length-1?(s=o.join(" "),i):(s=o.slice(0,l+1).join(" "),"..."),u=r[s];if(u){if(u!=a)throw new Error("Inconsistent bindings for "+s)}else r[s]=a}delete e[t]}for(n in r)e[n]=r[n];return e};var qn=b.lookupKey=function(e,t,n,r){var i=(t=Jn(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return qn(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var l=qn(e,t.fallthrough[o],n,r);if(l)return l}}},Zn=b.isModifierKey=function(e){e="string"==typeof e?e:ko[e.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Qn=b.keyName=function(e,t){if(p&&34==e.keyCode&&e.char)return!1;var n=ko[e.keyCode],r=n;return null!=r&&!e.altGraphKey&&(e.altKey&&"Alt"!=n&&(r="Alt-"+r),(o?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(o?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),r=!t&&e.shiftKey&&"Shift"!=n?"Shift-"+r:r)};function Jn(e){return"string"==typeof e?_n[e]:e}b.fromTextArea=function(t,e){var n;function r(){t.value=s.getValue()}if(e=e?Zi(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus&&(n=co(),e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body),t.form&&(Si(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var i=t.form,o=i.submit;try{var l=i.submit=function(){r(),i.submit=o,i.submit(),i.submit=l}}catch(e){}}e.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(ki(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var s=b(function(e){t.parentNode.insertBefore(e,t.nextSibling)},e);return s};var er=b.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};er.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){e=this.string.indexOf(e,this.pos);if(-1<e)return this.pos=e,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Gi(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Gi(this.string,null,this.tabSize)-(this.lineStart?Gi(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&0<r.index?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var tr=0,nr=b.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++tr};Pi(nr),nr.prototype.clear=function(){if(!this.explicitlyCleared){var e,t=this.doc.cm,n=t&&!t.curOp;n&&Wt(t),!Hi(this,"clear")||(e=this.find())&&Wi(this,"clear",e.from,e.to);for(var r=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=sr(l.markedSpans,this);t&&!this.collapsed?Ft(t,ri(l),"text"):t&&(null!=s.to&&(i=ri(l)),null!=s.from&&(r=ri(l))),l.markedSpans=function(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n=n||[]).push(e[r]);return n}(l.markedSpans,s),null==s.from&&this.collapsed&&!Sr(this.doc,l)&&t&&ni(l,St(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(o=0;o<this.lines.length;++o){var a=wr(this.lines[o]),u=W(a);u>t.display.maxLineLength&&(t.display.maxLine=a,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&zt(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Re(t.doc)),t&&Wi(t,"markerCleared",t,this),n&&At(t),this.parent&&this.parent.clear()}},nr.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],l=sr(o.markedSpans,this);if(null!=l.from&&(n=ie(t?o:ri(o),l.from),-1==e))return n;if(null!=l.to&&(r=ie(t?o:ri(o),l.to),1==e))return r}return n&&{from:n,to:r}},nr.prototype.changed=function(){var n=this.find(-1,!0),r=this,i=this.doc.cm;n&&i&&Ot(i,function(){var e=n.line,t=ri(n.line),t=ot(i,t);t&&(ht(t),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,Sr(r.doc,e)||null==r.height||(t=r.height,r.height=null,(t=kr(r)-t)&&ni(e,e.height+t))})},nr.prototype.attachLine=function(e){var t;!this.lines.length&&this.doc.cm&&((t=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=Yi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)),this.lines.push(e)},nr.prototype.detachLine=function(e){this.lines.splice(Yi(this.lines,e),1),!this.lines.length&&this.doc.cm&&((e=this.doc.cm.curOp).maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)};tr=0;function rr(t,n,r,e,i){if(e&&e.shared)return function(e,n,r,i,o){(i=Zi(i)).shared=!1;var l=[rr(e,n,r,i,o)],s=l[0],a=i.widgetNode;return Zr(e,function(e){a&&(i.widgetNode=a.cloneNode(!0)),l.push(rr(e,Me(e,n),Me(e,r),i,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;s=ji(l)}),new ir(l,s)}(t,n,r,e,i);if(t.cm&&!t.cm.curOp)return Dt(t.cm,rr)(t,n,r,e,i);var o=new nr(t,i),i=oe(n,r);if(e&&Zi(e,o,!1),0<i||0==i&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=oo("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(br(t,n.line,n,r,o)||n.line!=r.line&&br(t,r.line,n,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");h=!0}o.addToHistory&&ci(t,{from:n,to:r,origin:"markText"},t.sel,NaN);var l,s=n.line,a=t.cm;if(t.iter(s,r.line+1,function(e){var t;a&&o.collapsed&&!a.options.lineWrapping&&wr(e)==a.display.maxLine&&(l=!0),o.collapsed&&s!=n.line&&ni(e,0),t=e,e=new lr(o,s==n.line?n.ch:null,s==r.line?r.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t),++s}),o.collapsed&&t.iter(n.line,r.line+1,function(e){Sr(t,e)&&ni(e,0)}),o.clearOnEnter&&Si(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(c=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++tr,o.atomic=!0),a){if(l&&(a.curOp.updateMaxLine=!0),o.collapsed)zt(a,n.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=n.line;u<=r.line;u++)Ft(a,u,"text");o.atomic&&Re(a.doc),Wi(a,"markerAdded",a,o)}return o}var ir=b.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function or(e){return e.findMarks(ie(e.first,0),e.clipPos(ie(e.lastLine())),function(e){return e.parent})}function lr(e,t,n){this.marker=e,this.from=t,this.to=n}function sr(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function ar(e,t){if(t.full)return null;var n=Ne(e,t.from.line)&&Jr(e,t.from.line).markedSpans,r=Ne(e,t.to.line)&&Jr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,e=0==oe(t.from,t.to),l=function(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o,l=e[i],s=l.marker;!(null==l.from||(s.inclusiveLeft?l.from<=t:l.from<t))&&(l.from!=t||"bookmark"!=s.type||n&&l.marker.insertLeft)||(o=null==l.to||(s.inclusiveRight?l.to>=t:l.to>t),(r=r||[]).push(new lr(s,l.from,o?null:l.to)))}return r}(n,i,e),s=function(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o,l=e[i],s=l.marker;!(null==l.to||(s.inclusiveRight?l.to>=t:l.to>t))&&(l.from!=t||"bookmark"!=s.type||n&&!l.marker.insertLeft)||(o=null==l.from||(s.inclusiveLeft?l.from<=t:l.from<t),(r=r||[]).push(new lr(s,o?null:l.from-t,null==l.to?null:l.to-t)))}return r}(r,o,e),a=1==t.text.length,u=ji(t.text).length+(a?i:0);if(l)for(var c=0;c<l.length;++c)null==(h=l[c]).to&&((f=sr(s,h.marker))?a&&(h.to=null==f.to?null:f.to+u):h.to=i);if(s)for(var h,f,c=0;c<s.length;++c)null!=(h=s[c]).to&&(h.to+=u),null==h.from?(f=sr(l,h.marker))||(h.from=u,a&&(l=l||[]).push(h)):(h.from+=u,a&&(l=l||[]).push(h));l=l&&ur(l),s&&s!=l&&(s=ur(s));var d=[l];if(!a){var p,g=t.text.length-2;if(0<g&&l)for(c=0;c<l.length;++c)null==l[c].to&&(p=p||[]).push(new lr(l[c].marker,null,null));for(c=0;c<g;++c)d.push(p);d.push(s)}return d}function ur(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function cr(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(function(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t=t||e.slice(0,n):t&&t.push(e[n]);return t?t.length?t:null:e}(n[r]));return i}(e,t),r=ar(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],l=r[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(n[i]=l)}return n}function hr(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function fr(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function dr(e){return e.inclusiveLeft?-1:0}function pr(e){return e.inclusiveRight?1:0}function gr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),n=oe(r.from,i.from)||dr(e)-dr(t);if(n)return-n;i=oe(r.to,i.to)||pr(e)-pr(t);return i||t.id-e.id}function mr(e,t){var n,r=h&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||gr(n,i.marker)<0)&&(n=i.marker);return n}function vr(e){return mr(e,!0)}function yr(e){return mr(e,!1)}function br(e,t,n,r,i){var t=Jr(e,t),o=h&&t.markedSpans;if(o)for(var l=0;l<o.length;++l){var s=o[l];if(s.marker.collapsed){var a=s.marker.find(0),u=oe(a.from,n)||dr(s.marker)-dr(i),c=oe(a.to,r)||pr(s.marker)-pr(i);if(!(0<=u&&c<=0||u<=0&&0<=c)&&(u<=0&&(0<oe(a.to,n)||s.marker.inclusiveRight&&i.inclusiveLeft)||0<=u&&(oe(a.from,r)<0||s.marker.inclusiveLeft&&i.inclusiveRight)))return 1}}}function wr(e){for(var t;t=vr(e);)e=t.find(-1,!0).line;return e}function xr(e,t){var n=Jr(e,t),e=wr(n);return n==e?t:ri(e)}function Cr(e,t){if(t>e.lastLine())return t;var n,r=Jr(e,t);if(!Sr(e,r))return t;for(;n=yr(r);)r=n.find(1,!0).line;return ri(r)+1}function Sr(e,t){var n=h&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&function e(t,n,r){if(null==r.to){var i=r.marker.find(1,!0);return e(t,i.line,sr(i.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==n.text.length)return!0;for(var o,l=0;l<n.markedSpans.length;++l)if((o=n.markedSpans[l]).marker.collapsed&&!o.marker.widgetNode&&o.from==r.to&&(null==o.to||o.to!=r.from)&&(o.marker.inclusiveLeft||r.marker.inclusiveRight)&&e(t,n,o))return!0}(e,t,r))return!0}}Pi(ir),ir.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Wi(this,"clear")}},ir.prototype.find=function(e,t){return this.primary.find(e,t)};var Lr=b.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function Tr(e,t,n){oi(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Nn(e,null,n)}function kr(e){if(null!=e.height)return e.height;var t,n=e.doc.cm;return n?(uo(document.body,e.node)||(t="position: relative;",e.coverGutter&&(t+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),e.noHScroll&&(t+="width: "+n.display.wrapper.clientWidth+"px;"),so(n.display.measure,oo("div",[e.node],null,t))),e.height=e.node.parentNode.offsetHeight):0}Pi(Lr),Lr.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=ri(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=kr(this);ni(n,Math.max(0,n.height-o)),e&&Ot(e,function(){Tr(e,n,-o),Ft(e,r,"widget")})}},Lr.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var r=kr(this)-e;r&&(ni(n,n.height+r),t&&Ot(t,function(){t.curOp.forceUpdate=!0,Tr(t,n,r)}))};var Mr=b.Line=function(e,t,n){this.text=e,fr(this,t),this.height=n?n(this):1};function Nr(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Wr(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){t=b.innerMode(e,t);return t.mode.blankLine?t.mode.blankLine(t.state):void 0}}function Ar(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=b.innerMode(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function Or(e,t,n,r){function i(e){return{start:h.start,end:h.pos,string:h.current(),type:o||null,state:e?jn(l.mode,c):c}}var o,l=e.doc,s=l.mode;t=Me(l,t);var a,u=Jr(l,t.line),c=qe(e,t.line,n),h=new er(u.text,e.options.tabSize);for(r&&(a=[]);(r||h.pos<t.ch)&&!h.eol();)h.start=h.pos,o=Ar(s,h,c),r&&a.push(i(!0));return r?a:i()}function Dr(e,t,n,r,i,o,l){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var a=0,u=null,c=new er(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Nr(Wr(n,r),o);!c.eol();){var f,d=c.pos>e.options.maxHighlightLength?(s=!1,l&&Er(e,t,r,c.pos),c.pos=t.length,null):Nr(Ar(n,c,r,h),o);if(!h||(f=h[0].name)&&(d="m-"+(d?f+" "+d:f)),!s||u!=d){for(;a<c.start;)i(a=Math.min(c.start,a+5e4),u);u=d}c.start=c.pos}for(;a<c.pos;){var p=Math.min(c.pos,a+5e4);i(p,u),a=p}}function Hr(e,t,n,r){var o=[e.state.modeGen],i={};Dr(e,t.text,e.doc.mode,n,function(e,t){o.push(e,t)},i,r);for(var l=0;l<e.state.overlays.length;++l){var s=e.state.overlays[l],a=1,u=0;Dr(e,t.text,s.mode,!0,function(e,t){for(var n=a;u<e;){var r=o[a];e<r&&o.splice(a,1,e,o[a+1],r),a+=2,u=Math.min(e,r)}if(t)if(s.opaque)o.splice(n,a-n,e,"cm-overlay "+t),a=n+2;else for(;n<a;n+=2){var i=o[n+1];o[n+1]=(i?i+" ":"")+"cm-overlay "+t}},i)}return{styles:o,classes:i.bgClass||i.textClass?i:null}}function Pr(e,t,n){var r,i;return t.styles&&t.styles[0]==e.state.modeGen||(r=qe(e,ri(t)),i=Hr(e,t,t.text.length>e.options.maxHighlightLength?jn(e.doc.mode,r):r),t.stateAfter=r,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++),t.styles}function Er(e,t,n,r){var i=e.doc.mode,o=new er(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&Wr(i,n);!o.eol();)Ar(i,o,n),o.start=o.pos}Pi(Mr),Mr.prototype.lineNo=function(){return ri(this)};var Ir={},zr={};function Fr(e,t){if(!e||/^\s*$/.test(e))return null;t=t.addModeClass?zr:Ir;return t[e]||(t[e]=e.replace(/\S+/g,"cm-$&"))}function Rr(e,t){var n=oo("span",null,null,d?"padding-right: .1px":null),r={pre:oo("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,splitSpaces:(v||d)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,l=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=Br,function(e){if(null!=bo)return bo;var t=so(e,document.createTextNode("AخA")),e=ao(t,0,1).getBoundingClientRect();if(!e||e.left==e.right)return!1;t=ao(t,1,2).getBoundingClientRect();return bo=t.right-e.right<3}(e.display.measure)&&(o=li(l))&&(r.addToken=function(h,f){return function(e,t,n,r,i,o,l){n=n?n+" cm-force-border":"cm-force-border";for(var s=e.pos,a=s+t.length;;){for(var u=0;u<f.length;u++){var c=f[u];if(c.to>s&&c.from<=s)break}if(c.to>=a)return h(e,t,n,r,i,o,l);h(e,t.slice(0,c.to-s),n,r,null,o,l),r=null,t=t.slice(c.to-s),s=c.to}}}(r.addToken,o)),r.map=[],function(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(!r){for(var l=1;l<n.length;l+=2)t.addToken(t,i.slice(o,o=n[l]),Fr(n[l+1],t.cm.options));return}for(var s,a,u,c,h,f,d,p=i.length,g=0,l=1,m="",v=0;;){if(v==g){u=c=h=f=a="",d=null,v=1/0;for(var y,b=[],w=0;w<r.length;++w){var x=r[w],C=x.marker;"bookmark"==C.type&&x.from==g&&C.widgetNode?b.push(C):x.from<=g&&(null==x.to||x.to>g||C.collapsed&&x.to==g&&x.from==g)?(null!=x.to&&x.to!=g&&v>x.to&&(v=x.to,c=""),C.className&&(u+=" "+C.className),C.css&&(a=(a?a+";":"")+C.css),C.startStyle&&x.from==g&&(h+=" "+C.startStyle),C.endStyle&&x.to==v&&(y=y||[]).push(C.endStyle,x.to),C.title&&!f&&(f=C.title),C.collapsed&&(!d||gr(d.marker,C)<0)&&(d=x)):x.from>g&&v>x.from&&(v=x.from)}if(y)for(w=0;w<y.length;w+=2)y[w+1]==v&&(c+=" "+y[w]);if(!d||d.from==g)for(w=0;w<b.length;++w)Ur(t,0,b[w]);if(d&&(d.from||0)==g){if(Ur(t,(null==d.to?p+1:d.to)-g,d.marker,null==d.from),null==d.to)return;d.to==g&&(d=!1)}}if(p<=g)break;for(var S=Math.min(p,v);;){if(m){var L,T=g+m.length;if(d||(L=S<T?m.slice(0,S-g):m,t.addToken(t,L,s?s+u:u,h,g+L.length==v?c:"",f,a)),S<=T){m=m.slice(S-g),g=S;break}g=T,h=""}m=i.slice(o,o=n[l++]),s=Fr(n[l++],t.cm.options)}}}(l,r,Pr(e,l,t!=e.display.externalMeasured&&ri(l))),l.styleClasses&&(l.styleClasses.bgClass&&(r.bgClass=go(l.styleClasses.bgClass,r.bgClass||"")),l.styleClasses.textClass&&(r.textClass=go(l.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(function(e){null==yo&&(t=oo("span","​"),so(e,oo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(yo=t.offsetWidth<=1&&2<t.offsetHeight&&!(v&&y<8)));var t=yo?oo("span","​"):oo("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return t.setAttribute("cm-text",""),t}(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return d&&/\bcm-tab\b/.test(r.content.lastChild.className)&&(r.content.className="cm-tab-wrap-hack"),Mi(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=go(r.pre.className,r.textClass||"")),r}function Br(e,t,n,r,i,o,l){if(t){var s=e.splitSpaces?t.replace(/ {3,}/g,Gr):t,a=e.cm.state.specialChars,u=!1;if(a.test(t))for(var c=document.createDocumentFragment(),h=0;;){a.lastIndex=h;var f,d=a.exec(t),p=d?d.index-h:t.length-h;if(p&&(f=document.createTextNode(s.slice(h,h+p)),v&&y<9?c.appendChild(oo("span",[f])):c.appendChild(f),e.map.push(e.pos,e.pos+p,f),e.col+=p,e.pos+=p),!d)break;h+=1+p,"\t"==d[0]?(p=(p=e.cm.options.tabSize)-e.col%p,(f=c.appendChild(oo("span",Ki(p),"cm-tab"))).setAttribute("role","presentation"),f.setAttribute("cm-text","\t"),e.col+=p):("\r"==d[0]||"\n"==d[0]?(f=c.appendChild(oo("span","\r"==d[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",d[0]):((f=e.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),v&&y<9?c.appendChild(oo("span",[f])):c.appendChild(f)),e.col+=1),e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var c=document.createTextNode(s);e.map.push(e.pos,e.pos+t.length,c),v&&y<9&&(u=!0),e.pos+=t.length}if(n||r||i||u||l){n=n||"";r&&(n+=r),i&&(n+=i);l=oo("span",[c],n,l);return o&&(l.title=o),e.content.appendChild(l)}e.content.appendChild(c)}}function Gr(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}function Ur(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i=i||e.content.appendChild(document.createElement("span"))).setAttribute("cm-marker",n.id),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t}function Vr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ji(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Kr(e,o,t,l){function i(e){return t?t[e]:null}function n(e,t,n){var r,i;r=t,i=n,t=l,(n=e).text=r,n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null),null!=n.order&&(n.order=null),hr(n),fr(n,i),(t=t?t(n):1)!=n.height&&ni(n,t),Wi(e,"change",e,o)}function r(e,t){for(var n=e,r=[];n<t;++n)r.push(new Mr(c[n],i(n),l));return r}var s,a=o.from,u=o.to,c=o.text,h=Jr(e,a.line),f=Jr(e,u.line),d=ji(c),p=i(c.length-1),g=u.line-a.line;o.full?(e.insert(0,r(0,c.length)),e.remove(c.length,e.size-c.length)):Vr(e,o)?(s=r(0,c.length-1),n(f,f.text,p),g&&e.remove(a.line,g),s.length&&e.insert(a.line,s)):h==f?1==c.length?n(h,h.text.slice(0,a.ch)+d+h.text.slice(u.ch),p):((s=r(1,c.length-1)).push(new Mr(d+h.text.slice(u.ch),p,l)),n(h,h.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,s)):1==c.length?(n(h,h.text.slice(0,a.ch)+c[0]+f.text.slice(u.ch),i(0)),e.remove(a.line+1,g)):(n(h,h.text.slice(0,a.ch)+c[0],i(0)),n(f,d+f.text.slice(u.ch),p),s=r(1,c.length-1),1<g&&e.remove(a.line+1,g-1),e.insert(a.line+1,s)),Wi(e,"change",e,o)}function jr(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Xr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}jr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n,r=e,i=e+t;r<i;++r){var o=this.lines[r];this.height-=o.height,(n=o).parent=null,hr(n),Wi(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Xr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n,r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e),s=i.height;if(i.removeInner(e,l),this.height-=s-i.height,o==l&&(this.children.splice(r--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof jr))&&(n=[],this.collapse(n),this.children=[new jr(n)],this.children[0].parent=this)},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&50<i.lines.length){for(;50<i.lines.length;){var l=new jr(i.lines.splice(i.lines.length-25,25));i.height-=l.height,this.children.splice(r+1,0,l),l.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t,n=new Xr(e.children.splice(e.children.length-5,5))}while(e.parent?(e.size-=n.size,e.height-=n.height,t=Yi(e.parent.children,e),e.parent.children.splice(t+1,0,n)):(((t=new Xr(e.children)).parent=e).children=[t,n],e=t),n.parent=e.parent,10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e);if(i.iterN(e,l,n))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var Yr=0,_r=b.Doc=function(e,t,n,r){if(!(this instanceof _r))return new _r(e,t,n,r);null==n&&(n=0),Xr.call(this,[new jr([new Mr("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;n=ie(n,0);this.sel=Te(n),this.history=new si(null),this.id=++Yr,this.modeOption=t,this.lineSep=r,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Kr(this,{from:n,to:n,text:e}),Ie(this,Te(n),zi)};_r.prototype=qi(Xr.prototype,{constructor:_r,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ti(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Pt(function(e){var t=ie(this.first,0),n=this.first+this.size-1;xn(this,{from:t,to:ie(n,Jr(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Ie(this,Te(t))}),replaceRange:function(e,t,n,r){kn(this,e,t=Me(this,t),n=n?Me(this,n):t,r)},getRange:function(e,t,n){t=ei(this,Me(this,e),Me(this,t));return!1===n?t:t.join(n||this.lineSeparator())},getLine:function(e){e=this.getLineHandle(e);return e&&e.text},getLineHandle:function(e){if(Ne(this,e))return Jr(this,e)},getLineNumber:ri,getLineHandleVisualStart:function(e){return wr(e="number"==typeof e?Jr(this,e):e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Me(this,e)},getCursor:function(e){var t=this.sel.primary(),t=null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from();return t},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Pt(function(e,t,n){Pe(this,Me(this,"number"==typeof e?ie(e,t||0):e),null,n)}),setSelection:Pt(function(e,t,n){Pe(this,Me(this,e),Me(this,t||e),n)}),extendSelection:Pt(function(e,t,n){Oe(this,Me(this,e),t&&Me(this,t),n)}),extendSelections:Pt(function(e,t){De(this,We(this,e),t)}),extendSelectionsBy:Pt(function(e,t){De(this,We(this,_i(this.sel.ranges,e)),t)}),setSelections:Pt(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new Se(Me(this,e[r].anchor),Me(this,e[r].head));Ie(this,Le(i,t=null==t?Math.min(e.length-1,this.sel.primIndex):t),n)}}),addSelection:Pt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Se(Me(this,e),Me(this,t||e))),Ie(this,Le(r,r.length-1),n)}),getSelection:function(e){for(var t=this.sel.ranges,n=0;n<t.length;n++)var r=ei(this,t[n].from(),t[n].to()),i=i?i.concat(r):r;return!1===e?i:i.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=ei(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Pt(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];r[o]={from:l.from(),to:l.to(),text:this.splitLines(e[o]),origin:n}}for(t=t&&"end"!=t&&function(e,t,n){for(var r=[],i=u=ie(e.first,0),o=0;o<t.length;o++){var l=t[o],s=bn(l.from,u,i),a=bn(mn(l),u,i),u=l.to,i=a;"around"==n?(l=e.sel.ranges[o],l=oe(l.head,l.anchor)<0,r[o]=new Se(l?a:s,l?s:a)):r[o]=new Se(s,s)}return new Ce(r,e.sel.primIndex)}(this,r,t),o=r.length-1;0<=o;o--)xn(this,r[o]);t?Ee(this,t):this.cm&&Wn(this.cm)}),undo:Pt(function(){Sn(this,"undo")}),redo:Pt(function(){Sn(this,"redo")}),undoSelection:Pt(function(){Sn(this,"undo",!0)}),redoSelection:Pt(function(){Sn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new si(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:di(this.history.done),undone:di(this.history.undone)}},setHistory:function(e){var t=this.history=new si(this.history.maxGeneration);t.done=di(e.done.slice(0),null,!0),t.undone=di(e.undone.slice(0),null,!0)},addLineClass:Pt(function(e,n,r){return Dn(this,e,"gutter"==n?"gutter":"class",function(e){var t="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[t]){if(ho(r).test(e[t]))return;e[t]+=" "+r}else e[t]=r;return 1})}),removeLineClass:Pt(function(e,o,l){return Dn(this,e,"gutter"==o?"gutter":"class",function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",n=e[t];if(n){if(null==l)e[t]=null;else{var r=n.match(ho(l));if(!r)return;var i=r.index+r[0].length;e[t]=n.slice(0,r.index)+(r.index&&i!=n.length?" ":"")+n.slice(i)||null}return 1}})}),addLineWidget:Pt(function(e,t,n){return e=e,i=new Lr(r=this,t,n),(o=r.cm)&&i.noHScroll&&(o.display.alignWidgets=!0),Dn(r,e,"widget",function(e){var t=e.widgets||(e.widgets=[]);return null==i.insertAt?t.push(i):t.splice(Math.min(t.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!Sr(r,e)&&(t=oi(e)<r.scrollTop,ni(e,e.height+kr(i)),t&&Nn(o,null,i.height),o.curOp.forceUpdate=!0),1}),i;var r,i,o}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return rr(this,Me(this,e),Me(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){t={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return rr(this,e=Me(this,e),e,t,"bookmark")},findMarksAt:function(e){var t=[],n=Jr(this,(e=Me(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(i,o,l){i=Me(this,i),o=Me(this,o);var s=[],a=i.line;return this.iter(i.line,o.line+1,function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;n++){var r=t[n];a==i.line&&i.ch>r.to||null==r.from&&a!=i.line||a==o.line&&r.from>o.ch||l&&!l(r.marker)||s.push(r.marker.parent||r.marker)}++a}),s},getAllMarks:function(){var r=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var n=0;n<t.length;++n)null!=t[n].from&&r.push(t[n].marker)}),r},posFromIndex:function(t){var n,r=this.first;return this.iter(function(e){e=e.text.length+1;if(t<e)return n=t,!0;t-=e,++r}),Me(this,ie(r,n))},indexFromPos:function(e){var t=(e=Me(this,e)).ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new _r(ti(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e=e||{};var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);t=new _r(ti(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:e.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),i=e.clipPos(i.to);oe(o,i)&&(i=rr(e,o,i,r.primary,r.primary.type),r.markers.push(i),i.parent=r)}}(t,or(this)),t},unlinkDoc:function(e){if(e instanceof b&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),function(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Zr(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==Yi(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}(or(this));break}var n;e.history==this.history&&(n=[e.id],Zr(e,function(e){n.push(e.id)},!0),e.history=new si(null),e.history.done=di(this.history.done,n),e.history.undone=di(this.history.undone,n))},iterLinkedDocs:function(e){Zr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):xo(e)},lineSeparator:function(){return this.lineSep||"\n"}}),_r.prototype.eachLine=_r.prototype.iter;var $r,qr="iter insert remove copy getEditor constructor".split(" ");for($r in _r.prototype)_r.prototype.hasOwnProperty($r)&&Yi(qr,$r)<0&&(b.prototype[$r]=function(e){return function(){return e.apply(this.doc,arguments)}}(_r.prototype[$r]));function Zr(e,s,a){!function e(t,n,r){if(t.linked)for(var i=0;i<t.linked.length;++i){var o,l=t.linked[i];l.doc!=n&&(o=r&&l.sharedHist,a&&!o||(s(l.doc,o),e(l.doc,t,o)))}}(e,null,!0)}function Qr(e,t){if(t.cm)throw new Error("This document is already in use.");L((e.doc=t).cm=e),x(e),e.options.lineWrapping||A(e),e.options.mode=t.modeOption,zt(e)}function Jr(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function ei(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){e=e.text;i==n.line&&(e=e.slice(0,n.ch)),i==t.line&&(e=e.slice(t.ch)),r.push(e),++i}),r}function ti(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function ni(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function ri(e){if(null==e.parent)return null;for(var t=e.parent,n=Yi(t.lines,e),r=t.parent;r;r=(t=r).parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function ii(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(r=0;r<e.lines.length;++r){var l=e.lines[r].height;if(t<l)break;t-=l}return n+r}function oi(e){for(var t=0,n=(e=wr(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(r=0;r<o.children.length;++r){var l=o.children[r];if(l==n)break;t+=l.height}return t}function li(e){var t=e.order;return t=null==t?e.order=Ko(e.text):t}function si(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ai(e,t){var n={from:le(t.from),to:mn(t),text:ei(e,t.from,t.to)};return fi(e,n,t.from.line,t.to.line+1),Zr(e,function(e){fi(e,n,t.from.line,t.to.line+1)},!0),n}function ui(e){for(;e.length;){if(!ji(e).ranges)break;e.pop()}}function ci(e,t,n,r){var i=e.history;i.undone.length=0;var o,l=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>l-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=(a=i).lastOp==r?(ui(a.done),ji(a.done)):a.done.length&&!ji(a.done).ranges?ji(a.done):1<a.done.length&&!a.done[a.done.length-2].ranges?(a.done.pop(),ji(a.done)):void 0)){var s=ji(o.changes);0==oe(t.from,t.to)&&0==oe(t.from,s.to)?s.to=mn(t):o.changes.push(ai(e,t))}else{var a=ji(i.done);for(a&&a.ranges||hi(e.sel,i.done),o={changes:[ai(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||Mi(e,"historyAdded")}function hi(e,t){var n=ji(t);n&&n.ranges&&n.equals(e)||t.push(e)}function fi(t,n,e,r){var i=n["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,r),function(e){e.markedSpans&&((i=i||(n["spans_"+t.id]={}))[o]=e.markedSpans),++o})}function di(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?Ce.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];i.push({changes:s});for(var a=0;a<l.length;++a){var u,c=l[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&-1<Yi(t,Number(u[1]))&&(ji(s)[h]=c[h],delete c[h])}}}return i}function pi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function gi(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)pi(o.ranges[s].anchor,t,n,r),pi(o.ranges[s].head,t,n,r)}else{for(s=0;s<o.changes.length;++s){var a=o.changes[s];if(n<a.from.line)a.from=ie(a.from.line+r,a.from.ch),a.to=ie(a.to.line+r,a.to.ch);else if(t<=a.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function mi(e,t){var n=t.from.line,r=t.to.line,t=t.text.length-(r-n)-1;gi(e.done,n,r,t),gi(e.undone,n,r,t)}Pi(_r);var vi=b.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},yi=b.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function bi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var wi=b.e_stop=function(e){vi(e),yi(e)};function xi(e){return e.target||e.srcElement}function Ci(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),t=g&&e.ctrlKey&&1==t?3:t}var Si=b.on=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):((e=e._handlers||(e._handlers={}))[t]||(e[t]=[])).push(n)},Li=[];function Ti(e,t,n){t=e._handlers&&e._handlers[t];return n?t&&0<t.length?t.slice():Li:t||Li}var ki=b.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else for(var r=Ti(e,t,!1),i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}},Mi=b.signal=function(e,t){var n=Ti(e,t,!0);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Ni=null;function Wi(e,t){var n=Ti(e,t,!1);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);Mt?r=Mt.delayedCallbacks:Ni?r=Ni:(r=Ni=[],setTimeout(Ai,0));for(var o=0;o<n.length;++o)r.push(function(e){return function(){e.apply(null,i)}}(n[o]))}}function Ai(){var e=Ni;Ni=null;for(var t=0;t<e.length;++t)e[t]()}function Oi(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Mi(e,n||t.type,e,t),bi(t)||t.codemirrorIgnore}function Di(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Yi(n,t[r])&&n.push(t[r])}function Hi(e,t){return 0<Ti(e,t).length}function Pi(e){e.prototype.on=function(e,t){Si(this,e,t)},e.prototype.off=function(e,t){ki(this,e,t)}}var Ei=30,Ii=b.Pass={toString:function(){return"CodeMirror.Pass"}},zi={scroll:!1},Fi={origin:"*mouse"},Ri={origin:"+move"};function Bi(){this.id=null}Bi.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Gi=b.countColumn=function(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,l=i||0;;){var s=e.indexOf("\t",o);if(s<0||t<=s)return l+(t-o);l+=s-o,l+=n-l%n,o=s+1}},Ui=b.findColumn=function(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r),l=(o=-1==o?e.length:o)-r;if(o==e.length||t<=i+l)return r+Math.min(l,t-i);if(i+=o-r,r=o+1,t<=(i+=n-i%n))return r}},Vi=[""];function Ki(e){for(;Vi.length<=e;)Vi.push(ji(Vi)+" ");return Vi[e]}function ji(e){return e[e.length-1]}var Xi=function(e){e.select()};function Yi(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function _i(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function $i(){}function qi(e,t){e=Object.create?Object.create(e):($i.prototype=e,new $i);return t&&Zi(t,e),e}function Zi(e,t,n){for(var r in t=t||{},e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function Qi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}l?Xi=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:v&&(Xi=function(e){try{e.select()}catch(e){}});var Ji=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,eo=b.isWordChar=function(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Ji.test(e))};function to(e,t){return t?!!(-1<t.source.indexOf("\\w")&&eo(e))||t.test(e):eo(e)}function no(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return;return 1}var ro=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function io(e){return 768<=e.charCodeAt(0)&&ro.test(e)}function oo(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function lo(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function so(e,t){return lo(e).appendChild(t)}var ao=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},uo=b.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if((t=11==t.nodeType?t.host:t)==e)return!0}while(t=t.parentNode)};function co(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function ho(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}v&&y<11&&(co=function(){try{return document.activeElement}catch(e){return document.body}});var fo=b.rmClass=function(e,t){var n=e.className,r=ho(t).exec(n);r&&(t=n.slice(r.index+r[0].length),e.className=n.slice(0,r.index)+(t?r[1]+t:""))},po=b.addClass=function(e,t){var n=e.className;ho(t).test(n)||(e.className+=(n?" ":"")+t)};function go(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!ho(n[r]).test(t)&&(t+=" "+n[r]);return t}function mo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}var vo=!1;var yo,bo,wo=function(){if(v&&y<9)return!1;var e=oo("div");return"draggable"in e||"dragDrop"in e}();var xo=b.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(n.push(o.slice(0,l)),t+=l+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Co=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},So="oncopy"in(t=oo("div"))||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy),Lo=null;var To,ko=b.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function Mo(e){return e.level%2?e.to:e.from}function No(e){return e.level%2?e.from:e.to}function Wo(e){e=li(e);return e?Mo(e[0]):0}function Ao(e){var t=li(e);return t?No(ji(t)):e.text.length}function Oo(e,t){var n=Jr(e.doc,t),e=wr(n);e!=n&&(t=ri(e));n=li(e),e=n?(n[0].level%2?Ao:Wo)(e):0;return ie(t,e)}function Do(e,t){var n=Oo(e,t.line),r=Jr(e.doc,n.line),e=li(r);if(e&&0!=e[0].level)return n;r=Math.max(0,r.text.search(/\S/)),t=t.line==n.line&&t.ch<=r&&t.ch;return ie(n.line,t?0:r)}function Ho(e,t){To=null;for(var n,r,i,o,l=0;l<e.length;++l){var s=e[l];if(s.from<t&&s.to>t)return l;if(s.from==t||s.to==t){if(null!=n)return r=e,i=s.level,o=e[n].level,r=r[0].level,i==r||o!=r&&i<o?(s.from!=s.to&&(To=n),l):(s.from!=s.to&&(To=l),n);n=l}}return n}function Po(e,t,n,r){if(!r)return t+n;for(;t+=n,0<t&&io(e.text.charAt(t)););return t}function Eo(e,t,n,r){var i=li(e);if(!i)return Io(e,t,n,r);for(var o=Ho(i,t),l=i[o],s=Po(e,t,l.level%2?-n:n,r);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return Ho(i,s)==o?s:0<n==(l=i[o+=n]).level%2?l.to:l.from;if(!(l=i[o+=n]))return null;s=0<n==l.level%2?Po(e,l.to,-1,r):Po(e,l.from,1,r)}}function Io(e,t,n,r){var i=t+n;if(r)for(;0<i&&io(e.text.charAt(i));)i+=n;return i<0||i>e.text.length?null:i}!function(){for(var e=0;e<10;e++)ko[e+48]=ko[e+96]=String(e);for(e=65;e<=90;e++)ko[e]=String.fromCharCode(e);for(e=1;e<=12;e++)ko[e+111]=ko[e+63235]="F"+e}();var zo,Fo,Ro,Bo,Go,Uo,Vo,Ko=(zo="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",Fo="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",Ro=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Bo=/[stwN]/,Go=/[LRr]/,Uo=/[Lb1n]/,Vo=/[1n]/,function(e){if(!Ro.test(e))return!1;for(var t,n=e.length,r=[],i=0;i<n;++i)r.push(c=(t=e.charCodeAt(i))<=247?zo.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?Fo.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L");for(var i=0,o="L";i<n;++i)"m"==(c=r[i])?r[i]=o:o=c;for(var i=0,l="L";i<n;++i)"1"==(c=r[i])&&"r"==l?r[i]="n":Go.test(c)&&"r"==(l=c)&&(r[i]="R");for(i=1,o=r[0];i<n-1;++i)"+"==(c=r[i])&&"1"==o&&"1"==r[i+1]?r[i]="1":","!=c||o!=r[i+1]||"1"!=o&&"n"!=o||(r[i]=o),o=c;for(i=0;i<n;++i)if(","==(c=r[i]))r[i]="N";else if("%"==c){for(var s=i+1;s<n&&"%"==r[s];++s);for(var a=i&&"!"==r[i-1]||s<n&&"1"==r[s]?"1":"N",u=i;u<s;++u)r[u]=a;i=s-1}for(i=0,l="L";i<n;++i){var c=r[i];"L"==l&&"1"==c?r[i]="L":Go.test(c)&&(l=c)}for(i=0;i<n;++i)if(Bo.test(r[i])){for(s=i+1;s<n&&Bo.test(r[s]);++s);for(var h="L"==(i?r[i-1]:"L"),f="L"==(s<n?r[s]:"L"),a=h||f?"L":"R",u=i;u<s;++u)r[u]=a;i=s-1}for(var d,p=[],i=0;i<n;)if(Uo.test(r[i])){var g=i;for(++i;i<n&&Uo.test(r[i]);++i);p.push(new jo(0,g,i))}else{var m=i,v=p.length;for(++i;i<n&&"L"!=r[i];++i);for(u=m;u<i;)if(Vo.test(r[u])){m<u&&p.splice(v,0,new jo(1,m,u));var y=u;for(++u;u<i&&Vo.test(r[u]);++u);p.splice(v,0,new jo(2,y,u)),m=u}else++u;m<i&&p.splice(v,0,new jo(1,m,i))}return 1==p[0].level&&(d=e.match(/^\s+/))&&(p[0].from=d[0].length,p.unshift(new jo(0,0,d[0].length))),1==ji(p).level&&(d=e.match(/\s+$/))&&(ji(p).to-=d[0].length,p.push(new jo(0,n-d[0].length,n))),2==p[0].level&&p.unshift(new jo(1,p[0].to,p[0].to)),p[0].level!=ji(p).level&&p.push(new jo(p[0].level,n,n)),p});function jo(e,t,n){this.level=e,this.from=t,this.to=n}return b.version="5.10.1",b});
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(ze){"use strict";function Ae(e,t,r){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}ze.defineMode("javascript",function(e,u){var n,a,l=e.indentUnit,s=u.statementIndent,i=u.jsonld,o=u.json||i,f=u.typescript,d=u.wordCharacters||/[\w$\xa1-\uffff]/,c=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:n,break:n,continue:n,new:e("new"),delete:n,throw:n,debugger:n,var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:a,typeof:a,instanceof:a,true:i,false:i,null:i,undefined:i,NaN:i,Infinity:i,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n};if(f){var c,i={type:"variable",style:"variable-3"},u={interface:e("class"),implements:n,namespace:n,module:e("module"),enum:e("module"),public:e("modifier"),private:e("modifier"),protected:e("modifier"),abstract:e("modifier"),as:a,string:i,number:i,boolean:i,any:i};for(c in u)o[c]=u[c]}return o}(),p=/[+\-*&%=<>!?|~^]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function v(e,t,r){return n=e,a=r,t}function y(e,t){var a,r=e.next();if('"'==r||"'"==r)return t.tokenize=(a=r,function(e,t){var r,n=!1;if(i&&"@"==e.peek()&&e.match(m))return t.tokenize=y,v("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=a||n);)n=!n&&"\\"==r;return n||(t.tokenize=y),v("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return v("number","number");if("."==r&&e.match(".."))return v("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return v(r);if("="==r&&e.eat(">"))return v("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),v("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),v("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),v("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),v("number","number");if("/"==r)return e.eat("*")?(t.tokenize=k)(e,t):e.eat("/")?(e.skipToEnd(),v("comment","comment")):Ae(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),v("regexp","string-2")):(e.eatWhile(p),v("operator","operator",e.current()));if("`"==r)return(t.tokenize=b)(e,t);if("#"==r)return e.skipToEnd(),v("error","error");if(p.test(r))return e.eatWhile(p),v("operator","operator",e.current());if(d.test(r)){e.eatWhile(d);r=e.current(),e=c.propertyIsEnumerable(r)&&c[r];return e&&"."!=t.lastType?v(e.type,e.style,r):v("variable","variable",r)}}function k(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=y;break}n="*"==r}return v("comment","comment")}function b(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=y;break}n=!n&&"\\"==r}return v("quasi","string-2",e.current())}var x="([{}])";function h(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){for(var n=0,a=!1,i=r-1;0<=i;--i){var o=e.string.charAt(i),c=x.indexOf(o);if(0<=c&&c<3){if(!n){++i;break}if(0==--n)break}else if(3<=c&&c<6)++n;else if(d.test(o))a=!0;else{if(/["'\/]/.test(o))return;if(a&&!n){++i;break}}}a&&!n&&(t.fatArrowAt=i)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function g(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function j(e,t,r,n,a){var i=e.cc;for(M.state=e,M.stream=a,M.marked=null,M.cc=i,M.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():o?C:q)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return M.marked?M.marked:"variable"==r&&function(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return 1;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return 1}(e,n)?"variable-2":t}}var M={state:null,column:null,marked:null,cc:null};function V(){for(var e=arguments.length-1;0<=e;e--)M.cc.push(arguments[e])}function E(){return V.apply(null,arguments),!0}function r(r){function e(e){for(var t=e;t;t=t.next)if(t.name==r)return 1}var t=M.state;M.marked="def",t.context?e(t.localVars)||(t.localVars={name:r,next:t.localVars}):e(t.globalVars)||u.globalVars&&(t.globalVars={name:r,next:t.globalVars})}var t={name:"this",next:{name:"arguments"}};function I(){M.state.context={prev:M.state.context,vars:M.state.localVars},M.state.localVars=t}function z(){M.state.localVars=M.state.context.vars,M.state.context=M.state.context.prev}function A(n,a){function e(){var e=M.state,t=e.indented;if("stat"==e.lexical.type)t=e.lexical.indented;else for(var r=e.lexical;r&&")"==r.type&&r.align;r=r.prev)t=r.indented;e.lexical=new g(t,M.stream.column(),n,null,e.lexical,a)}return e.lex=!0,e}function T(){var e=M.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function $(r){return function e(t){return t==r?E():";"==r?V():E(e)}}function q(e,t){return"var"==e?E(A("vardef",t.length),ne,$(";"),T):"keyword a"==e?E(A("form"),C,q,T):"keyword b"==e?E(A("form"),q,T):"{"==e?E(A("}"),_,T):";"==e?E():"if"==e?("else"==M.state.lexical.info&&M.state.cc[M.state.cc.length-1]==T&&M.state.cc.pop()(),E(A("form"),C,q,T,ue)):"function"==e?E(me):"for"==e?E(A("form"),le,q,T):"variable"==e?E(A("stat"),K):"switch"==e?E(A("form"),C,A("}","switch"),$("{"),_,T,T):"case"==e?E(C,$(":")):"default"==e?E($(":")):"catch"==e?E(A("form"),I,$("("),ve,$(")"),q,T,z):"class"==e?E(A("form"),ye,T):"export"==e?E(A("stat"),he,T):"import"==e?E(A("stat"),we,T):"module"==e?E(A("form"),ae,A("}"),$("{"),_,T,T):V(A("stat"),C,$(";"),T)}function C(e){return O(e,!1)}function W(e){return O(e,!0)}function O(e,t){if(M.state.fatArrowAt==M.stream.start){var r=t?F:D;if("("==e)return E(I,A(")"),Y(ae,")"),T,$("=>"),r,z);if("variable"==e)return V(I,ae,$("=>"),r,z)}var n,r=t?B:N;return w.hasOwnProperty(e)?E(r):"function"==e?E(me,r):"keyword c"==e?E(t?S:P):"("==e?E(A(")"),P,Ie,$(")"),T,r):"operator"==e||"spread"==e?E(t?W:C):"["==e?E(A("]"),Ve,T,r):"{"==e?Z(Q,"}",null,r):"quasi"==e?V(H,r):"new"==e?E((n=t,function(e){return"."==e?E(n?J:G):V(n?W:C)})):E()}function P(e){return e.match(/[;\}\)\],]/)?V():V(C)}function S(e){return e.match(/[;\}\)\],]/)?V():V(W)}function N(e,t){return","==e?E(C):B(e,t,!1)}function B(e,t,r){var n=0==r?N:B,a=0==r?C:W;return"=>"==e?E(I,r?F:D,z):"operator"==e?/\+\+|--/.test(t)?E(n):"?"==t?E(C,$(":"),a):E(a):"quasi"==e?V(H,n):";"!=e?"("==e?Z(W,")","call",n):"."==e?E(L,n):"["==e?E(A("]"),P,$("]"),T,n):void 0:void 0}function H(e,t){return"quasi"!=e?V():"${"!=t.slice(t.length-2)?E(H):E(C,U)}function U(e){if("}"==e)return M.marked="string-2",M.state.tokenize=b,E(H)}function D(e){return h(M.stream,M.state),V("{"==e?q:C)}function F(e){return h(M.stream,M.state),V("{"==e?q:W)}function G(e,t){if("target"==t)return M.marked="keyword",E(N)}function J(e,t){if("target"==t)return M.marked="keyword",E(B)}function K(e){return":"==e?E(T,q):V(N,$(";"),T)}function L(e){if("variable"==e)return M.marked="property",E()}function Q(e,t){return"variable"==e||"keyword"==M.style?(M.marked="property",E("get"==t||"set"==t?R:X)):"number"==e||"string"==e?(M.marked=i?"property":M.style+" property",E(X)):"jsonld-keyword"==e?E(X):"modifier"==e?E(Q):"["==e?E(C,$("]"),X):"spread"==e?E(C):void 0}function R(e){return"variable"!=e?V(X):(M.marked="property",E(me))}function X(e){return":"==e?E(W):"("==e?V(me):void 0}function Y(t,r){function n(e){if(","!=e)return e==r?E():E($(r));e=M.state.lexical;return"call"==e.info&&(e.pos=(e.pos||0)+1),E(t,n)}return function(e){return e==r?E():V(t,n)}}function Z(e,t,r){for(var n=3;n<arguments.length;n++)M.cc.push(arguments[n]);return E(A(t,r),Y(e,t),T)}function _(e){return"}"==e?E():V(q,_)}function ee(e){if(f&&":"==e)return E(re)}function te(e,t){if("="==t)return E(W)}function re(e){if("variable"==e)return M.marked="variable-3",E()}function ne(){return V(ae,ee,oe,ce)}function ae(e,t){return"modifier"==e?E(ae):"variable"==e?(r(t),E()):"spread"==e?E(ae):"["==e?Z(ae,"]"):"{"==e?Z(ie,"}"):void 0}function ie(e,t){return"variable"!=e||M.stream.match(/^\s*:/,!1)?("variable"==e&&(M.marked="property"),"spread"==e?E(ae):"}"==e?V():E($(":"),ae,oe)):(r(t),E(oe))}function oe(e,t){if("="==t)return E(W)}function ce(e){if(","==e)return E(ne)}function ue(e,t){if("keyword b"==e&&"else"==t)return E(A("form","else"),q,T)}function le(e){if("("==e)return E(A(")"),se,$(")"),T)}function se(e){return"var"==e?E(ne,$(";"),de):";"==e?E(de):"variable"==e?E(fe):V(C,$(";"),de)}function fe(e,t){return"in"==t||"of"==t?(M.marked="keyword",E(C)):E(N,de)}function de(e,t){return";"==e?E(pe):"in"==t||"of"==t?(M.marked="keyword",E(C)):V(C,$(";"),pe)}function pe(e){")"!=e&&E(C)}function me(e,t){return"*"==t?(M.marked="keyword",E(me)):"variable"==e?(r(t),E(me)):"("==e?E(I,A(")"),Y(ve,")"),T,q,z):void 0}function ve(e){return"spread"==e?E(ve):V(ae,ee,te)}function ye(e,t){if("variable"==e)return r(t),E(ke)}function ke(e,t){return"extends"==t?E(C,ke):"{"==e?E(A("}"),be,T):void 0}function be(e,t){return"variable"==e||"keyword"==M.style?"static"==t?(M.marked="keyword",E(be)):(M.marked="property","get"==t||"set"==t?E(xe,me,be):E(me,be)):"*"==t?(M.marked="keyword",E(be)):";"==e?E(be):"}"==e?E():void 0}function xe(e){return"variable"!=e?V():(M.marked="property",E())}function he(e,t){return"*"==t?(M.marked="keyword",E(Me,$(";"))):"default"==t?(M.marked="keyword",E(C,$(";"))):V(q)}function we(e){return"string"==e?E():V(ge,Me)}function ge(e,t){return"{"==e?Z(ge,"}"):("variable"==e&&r(t),"*"==t&&(M.marked="keyword"),E(je))}function je(e,t){if("as"==t)return M.marked="keyword",E(ge)}function Me(e,t){if("from"==t)return M.marked="keyword",E(C)}function Ve(e){return"]"==e?E():V(W,Ee)}function Ee(e){return"for"==e?V(Ie,$("]")):","==e?E(Y(S,"]")):V(Y(W,"]"))}function Ie(e){return"for"==e?E(le,Ie):"if"==e?E(C,Ie):void 0}return T.lex=!0,{startState:function(e){e={tokenize:y,lastType:"sof",cc:[],lexical:new g((e||0)-l,0,"block",!1),localVars:u.localVars,context:u.localVars&&{vars:u.localVars},indented:e||0};return u.globalVars&&"object"==typeof u.globalVars&&(e.globalVars=u.globalVars),e},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),h(e,t)),t.tokenize!=k&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=a&&"--"!=a?n:"incdec",j(t,r,n,a,e))},indent:function(e,t){if(e.tokenize==k)return ze.Pass;if(e.tokenize!=y)return 0;var r=t&&t.charAt(0),n=e.lexical;if(!/^\s*else\b/.test(t))for(var a=e.cc.length-1;0<=a;--a){var i=e.cc[a];if(i==T)n=n.prev;else if(i!=ue)break}"stat"==n.type&&"}"==r&&(n=n.prev);var o=(n=s&&")"==n.type&&"stat"==n.prev.type?n.prev:n).type,c=r==o;return"vardef"==o?n.indented+("operator"==e.lastType||","==e.lastType?n.info+1:0):"form"==o&&"{"==r?n.indented:"form"==o?n.indented+l:"stat"==o?n.indented+(r=t,"operator"==(o=e).lastType||","==o.lastType||p.test(r.charAt(0))||/[,.]/.test(r.charAt(0))?s||l:0):"switch"!=n.info||c||0==u.doubleIndentSwitch?n.align?n.column+(c?0:1):n.indented+(c?0:l):n.indented+(/^(?:case|default)\b/.test(t)?l:2*l)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:o?null:"/*",blockCommentEnd:o?null:"*/",lineComment:o?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:o?"json":"javascript",jsonldMode:i,jsonMode:o,expressionAllowed:Ae,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=C&&t!=W||e.cc.pop()}}}),ze.registerHelper("wordChars","javascript",/[\w$]/),ze.defineMIME("text/javascript","javascript"),ze.defineMIME("text/ecmascript","javascript"),ze.defineMIME("application/javascript","javascript"),ze.defineMIME("application/x-javascript","javascript"),ze.defineMIME("application/ecmascript","javascript"),ze.defineMIME("application/json",{name:"javascript",json:!0}),ze.defineMIME("application/x-json",{name:"javascript",json:!0}),ze.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),ze.defineMIME("text/typescript",{name:"javascript",typescript:!0}),ze.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(z){"use strict";var N={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},T={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};z.defineMode("xml",function(t,e){var n,a,i,l=t.indentUnit,u={},r=e.htmlMode?N:T;for(n in r)u[n]=r[n];for(n in e)u[n]=e[n];function d(e,n){function t(t){return(n.tokenize=t)(e,n)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?t(o("atom","]]>")):null:e.match("--")?t(o("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),t(function r(o){return function(t,e){for(var n;null!=(n=t.next());){if("<"==n)return e.tokenize=r(o+1),e.tokenize(t,e);if(">"==n){if(1!=o)return e.tokenize=r(o-1),e.tokenize(t,e);e.tokenize=d;break}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),n.tokenize=o("meta","?>"),"meta"):(a=e.eat("/")?"closeTag":"openTag",n.tokenize=c,"tag bracket");if("&"!=r)return e.eatWhile(/[^&<]/),null;r=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";");return r?"atom":"error"}function c(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=d,a=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return a="equals",null;if("<"!=n)return/[\'\"]/.test(n)?(e.tokenize=(r=n,o.isInAttribute=!0,o),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");e.tokenize=d,e.state=g,e.tagName=e.tagStart=null;var r,e=e.tokenize(t,e);return e?e+" tag error":"tag error";function o(t,e){for(;!t.eol();)if(t.next()==r){e.tokenize=c;break}return"string"}}function o(n,r){return function(t,e){for(;!t.eol();){if(t.match(r)){e.tokenize=d;break}t.next()}return n}}function f(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(u.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function s(t){t.context&&(t.context=t.context.prev)}function m(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!u.contextGrabbers.hasOwnProperty(n)||!u.contextGrabbers[n].hasOwnProperty(e))return;s(t)}}function g(t,e,n){return"openTag"==t?(n.tagStart=e.column(),p):"closeTag"==t?h:g}function p(t,e,n){return"word"==t?(n.tagName=e.current(),i="tag",k):(i="error",p)}function h(t,e,n){if("word"!=t)return i="error",b;e=e.current();return n.context&&n.context.tagName!=e&&u.implicitlyClosed.hasOwnProperty(n.context.tagName)&&s(n),n.context&&n.context.tagName==e?(i="tag",x):(i="tag error",b)}function x(t,e,n){return"endTag"!=t?(i="error",x):(s(n),g)}function b(t,e,n){return i="error",x(t,0,n)}function k(t,e,n){if("word"==t)return i="attribute",w;if("endTag"!=t&&"selfcloseTag"!=t)return i="error",k;var r=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||u.autoSelfClosers.hasOwnProperty(r)?m(n,r):(m(n,r),n.context=new f(n,r,o==n.indented)),g}function w(t,e,n){return"equals"==t?v:(u.allowMissing||(i="error"),k(t,0,n))}function v(t,e,n){return"string"==t?y:"word"==t&&u.allowUnquoted?(i="string",k):(i="error",k(t,0,n))}function y(t,e,n){return"string"==t?y:k(t,0,n)}return d.isInText=!0,{startState:function(t){var e={tokenize:d,state:g,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;a=null;var n=e.tokenize(t,e);return(n||a)&&"comment"!=n&&(i=null,e.state=e.state(a||n,t,e),i&&(n="error"==i?n+" error":i)),n},indent:function(t,e,n){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+l;if(r&&r.noIndent)return z.Pass;if(t.tokenize!=c&&t.tokenize!=d)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==u.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+l*(u.multilineTagIndentFactor||1);if(u.alignCDATA&&/<!\[CDATA\[/.test(e))return 0;var o=e&&/^<(\/)?([\w_:\.-]*)/.exec(e);if(o&&o[1])for(;r;){if(r.tagName==o[2]){r=r.prev;break}if(!u.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(o)for(;r;){var a=u.contextGrabbers[r.tagName];if(!a||!a.hasOwnProperty(o[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+l:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:u.htmlMode?"html":"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(t){t.state==v&&(t.state=k)}}}),z.defineMIME("text/xml","xml"),z.defineMIME("application/xml","xml"),z.mimeModes.hasOwnProperty("text/html")||z.defineMIME("text/html",{name:"xml",htmlMode:!0})});
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(T){"use strict";function e(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}T.defineMode("css",function(e,t){var r=t.inline;t.propertyKeywords||(t=T.resolveMode("text/css"));var i,o,a=e.indentUnit,n=t.tokenHooks,l=t.documentTypes||{},s=t.mediaTypes||{},c=t.mediaFeatures||{},d=t.mediaValueKeywords||{},p=t.propertyKeywords||{},u=t.nonStandardPropertyKeywords||{},m=t.fontProperties||{},h=t.counterDescriptors||{},g=t.colorKeywords||{},b=t.valueKeywords||{},f=t.allowNested,y=!0===t.supportsAtComponent;function w(e,t){return i=t,e}function k(a){return function(e,t){for(var r,o=!1;null!=(r=e.next());){if(r==a&&!o){")"==a&&e.backUp(1);break}o=!o&&"\\"==r}return r!=a&&(o||")"==a)||(t.tokenize=null),i="string"}}function v(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=k(")"),i="(",null}function x(e,t,r){this.type=e,this.indent=t,this.prev=r}function z(e,t,r,o){return e.context=new x(r,t.indentation()+(!1===o?0:a),e.context),r}function P(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function j(e,t,r){return B[r.context.type](e,t,r)}function q(e,t,r,o){for(var a=o||1;0<a;a--)r.context=r.context.prev;return j(e,t,r)}function K(e){e=e.current().toLowerCase();o=b.hasOwnProperty(e)?"atom":g.hasOwnProperty(e)?"keyword":"variable"}var B={top:function(e,t,r){if("{"==e)return z(r,t,"block");if("}"==e&&r.context.prev)return P(r);if(y&&/@component/.test(e))return z(r,t,"atComponentBlock");if(/^@(-moz-)?document$/.test(e))return z(r,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(e))return z(r,t,"atBlock");if(/^@(font-face|counter-style)/.test(e))return r.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return z(r,t,"at");if("hash"==e)o="builtin";else if("word"==e)o="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return z(r,t,"interpolation");if(":"==e)return"pseudo";if(f&&"("==e)return z(r,t,"parens")}return r.context.type},block:function(e,t,r){if("word"!=e)return"meta"==e?"block":f||"hash"!=e&&"qualifier"!=e?B.top(e,t,r):(o="error","block");r=t.current().toLowerCase();return p.hasOwnProperty(r)?(o="property","maybeprop"):u.hasOwnProperty(r)?(o="string-2","maybeprop"):f?(o=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(o+=" error","maybeprop")},maybeprop:function(e,t,r){return":"==e?z(r,t,"prop"):j(e,t,r)},prop:function(e,t,r){if(";"==e)return P(r);if("{"==e&&f)return z(r,t,"propBlock");if("}"==e||"{"==e)return q(e,t,r);if("("==e)return z(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)K(t);else if("interpolation"==e)return z(r,t,"interpolation")}else o+=" error";return"prop"},propBlock:function(e,t,r){return"}"==e?P(r):"word"==e?(o="property","maybeprop"):r.context.type},parens:function(e,t,r){return"{"==e||"}"==e?q(e,t,r):")"==e?P(r):"("==e?z(r,t,"parens"):"interpolation"==e?z(r,t,"interpolation"):("word"==e&&K(t),"parens")},pseudo:function(e,t,r){return"word"==e?(o="variable-3",r.context.type):j(e,t,r)},documentTypes:function(e,t,r){return"word"==e&&l.hasOwnProperty(t.current())?(o="tag",r.context.type):B.atBlock(e,t,r)},atBlock:function(e,t,r){return"("==e?z(r,t,"atBlock_parens"):"}"==e||";"==e?q(e,t,r):"{"==e?P(r)&&z(r,t,f?"block":"top"):"interpolation"==e?z(r,t,"interpolation"):("word"==e&&(t=t.current().toLowerCase(),o="only"==t||"not"==t||"and"==t||"or"==t?"keyword":s.hasOwnProperty(t)?"attribute":c.hasOwnProperty(t)?"property":d.hasOwnProperty(t)?"keyword":p.hasOwnProperty(t)?"property":u.hasOwnProperty(t)?"string-2":b.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"error"),r.context.type)},atComponentBlock:function(e,t,r){return"}"==e?q(e,t,r):"{"==e?P(r)&&z(r,t,f?"block":"top",!1):("word"==e&&(o="error"),r.context.type)},atBlock_parens:function(e,t,r){return")"==e?P(r):"{"==e||"}"==e?q(e,t,r,2):B.atBlock(e,t,r)},restricted_atBlock_before:function(e,t,r){return"{"==e?z(r,t,"restricted_atBlock"):"word"==e&&"@counter-style"==r.stateArg?(o="variable","restricted_atBlock_before"):j(e,t,r)},restricted_atBlock:function(e,t,r){return"}"==e?(r.stateArg=null,P(r)):"word"==e?(o="@font-face"==r.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==r.stateArg&&!h.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,r){return"word"==e?(o="variable","keyframes"):"{"==e?z(r,t,"top"):j(e,t,r)},at:function(e,t,r){return";"==e?P(r):"{"==e||"}"==e?q(e,t,r):("word"==e?o="tag":"hash"==e&&(o="builtin"),"at")},interpolation:function(e,t,r){return"}"==e?P(r):"{"==e||";"==e?q(e,t,r):("word"==e?o="variable":"variable"!=e&&"("!=e&&")"!=e&&(o="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:r?"block":"top",stateArg:null,context:new x(r?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||function(e,t){var r=e.next();if(n[r]){var o=n[r](e,t);if(!1!==o)return o}return"@"==r?(e.eatWhile(/[\w\\\-]/),w("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?(i="compare",null):'"'==r||"'"==r?(t.tokenize=k(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),i="hash","atom"):"!"==r?(e.match(/^\s*\w*/),i="important","keyword"):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),i="unit","number"):"-"===r?/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),i="unit","number"):e.match(/^-[\w\\\-]+/)?(e.eatWhile(/[\w\\\-]/),i=e.match(/^\s*:/,!1)?"variable-definition":"variable","variable-2"):e.match(/^\w+-/)?i="meta":void 0:/[,+>*\/]/.test(r)?(i="select-op",null):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?i="qualifier":/[:;{}\[\]\(\)]/.test(r)?w(null,r):"u"==r&&e.match(/rl(-prefix)?\(/)||"d"==r&&e.match("omain(")||"r"==r&&e.match("egexp(")?(e.backUp(1),t.tokenize=v,i="word","property"):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),i="word","property"):i=null})(e,t);return r&&"object"==typeof r&&(i=r[1],r=r[0]),o=r,t.state=B[t.state](i,e,t),o},indent:function(e,t){var r=e.context,e=t&&t.charAt(0),t=r.indent;return(r="prop"==r.type&&("}"==e||")"==e)?r.prev:r).prev&&("}"!=e||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=e||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=e||"at"!=r.type&&"atBlock"!=r.type)||(t=Math.max(0,r.indent-a),r=r.prev):t=(r=r.prev).indent),t},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var t=["domain","regexp","url","url-prefix"],r=e(t),o=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=e(o),i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],n=e(i),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],s=e(l),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=e(c),p=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=e(p),m=e(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),h=e(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],b=e(g),f=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],y=e(f),f=t.concat(o).concat(i).concat(l).concat(c).concat(p).concat(g).concat(f);function w(e,t){for(var r,o=!1;null!=(r=e.next());){if(o&&"/"==r){t.tokenize=null;break}o="*"==r}return["comment","comment"]}T.registerHelper("hintWords","css",f),T.defineMIME("text/css",{documentTypes:r,mediaTypes:a,mediaFeatures:n,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:u,fontProperties:m,counterDescriptors:h,colorKeywords:b,valueKeywords:y,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w)(e,t)}},name:"css"}),T.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:n,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:b,valueKeywords:y,fontProperties:m,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w)(e,t):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/)&&[null,"{"]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),T.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:n,mediaValueKeywords:s,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:b,valueKeywords:y,fontProperties:m,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w)(e,t):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),T.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:a,mediaFeatures:n,propertyKeywords:d,nonStandardPropertyKeywords:u,fontProperties:m,counterDescriptors:h,colorKeywords:b,valueKeywords:y,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w)(e,t)}},name:"css",helperType:"gss"})});
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)}(function(d){"use strict";var l={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var n={};function p(t,e){for(var a=t.pos;0<=a&&"<"!==t.string.charAt(a);)a--;return a<0?a:(e=t.string.slice(a,t.pos).match(n[e=e]||(n[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))))?e[2]:""}function f(t,e){return new RegExp((e?"^":"")+"</s*"+t+"s*>","i")}function o(t,e){for(var a in t)for(var n=e[a]||(e[a]=[]),l=t[a],o=l.length-1;0<=o;o--)n.unshift(l[o])}d.defineMode("htmlmixed",function(i,t){var s=d.getMode(i,{name:"xml",htmlMode:!0,multilineTagIndentFactor:t.multilineTagIndentFactor,multilineTagIndentPastTag:t.multilineTagIndentPastTag}),u={},e=t&&t.tags,a=t&&t.scriptTypes;if(o(l,u),e&&o(e,u),a)for(var n=a.length-1;0<=n;n--)u.script.unshift(["type",a[n].matches,a[n].mode]);function m(t,e){var a,o,r,n=e.htmlState.tagName&&e.htmlState.tagName.toLowerCase(),l=n&&u.hasOwnProperty(n)&&u[n],c=s.token(t,e.htmlState);return l&&/\btag\b/.test(c)&&">"===t.current()&&(a=function(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(!n[0]||n[1].test(p(e,n[0])))return n[2]}}(l,t))&&(a=d.getMode(i,a),o=f(n,!0),r=f(n,!1),e.token=function(t,e){return t.match(o,!1)?(e.token=m,e.localState=e.localMode=null):(a=t,n=r,l=e.localMode.token(t,e.localState),t=a.current(),-1<(e=t.search(n))?a.backUp(t.length-e):t.match(/<\/?$/)&&(a.backUp(t.length),a.match(n,!1)||a.match(t)),l);var a,n,l},e.localMode=a,e.localState=d.startState(a,s.indent(e.htmlState,""))),c}return{startState:function(){return{token:m,localMode:null,localState:null,htmlState:s.startState()}},copyState:function(t){var e;return t.localState&&(e=d.copyState(t.localMode,t.localState)),{token:t.token,localMode:t.localMode,localState:e,htmlState:d.copyState(s,t.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(t,e){return!t.localMode||/^\s*<\//.test(e)?s.indent(t.htmlState,e):t.localMode.indent?t.localMode.indent(t.localState,e):d.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||s}}}},"xml","javascript","css"),d.defineMIME("text/html","htmlmixed")});
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(S){"use strict";function m(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function v(e,t){if(!e)return/(?:)/;var n="";return e=e instanceof RegExp?(e.ignoreCase&&(n="i"),e.source):String(e),new RegExp((!1===t?"":"^")+"(?:"+e+")",n)}function k(e,t){(e.next||e.push)&&m(t,e.next||e.push),this.regex=v(e.regex),this.token=function(e){if(!e)return null;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}(e.token),this.data=e}S.defineSimpleMode=function(e,t){S.defineMode(e,function(e){return S.simpleMode(e,t)})},S.simpleMode=function(e,t){m(t,"start");var n,a={},o=t.meta||{},r=!1;for(n in t)if(n!=o&&t.hasOwnProperty(n))for(var i=a[n]=[],l=t[n],s=0;s<l.length;s++){var d=l[s];i.push(new k(d,t)),(d.indent||d.dedent)&&(r=!0)}var c,u,p,f,h={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:r?[]:null}},copyState:function(e){var t={state:e.state,pending:e.pending,local:e.local,localState:null,indent:e.indent&&e.indent.slice(0)};e.localState&&(t.localState=S.copyState(e.local.mode,e.localState)),e.stack&&(t.stack=e.stack.slice(0));for(var n=e.persistentStates;n;n=n.next)t.persistentStates={mode:n.mode,spec:n.spec,state:n.state==e.localState?t.localState:S.copyState(n.mode,n.state),next:t.persistentStates};return t},token:(f=e,function(e,t){if(t.pending){var n=t.pending.shift();return 0==t.pending.length&&(t.pending=null),e.pos+=n.text.length,n.token}if(t.local){if(t.local.end&&e.match(t.local.end)){var a=t.local.endToken||null;return t.local=t.localState=null,a}var o,a=t.local.mode.token(e,t.localState);return t.local.endScan&&(o=t.local.endScan.exec(e.current()))&&(e.pos=e.start+o.index),a}for(var r=p[t.state],i=0;i<r.length;i++){var l=r[i],s=(!l.data.sol||e.sol())&&e.match(l.regex);if(s){if(l.data.next?t.state=l.data.next:l.data.push?((t.stack||(t.stack=[])).push(t.state),t.state=l.data.push):l.data.pop&&t.stack&&t.stack.length&&(t.state=t.stack.pop()),l.data.mode&&function(e,t,n,a){var o;if(n.persistent)for(var r=t.persistentStates;r&&!o;r=r.next)(n.spec?function e(t,n){if(t===n)return!0;if(!t||"object"!=typeof t||!n||"object"!=typeof n)return!1;var a=0;for(var o in t)if(t.hasOwnProperty(o)){if(!n.hasOwnProperty(o)||!e(t[o],n[o]))return!1;a++}for(var o in n)n.hasOwnProperty(o)&&a--;return 0==a}(n.spec,r.spec):n.mode==r.mode)&&(o=r);var i=o?o.mode:n.mode||S.getMode(e,n.spec),e=o?o.state:S.startState(i);n.persistent&&!o&&(t.persistentStates={mode:i,spec:n.spec,state:e,next:t.persistentStates});t.localState=e,t.local={mode:i,end:n.end&&v(n.end),endScan:n.end&&!1!==n.forceEnd&&v(n.end,!1),endToken:a&&a.join?a[a.length-1]:a}}(f,t,l.data.mode,l.token),l.data.indent&&t.indent.push(e.indentation()+f.indentUnit),l.data.dedent&&t.indent.pop(),2<s.length){t.pending=[];for(var d=2;d<s.length;d++)s[d]&&t.pending.push({text:s[d],token:l.token[d-1]});return e.backUp(s[0].length-(s[1]?s[1].length:0)),l.token[0]}return l.token&&l.token.join?l.token[0]:l.token}}return e.next(),null}),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:(c=p=a,function(e,t,n){if(e.local&&e.local.mode.indent)return e.local.mode.indent(e.localState,t,n);if(null==e.indent||e.local||u.dontIndentStates&&-1<function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}(e.state,u.dontIndentStates))return S.Pass;var a=e.indent.length-1,o=c[e.state];e:for(;;){for(var r=0;r<o.length;r++){var i=o[r];if(i.data.dedent&&!1!==i.data.dedentIfLineStart){var l=i.regex.exec(t);if(l&&l[0]){a--,(i.next||i.push)&&(o=c[i.next||i.push]),t=t.slice(l[0].length);continue e}}}break}return a<0?0:e.indent[a]})};if(u=o)for(var g in o)o.hasOwnProperty(g)&&(h[g]=o[g]);return h}});
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(v){"use strict";v.multiplexingMode=function(u){var a=Array.prototype.slice.call(arguments,1);function d(e,n,t,i){if("string"==typeof n){var r=e.indexOf(n,t);return i&&-1<r?r+n.length:r}e=n.exec(t?e.slice(t):e);return e?e.index+t+(i?e[0].length:0):-1}return{startState:function(){return{outer:v.startState(u),innerActive:null,inner:null}},copyState:function(e){return{outer:v.copyState(u,e.outer),innerActive:e.innerActive,inner:e.innerActive&&v.copyState(e.innerActive.mode,e.inner)}},token:function(e,n){if(n.innerActive){var t=n.innerActive,i=e.string;if(!t.close&&e.sol())return n.innerActive=n.inner=null,this.token(e,n);if((l=t.close?d(i,t.close,e.pos,t.parseDelimiters):-1)==e.pos&&!t.parseDelimiters)return e.match(t.close),n.innerActive=n.inner=null,t.delimStyle&&t.delimStyle+" "+t.delimStyle+"-close";-1<l&&(e.string=i.slice(0,l));var r=t.mode.token(e,n.inner);return-1<l&&(e.string=i),l==e.pos&&t.parseDelimiters&&(n.innerActive=n.inner=null),r=t.innerStyle?r?r+" "+t.innerStyle:t.innerStyle:r}for(var o=1/0,i=e.string,c=0;c<a.length;++c){var l,s=a[c];if((l=d(i,s.open,e.pos))==e.pos)return s.parseDelimiters||e.match(s.open),n.innerActive=s,n.inner=v.startState(s.mode,u.indent?u.indent(n.outer,""):0),s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-open";-1!=l&&l<o&&(o=l)}o!=1/0&&(e.string=i.slice(0,o));r=u.token(e,n.outer);return o!=1/0&&(e.string=i),r},indent:function(e,n){var t=e.innerActive?e.innerActive.mode:u;return t.indent?t.indent(e.innerActive?e.inner:e.outer,n):v.Pass},blankLine:function(e){var n=e.innerActive?e.innerActive.mode:u;if(n.blankLine&&n.blankLine(e.innerActive?e.inner:e.outer),e.innerActive)"\n"===e.innerActive.close&&(e.innerActive=e.inner=null);else for(var t=0;t<a.length;++t){var i=a[t];"\n"===i.open&&(e.innerActive=i,e.inner=v.startState(i.mode,n.indent?n.indent(e.outer,""):0))}},electricChars:u.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:u}}}}});
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../../addon/mode/simple"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],e):e(CodeMirror)}(function(n){"use strict";n.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{!--/,push:"dash_comment",token:"comment"},{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}]}),n.defineMode("handlebars",function(e,o){var t=n.getMode(e,"handlebars-tags");return o&&o.base?n.multiplexingMode(n.getMode(e,o.base),{open:"{{",close:"}}",mode:t,parseDelimiters:!0}):t}),n.defineMIME("text/x-handlebars-template","handlebars")});
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(b){"use strict";var x="CodeMirror-hint-active";function n(t,i){this.cm=t,this.options=i,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var e=this;t.on("cursorActivity",this.activityFunc=function(){e.cursorActivity()})}b.showHint=function(t,i,e){if(!i)return t.showHint(e);e&&e.async&&(i.async=!0);var n={hint:i};if(e)for(var o in e)n[o]=e[o];return t.showHint(n)},b.defineExtension("showHint",function(t){t=function(t,i,e){var n=t.options.hintOptions,o={};for(s in h)o[s]=h[s];if(n)for(var s in n)void 0!==n[s]&&(o[s]=n[s]);if(e)for(var s in e)void 0!==e[s]&&(o[s]=e[s]);o.hint.resolve&&(o.hint=o.hint.resolve(t,i));return o}(this,this.getCursor("start"),t);var i=this.listSelections();if(!(1<i.length)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var e=0;e<i.length;e++)if(i[e].head.line!=i[e].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();t=this.state.completionActive=new n(this,t);t.options.hint&&(b.signal(this,"startCompletion",this),t.update(!0))}});var o=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},s=window.cancelAnimationFrame||clearTimeout;function A(t){return"string"==typeof t?t:t.text}function S(t,i){for(;i&&i!=t;){if("LI"===i.nodeName.toUpperCase()&&i.parentNode==t)return i;i=i.parentNode}}function c(o,t){this.completion=o,this.data=t,this.picked=!1;var e=this,s=o.cm,c=this.hints=document.createElement("ul");c.className="CodeMirror-hints",this.selectedHint=t.selectedHint||0;for(var i=t.list,n=0;n<i.length;++n){var r=c.appendChild(document.createElement("li")),h=i[n],l="CodeMirror-hint"+(n!=this.selectedHint?"":" "+x);null!=h.className&&(l=h.className+" "+l),r.className=l,h.render?h.render(r,t,h):r.appendChild(document.createTextNode(h.displayText||A(h))),r.hintId=n}var a=s.cursorCoords(o.options.alignWithWord?t.from:null),u=a.left,f=a.bottom,d=!0;c.style.left=u+"px",c.style.top=f+"px";var p=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),m=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(o.options.container||document.body).appendChild(c);var g=c.getBoundingClientRect(),v=g.bottom-m,y=c.scrollHeight>c.clientHeight+1,w=s.getScrollInfo();0<v&&(v=g.bottom-g.top,0<a.top-(a.bottom-g.top)-v?(c.style.top=(f=a.top-v)+"px",d=!1):m<v&&(c.style.height=m-5+"px",c.style.top=(f=a.bottom-g.top)+"px",k=s.getCursor(),t.from.ch!=k.ch&&(a=s.cursorCoords(k),c.style.left=(u=a.left)+"px",g=c.getBoundingClientRect())));var H,k=g.right-p;if(0<k&&(g.right-g.left>p&&(c.style.width=p-5+"px",k-=g.right-g.left-p),c.style.left=(u=a.left-k)+"px"),y)for(var C=c.firstChild;C;C=C.nextSibling)C.style.paddingRight=s.display.nativeBarWidth+"px";return s.addKeyMap(this.keyMap=function(t,n){var o={Up:function(){n.moveFocus(-1)},Down:function(){n.moveFocus(1)},PageUp:function(){n.moveFocus(1-n.menuSize(),!0)},PageDown:function(){n.moveFocus(n.menuSize()-1,!0)},Home:function(){n.setFocus(0)},End:function(){n.setFocus(n.length-1)},Enter:n.pick,Tab:n.pick,Esc:n.close},i=t.options.customKeys,s=i?{}:o;function e(t,i){var e="string"!=typeof i?function(t){return i(t,n)}:o.hasOwnProperty(i)?o[i]:i;s[t]=e}if(i)for(var c in i)i.hasOwnProperty(c)&&e(c,i[c]);var r=t.options.extraKeys;if(r)for(var c in r)r.hasOwnProperty(c)&&e(c,r[c]);return s}(o,{moveFocus:function(t,i){e.changeActive(e.selectedHint+t,i)},setFocus:function(t){e.changeActive(t)},menuSize:function(){return e.screenAmount()},length:i.length,close:function(){o.close()},pick:function(){e.pick()},data:t})),o.options.closeOnUnfocus&&(s.on("blur",this.onBlur=function(){H=setTimeout(function(){o.close()},100)}),s.on("focus",this.onFocus=function(){clearTimeout(H)})),s.on("scroll",this.onScroll=function(){var t=s.getScrollInfo(),i=s.getWrapperElement().getBoundingClientRect(),e=f+w.top-t.top,n=e-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(d||(n+=c.offsetHeight),n<=i.top||n>=i.bottom)return o.close();c.style.top=e+"px",c.style.left=u+w.left-t.left+"px"}),b.on(c,"dblclick",function(t){t=S(c,t.target||t.srcElement);t&&null!=t.hintId&&(e.changeActive(t.hintId),e.pick())}),b.on(c,"click",function(t){t=S(c,t.target||t.srcElement);t&&null!=t.hintId&&(e.changeActive(t.hintId),o.options.completeOnSingleClick&&e.pick())}),b.on(c,"mousedown",function(){setTimeout(function(){s.focus()},20)}),b.signal(t,"select",i[0],c.firstChild),!0}function r(t,i,e,n){t.async?t(i,n,e):(e=t(i,e))&&e.then?e.then(n):n(e)}n.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&b.signal(this.data,"close"),this.widget&&this.widget.close(),b.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,i){i=t.list[i];i.hint?i.hint(this.cm,t,i):this.cm.replaceRange(A(i),i.from||t.from,i.to||t.to,"complete"),b.signal(t,"pick",i),this.close()},cursorActivity:function(){this.debounce&&(s(this.debounce),this.debounce=0);var t,i=this.cm.getCursor(),e=this.cm.getLine(i.line);i.line!=this.startPos.line||e.length-i.ch!=this.startLen-this.startPos.ch||i.ch<this.startPos.ch||this.cm.somethingSelected()||i.ch&&this.options.closeCharacters.test(e.charAt(i.ch-1))?this.close():((t=this).debounce=o(function(){t.update()}),this.widget&&this.widget.disable())},update:function(i){var e,n;null!=this.tick&&(n=++(e=this).tick,r(this.options.hint,this.cm,this.options,function(t){e.tick==n&&e.finishUpdate(t,i)}))},finishUpdate:function(t,i){this.data&&b.signal(this.data,"update");var e,n=this.widget&&this.widget.picked||i&&this.options.completeSingle;this.widget&&this.widget.close(),t&&this.data&&(e=this.data,i=t,0<b.cmpPos(i.from,e.from)&&e.to.ch-e.from.ch!=i.to.ch-i.from.ch)||(this.data=t)&&t.list.length&&(n&&1==t.list.length?this.pick(t,0):(this.widget=new c(this,t),b.signal(t,"shown")))}},c.prototype={close:function(){var t;this.completion.widget==this&&(this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap),t=this.completion.cm,this.completion.options.closeOnUnfocus&&(t.off("blur",this.onBlur),t.off("focus",this.onFocus)),t.off("scroll",this.onScroll))},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var t=this;this.keyMap={Enter:function(){t.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,i){t>=this.data.list.length?t=i?this.data.list.length-1:0:t<0&&(t=i?0:this.data.list.length-1),this.selectedHint!=t&&((i=this.hints.childNodes[this.selectedHint]).className=i.className.replace(" "+x,""),(i=this.hints.childNodes[this.selectedHint=t]).className+=" "+x,i.offsetTop<this.hints.scrollTop?this.hints.scrollTop=i.offsetTop-3:i.offsetTop+i.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=i.offsetTop+i.offsetHeight-this.hints.clientHeight+3),b.signal(this.data,"select",this.data.list[this.selectedHint],i))},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},b.registerHelper("hint","auto",{resolve:function(t,i){var e,c=t.getHelpers(i,"hint");if(c.length){i=function(t,n,o){var s=function(t,i){if(!t.somethingSelected())return i;for(var e=[],n=0;n<i.length;n++)i[n].supportsSelection&&e.push(i[n]);return e}(t,c);!function i(e){if(e==s.length)return n(null);r(s[e],t,o,function(t){t&&0<t.list.length?n(t):i(e+1)})}(0)};return i.async=!0,i.supportsSelection=!0,i}return(e=t.getHelper(t.getCursor(),"hintWords"))?function(t){return b.hint.fromList(t,{words:e})}:b.hint.anyword?function(t,i){return b.hint.anyword(t,i)}:function(){}}}),b.registerHelper("hint","fromList",function(t,i){var e,n=t.getCursor(),o=t.getTokenAt(n),t=b.Pos(n.line,o.end);o=o.string&&/\w/.test(o.string[o.string.length-1])?(e=o.string,b.Pos(n.line,o.start)):(e="",t);for(var s=[],c=0;c<i.words.length;c++){var r=i.words[c];r.slice(0,e.length)==e&&s.push(r)}if(s.length)return{list:s,from:o,to:t}}),b.commands.autocomplete=b.showHint;var h={hint:b.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};b.defineOption("hintOptions",null)});
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(y){"use strict";var b=/[\w$]+/;y.registerHelper("hint","anyword",function(e,r){for(var t=r&&r.word||b,o=r&&r.range||500,i=e.getCursor(),n=e.getLine(i.line),f=i.ch,s=f;s&&t.test(n.charAt(s-1));)--s;for(var a=s!=f&&n.slice(s,f),c=r&&r.list||[],l={},d=new RegExp(t.source,"g"),u=-1;u<=1;u+=2)for(var p=i.line,g=Math.min(Math.max(p+u*o,e.firstLine()),e.lastLine())+u;p!=g;p+=u)for(var h,m=e.getLine(p);h=d.exec(m);)p==i.line&&h[0]===a||a&&0!=h[0].lastIndexOf(a,0)||Object.prototype.hasOwnProperty.call(l,h[0])||(l[h[0]]=!0,c.push(h[0]));return{list:c,from:y.Pos(i.line,s),to:y.Pos(i.line,f)}})});
!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&void 0!==module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};function a(t){function e(n,i){return"function"==typeof(n=void 0===n||!0===n?o.name:n)?n:function(t,e){e=e.options.group.name;return i?n:n&&(n.join?-1<n.indexOf(e):e==n)}}var o={},n=t.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=e(n.pull,!0),o.checkPut=e(n.put),t.group=o}var f,g,p,v,m,b,_,D,y,w,T,S,l,i,C,E,c,r,x,t,N={},o=/\s+/g,k="Sortable"+(new Date).getTime(),B=window,h=B.document,s=B.parseInt,e=B.jQuery||B.Zepto,n=B.Polymer,d=!!("draggable"in h.createElement("div")),u=!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&((t=h.createElement("x")).style.cssText="pointer-events:auto","auto"===t.style.pointerEvents),Y=!1,X=Math.abs,O=Math.min,A=[],I=Z(function(t,e,n){if(n&&e.scroll){var i,o,a,r,s,l=e.scrollSensitivity,c=e.scrollSpeed,d=t.clientX,h=t.clientY,u=window.innerWidth,f=window.innerHeight;if(D!==n&&(_=e.scroll,D=n,y=e.scrollFn,!0===_)){_=n;do{if(_.offsetWidth<_.scrollWidth||_.offsetHeight<_.scrollHeight)break}while(_=_.parentNode)}_&&(n=(i=_).getBoundingClientRect(),o=(X(n.right-d)<=l)-(X(n.left-d)<=l),a=(X(n.bottom-h)<=l)-(X(n.top-h)<=l)),o||a||(a=(f-h<=l)-(h<=l),((o=(u-d<=l)-(d<=l))||a)&&(i=B)),N.vx===o&&N.vy===a&&N.el===i||(N.el=i,N.vx=o,N.vy=a,clearInterval(N.pid),i&&(N.pid=setInterval(function(){return s=a?a*c:0,r=o?o*c:0,"function"==typeof y?y.call(_this,r,s,t):void(i===B?B.scrollTo(B.pageXOffset+r,B.pageYOffset+s):(i.scrollTop+=s,i.scrollLeft+=r))},24)))}},30);function R(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=J({},e),t[k]=this;var n,i,o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(n in o)n in e||(e[n]=o[n]);for(i in a(e),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&d,L(t,"mousedown",this._onTapStart),L(t,"touchstart",this._onTapStart),this.nativeDraggable&&(L(t,"dragover",this),L(t,"dragenter",this)),A.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function P(t){v&&v.state!==t&&(W(v,"display",t?"none":""),!t&&v.state&&m.insertBefore(v,f),v.state=t)}function M(t,e,n){if(t){n=n||h;do{if(">*"===e&&t.parentNode===n||Q(t,e))return t}while(o=void 0,t=(o=(i=t).host)&&o.nodeType?o:i.parentNode)}var i,o;return null}function L(t,e,n){t.addEventListener(e,n,!1)}function U(t,e,n){t.removeEventListener(e,n,!1)}function H(t,e,n){var i;t&&(t.classList?t.classList[n?"add":"remove"](e):(i=(" "+t.className+" ").replace(o," ").replace(" "+e+" "," "),t.className=(i+(n?" "+e:"")).replace(o," ")))}function W(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return h.defaultView&&h.defaultView.getComputedStyle?n=h.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];i[e=!(e in i)?"-webkit-"+e:e]=n+("string"==typeof n?"":"px")}}function j(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,a=i.length;if(n)for(;o<a;o++)n(i[o],o);return i}return[]}function F(t,e,n,i,o,a,r){t=t||e[k];var s=h.createEvent("Event"),l=t.options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=e,s.from=o||e,s.item=i||e,s.clone=v,s.oldIndex=a,s.newIndex=r,e.dispatchEvent(s),l[c]&&l[c].call(t,s)}function V(t,e,n,i,o,a,r){var s,l=t[k],c=l.options.onMove,d=h.createEvent("Event");return d.initEvent("move",!0,!0),d.to=e,d.from=t,d.dragged=n,d.draggedRect=i,d.related=o||e,d.relatedRect=a||e.getBoundingClientRect(),t.dispatchEvent(d),s=c?c.call(l,d,r):s}function q(t){t.draggable=!1}function z(){Y=!1}function G(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t&&t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!Q(t,e)||n++;return n}function Q(t,e){if(t){var n=(e=e.split(".")).shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==n&&t.nodeName.toUpperCase()!=n||e.length&&((" "+t.className+" ").match(i)||[]).length!=e.length)}}function Z(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function J(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function K(t){return e?e(t).clone(!0)[0]:(n&&n.dom?n.dom(t):t).cloneNode(!0)}return R.prototype={constructor:R,_onTapStart:function(t){if("i"!=t.target.tagName&&"I"!=t.target.tagName){var e,n=this,i=this.el,o=this.options,a=t.type,r=t.touches&&t.touches[0],s=(r||t).target,l=t.target.shadowRoot&&t.path[0]||s,c=o.filter;if(!f&&!("mousedown"===a&&0!==t.button||o.disabled)&&(!o.handle||M(l,o.handle,i))&&(s=M(s,o.draggable,i))){if(e=G(s,o.draggable),"function"==typeof c){if(c.call(this,t,s,this))return F(n,l,"filter",s,i,e),void t.preventDefault()}else if(c=c&&c.split(",").some(function(t){if(t=M(l,t.trim(),i))return F(n,t,"filter",s,i,e),!0}))return void t.preventDefault();this._prepareDragStart(t,r,s,e)}}else t.target.click()},_prepareDragStart:function(t,e,n,i){var o=this,a=o.el,r=o.options,s=a.ownerDocument;n&&!f&&n.parentNode===a&&(c=t,m=a,g=(f=n).parentNode,b=f.nextSibling,C=r.group,l=i,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,f.style["will-change"]="transform",t=function(){o._disableDelayedDrag(),f.draggable=o.nativeDraggable,H(f,r.chosenClass,!0),o._triggerDragStart(e),F(o,m,"choose",f,m,l)},r.ignore.split(",").forEach(function(t){j(f,t.trim(),q)}),L(s,"mouseup",o._onDrop),L(s,"touchend",o._onDrop),L(s,"touchcancel",o._onDrop),r.delay?(L(s,"mouseup",o._disableDelayedDrag),L(s,"touchend",o._disableDelayedDrag),L(s,"touchcancel",o._disableDelayedDrag),L(s,"mousemove",o._disableDelayedDrag),L(s,"touchmove",o._disableDelayedDrag),o._dragStartTimer=setTimeout(t,r.delay)):t())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),U(t,"mouseup",this._disableDelayedDrag),U(t,"touchend",this._disableDelayedDrag),U(t,"touchcancel",this._disableDelayedDrag),U(t,"mousemove",this._disableDelayedDrag),U(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(c={target:f,clientX:t.clientX,clientY:t.clientY},this._onDragStart(c,"touch")):this.nativeDraggable?(L(f,"dragend",this),L(m,"dragstart",this._onDragStart)):this._onDragStart(c,!0);try{h.selection?setTimeout(function(){h.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){var t;m&&f&&(t=this.options,H(f,t.ghostClass,!0),H(f,t.dragClass,!1),F(R.active=this,m,"start",f,m,l))},_emulateDragOver:function(){if(r&&(this._lastX!==r.clientX||this._lastY!==r.clientY)){this._lastX=r.clientX,this._lastY=r.clientY,u||W(p,"display","none");var t=h.elementFromPoint(r.clientX,r.clientY),e=t,n=A.length;if(e)do{if(e[k]){for(;n--;)A[n]({clientX:r.clientX,clientY:r.clientY,target:t,rootEl:e});break}}while(e=(t=e).parentNode);u||W(p,"display","")}},_onTouchMove:function(t){if(c){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,e=o.clientX-c.clientX+i.x,i=o.clientY-c.clientY+i.y,i=t.touches?"translate3d("+e+"px,"+i+"px,0)":"translate("+e+"px,"+i+"px)";if(!R.active){if(n&&O(X(o.clientX-this._lastX),X(o.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),x=!0,r=o,W(p,"webkitTransform",i),W(p,"mozTransform",i),W(p,"msTransform",i),W(p,"transform",i),t.preventDefault()}},_appendGhost:function(){var t,e,n;p||(t=f.getBoundingClientRect(),e=W(f),n=this.options,H(p=f.cloneNode(!0),n.ghostClass,!1),H(p,n.fallbackClass,!0),H(p,n.dragClass,!0),W(p,"top",t.top-s(e.marginTop,10)),W(p,"left",t.left-s(e.marginLeft,10)),W(p,"width",t.width),W(p,"height",t.height),W(p,"opacity","0.8"),W(p,"position","fixed"),W(p,"zIndex","100000"),W(p,"pointerEvents","none"),n.fallbackOnBody&&h.body.appendChild(p)||m.appendChild(p),n=p.getBoundingClientRect(),W(p,"width",2*t.width-n.width),W(p,"height",2*t.height-n.height))},_onDragStart:function(t,e){var n=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==C.checkPull(this,this,f,t)&&(W(v=K(f),"display","none"),m.insertBefore(v,f),F(this,m,"clone",f)),H(f,i.dragClass,!0),e?("touch"===e?(L(h,"touchmove",this._onTouchMove),L(h,"touchend",this._onDrop),L(h,"touchcancel",this._onDrop)):(L(h,"mousemove",this._onTouchMove),L(h,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,f)),L(h,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var e,n,i,o,a,r,s=this.el,l=this.options,c=l.group,d=R.active,h=C===c,u=l.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),l.dragoverBubble||t.stopPropagation()),x=!0,C&&!l.disabled&&(h?u||(i=!m.contains(f)):E===this||C.checkPull(this,d,f,t)&&c.checkPut(this,d,f,t))&&(void 0===t.rootEl||t.rootEl===this.el)&&(I(t,l,this.el),!Y)){if(e=M(t.target,l.draggable,s),c=f.getBoundingClientRect(),E=this,i)return P(!0),g=m,void(v||b?m.insertBefore(f,v||b):u||m.appendChild(f));if(0===s.children.length||s.children[0]===p||s===t.target&&(a=t,o=(r=(o=s).lastElementChild).getBoundingClientRect(),e=(5<a.clientY-(o.top+o.height)||5<a.clientX-(o.right+o.width))&&r)){if(e){if(e.animated)return;n=e.getBoundingClientRect()}P(h),!1!==V(m,s,f,c,e,n,t)&&(f.contains(s)||(s.appendChild(f),g=s),this._animate(c,f),e&&this._animate(n,e))}else e&&!e.animated&&e!==f&&void 0!==e.parentNode[k]&&(w!==e&&(T=W(w=e),S=W(e.parentNode)),d=(n=e.getBoundingClientRect()).right-n.left,l=n.bottom-n.top,i=/left|right|inline/.test(T.cssFloat+T.display)||"flex"==S.display&&0===S["flex-direction"].indexOf("row"),u=e.offsetWidth>f.offsetWidth,a=e.offsetHeight>f.offsetHeight,o=.5<(i?(t.clientX-n.left)/d:(t.clientY-n.top)/l),r=e.nextElementSibling,!1!==(d=V(m,s,f,c,e,n,t))&&(Y=!0,setTimeout(z,30),P(h),a=1===d||-1===d?1===d:i?(d=f.offsetTop)===(i=e.offsetTop)?e.previousElementSibling===f&&!u||o&&u:e.previousElementSibling===f||f.previousElementSibling===e?.5<(t.clientY-n.top)/l:d<i:r!==f&&!a||o&&a,f.contains(s)||(a&&!r?s.appendChild(f):e.parentNode.insertBefore(f,a?r:e)),g=f.parentNode,this._animate(c,f),this._animate(n,e)))}},_animate:function(t,e){var n,i=this.options.animation;i&&(n=e.getBoundingClientRect(),W(e,"transition","none"),W(e,"transform","translate3d("+(t.left-n.left)+"px,"+(t.top-n.top)+"px,0)"),e.offsetWidth,W(e,"transition","all "+i+"ms"),W(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){W(e,"transition",""),W(e,"transform",""),e.animated=!1},i))},_offUpEvents:function(){var t=this.el.ownerDocument;U(h,"touchmove",this._onTouchMove),U(t,"mouseup",this._onDrop),U(t,"touchend",this._onDrop),U(t,"touchcancel",this._onDrop)},_onDrop:function(t){var e=this.el,n=this.options;clearInterval(this._loopId),clearInterval(N.pid),clearTimeout(this._dragStartTimer),U(h,"mousemove",this._onTouchMove),this.nativeDraggable&&(U(h,"drop",this),U(e,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(x&&(t.preventDefault(),n.dropBubble||t.stopPropagation()),p&&p.parentNode.removeChild(p),f&&(this.nativeDraggable&&U(f,"dragend",this),q(f),f.style["will-change"]="",H(f,this.options.ghostClass,!1),H(f,this.options.chosenClass,!1),m!==g?0<=(i=G(f,n.draggable))&&(F(null,g,"add",f,m,l,i),F(this,m,"remove",f,m,l,i),F(null,g,"sort",f,m,l,i),F(this,m,"sort",f,m,l,i)):(v&&v.parentNode.removeChild(v),f.nextSibling!==b&&0<=(i=G(f,n.draggable))&&(F(this,m,"update",f,m,l,i),F(this,m,"sort",f,m,l,i))),R.active&&(F(this,m,"end",f,m,l,i=null==i||-1===i?l:i),this.save()))),this._nulling()},_nulling:function(){m=f=g=p=b=v=_=D=c=r=x=i=w=T=E=C=R.active=null},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?f&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.preventDefault()}(t)):"drop"!==e&&"dragend"!==e||this._onDrop(t)},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)M(t=n[i],a.draggable,this.el)&&e.push(t.getAttribute(a.dataIdAttr)||function(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;for(;n--;)i+=e.charCodeAt(n);return i.toString(36)}(t));return e},sort:function(t){var n={},i=this.el;this.toArray().forEach(function(t,e){e=i.children[e];M(e,this.options.draggable,i)&&(n[t]=e)},this),t.forEach(function(t){n[t]&&(i.removeChild(n[t]),i.appendChild(n[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return M(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&a(n)},destroy:function(){var t=this.el;t[k]=null,U(t,"mousedown",this._onTapStart),U(t,"touchstart",this._onTapStart),this.nativeDraggable&&(U(t,"dragover",this),U(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),A.splice(A.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},R.utils={on:L,off:U,css:W,find:j,is:function(t,e){return!!M(t,e,t)},extend:J,throttle:Z,closest:M,toggleClass:H,clone:K,index:G},R.create=function(t,e){return new R(t,e)},R.version="1.4.2",R});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(me){me.fn.jScrollPane=function(o){function i(b,e){function w(e){var t,o,i,n,s,r,a,l,c,p,d,u,f,h,j,g=!1,v=!1;if(R=e,void 0===I)i=b.scrollTop(),n=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),F=b.innerWidth()+ve,L=b.innerHeight(),b.width(F),I=me('<div class="jspPane" />').css("padding",fe).append(b.children()),q=me('<div class="jspContainer" />').css({width:F+"px",height:L+"px"}).append(I).appendTo(b);else{if(b.css("width",""),g=R.stickToBottom&&(20<(r=E-L)&&r-M()<10),v=R.stickToRight&&(20<(s=O-F)&&s-z()<10),(s=b.innerWidth()+ve!=F||b.outerHeight()!=L)&&(F=b.innerWidth()+ve,L=b.innerHeight(),q.css({width:F+"px",height:L+"px"})),!s&&he==O&&I.outerHeight()==E)return b.width(F),0;he=O,I.css("width",""),b.width(F),q.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function m(){var e=_,t=$;switch(a){case 40:je.scrollByY(R.keyboardSpeed,!1);break;case 38:je.scrollByY(-R.keyboardSpeed,!1);break;case 34:case 32:je.scrollByY(L*R.scrollPagePercent,!1);break;case 33:je.scrollByY(-L*R.scrollPagePercent,!1);break;case 39:je.scrollByX(R.keyboardSpeed,!1);break;case 37:je.scrollByX(-R.keyboardSpeed,!1)}return l=e!=_||t!=$}I.css("overflow","auto"),O=e.contentWidth||I[0].scrollWidth,E=I[0].scrollHeight,I.css("overflow",""),N=1<(G=E/L),(K=1<(V=O/F))||N?(b.addClass("jspScrollable"),(e=R.maintainPosition&&($||_))&&(t=z(),o=M()),N&&(q.append(me('<div class="jspVerticalBar" />').append(me('<div class="jspCap jspCapTop" />'),me('<div class="jspTrack" />').append(me('<div class="jspDrag" />').append(me('<div class="jspDragTop" />'),me('<div class="jspDragBottom" />'))),me('<div class="jspCap jspCapBottom" />'))),ee=q.find(">.jspVerticalBar"),te=ee.find(">.jspTrack"),Q=te.find(">.jspDrag"),R.showArrows&&(ne=me('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",T(0,-1)).bind("click.jsp",X),se=me('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",T(0,1)).bind("click.jsp",X),R.arrowScrollOnHover&&(ne.bind("mouseover.jsp",T(0,-1,ne)),se.bind("mouseover.jsp",T(0,1,se))),C(te,R.verticalArrowPositions,ne,se)),oe=L,q.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){oe-=me(this).outerHeight()}),Q.hover(function(){Q.addClass("jspHover")},function(){Q.removeClass("jspHover")}).bind("mousedown.jsp",function(e){me("html").bind("dragstart.jsp selectstart.jsp",X),Q.addClass("jspActive");var t=e.pageY-Q.position().top;return me("html").bind("mousemove.jsp",function(e){x(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",D),!1}),y()),K&&(q.append(me('<div class="jspHorizontalBar" />').append(me('<div class="jspCap jspCapLeft" />'),me('<div class="jspTrack" />').append(me('<div class="jspDrag" />').append(me('<div class="jspDragLeft" />'),me('<div class="jspDragRight" />'))),me('<div class="jspCap jspCapRight" />'))),re=q.find(">.jspHorizontalBar"),ae=re.find(">.jspTrack"),J=ae.find(">.jspDrag"),R.showArrows&&(pe=me('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",T(-1,0)).bind("click.jsp",X),de=me('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",T(1,0)).bind("click.jsp",X),R.arrowScrollOnHover&&(pe.bind("mouseover.jsp",T(-1,0,pe)),de.bind("mouseover.jsp",T(1,0,de))),C(ae,R.horizontalArrowPositions,pe,de)),J.hover(function(){J.addClass("jspHover")},function(){J.removeClass("jspHover")}).bind("mousedown.jsp",function(e){me("html").bind("dragstart.jsp selectstart.jsp",X),J.addClass("jspActive");var t=e.pageX-J.position().left;return me("html").bind("mousemove.jsp",function(e){P(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",D),!1}),le=q.innerWidth(),k()),function(){{var e,t;K&&N&&(e=ae.outerHeight(),t=te.outerWidth(),oe-=e,me(re).find(">.jspCap:visible,>.jspArrow").each(function(){le+=me(this).outerWidth()}),le-=t,L-=t,F-=e,ae.parent().append(me('<div class="jspCorner" />').css("width",e+"px")),y(),k())}K&&I.width(q.outerWidth()-ve+"px"),E=I.outerHeight(),G=E/L,K&&((ce=Math.ceil(1/V*le))>R.horizontalDragMaxWidth?ce=R.horizontalDragMaxWidth:ce<R.horizontalDragMinWidth&&(ce=R.horizontalDragMinWidth),J.width(ce+"px"),Z=le-ce,S(_)),N&&((ie=Math.ceil(1/G*oe))>R.verticalDragMaxHeight?ie=R.verticalDragMaxHeight:ie<R.verticalDragMinHeight&&(ie=R.verticalDragMinHeight),Q.height(ie+"px"),U=oe-ie,H($))}(),e&&(W(v?O-F:t,!1),A(g?E-L:o,!1)),I.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){Y(e.target,!1)}),q.unbind(ge).bind(ge,function(e,t,o,i){var n=_=_||0,s=$=$||0,e=e.deltaFactor||R.mouseWheelSpeed;return je.scrollBy(o*e,-i*e,!1),n==_&&s==$}),j=!1,q.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];p=z(),d=M(),u=e.pageX,f=e.pageY,j=!(h=!1)}).bind("touchmove.jsp",function(e){if(j){var t=e.originalEvent.touches[0],o=_,e=$;return je.scrollTo(p+u-t.pageX,d+f-t.pageY),h=h||5<Math.abs(u-t.pageX)||5<Math.abs(f-t.pageY),o==_&&e==$}}).bind("touchend.jsp",function(){j=!1}).bind("click.jsp-touchclick",function(){return h?h=!1:void 0}),R.enableKeyboardNavigation&&(c=[],K&&c.push(re[0]),N&&c.push(ee[0]),I.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||c.length&&me(e.target).closest(c).length){var t=_,o=$;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:a=e.keyCode,m();break;case 35:A(E-L),a=null;break;case 36:A(0),a=null}return!(l=e.keyCode==a&&t!=_||o!=$)}}).bind("keypress.jsp",function(e){return e.keyCode==a&&m(),e.target===this||c.length&&me(e.target).closest(c).length?!l:void 0}),R.hideFocus?(b.css("outline","none"),"hideFocus"in q[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in q[0]&&b.attr("hideFocus",!1))),R.clickOnTrack&&(B(),N&&te.bind("mousedown.jsp",function(i){if(void 0===i.originalTarget||i.originalTarget==i.currentTarget){var n,s=me(this),e=s.offset(),r=i.pageY-e.top-$,a=!0,l=function(){var e=s.offset(),t=i.pageY-e.top-ie/2,o=L*R.scrollPagePercent,e=U*o/(E-L);if(r<0)t<$-e?je.scrollByY(-o):x(t);else{if(!(0<r))return void c();$+e<t?je.scrollByY(o):x(t)}n=setTimeout(l,a?R.initialDelay:R.trackClickRepeatFreq),a=!1},c=function(){n&&clearTimeout(n),n=null,me(document).unbind("mouseup.jsp",c)};return l(),me(document).bind("mouseup.jsp",c),!1}}),K&&ae.bind("mousedown.jsp",function(i){if(void 0===i.originalTarget||i.originalTarget==i.currentTarget){var n,s=me(this),e=s.offset(),r=i.pageX-e.left-_,a=!0,l=function(){var e=s.offset(),t=i.pageX-e.left-ce/2,o=F*R.scrollPagePercent,e=Z*o/(O-F);if(r<0)t<_-e?je.scrollByX(-o):P(t);else{if(!(0<r))return void c();_+e<t?je.scrollByX(o):P(t)}n=setTimeout(l,a?R.initialDelay:R.trackClickRepeatFreq),a=!1},c=function(){n&&clearTimeout(n),n=null,me(document).unbind("mouseup.jsp",c)};return l(),me(document).bind("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,o=escape(location.hash.substr(1));try{e=me("#"+o+', a[name="'+o+'"]')}catch(e){return}e.length&&I.find(o)&&(0===q.scrollTop()?t=setInterval(function(){0<q.scrollTop()&&(Y(e,!0),me(document).scrollTop(q.position().top),clearInterval(t))},50):(Y(e,!0),me(document).scrollTop(q.position().top)))}}(),R.hijackInternalLinks&&(me(document.body).data("jspHijack")||(me(document.body).data("jspHijack",!0),me(document.body).delegate('a[href*="#"]',"click",function(e){var t,o,i,n=this.href.substr(0,this.href.indexOf("#")),s=location.href;if(n===(s=-1!==location.href.indexOf("#")?location.href.substr(0,location.href.indexOf("#")):s)){t=escape(this.href.substr(this.href.indexOf("#")+1));try{o=me("#"+t+', a[name="'+t+'"]')}catch(e){return}o.length&&((i=o.closest(".jspScrollable")).data("jsp").scrollToElement(o,!0),i[0].scrollIntoView&&(n=me(window).scrollTop(),((s=o.offset().top)<n||s>n+me(window).height())&&i[0].scrollIntoView()),e.preventDefault())}})))):(b.removeClass("jspScrollable"),I.css({top:0,left:0,width:q.width()-ve}),q.unbind(ge),I.find(":input,a").unbind("focus.jsp"),b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),I.unbind(".jsp"),B()),R.autoReinitialise&&!ue?ue=setInterval(function(){w(R)},R.autoReinitialiseDelay):!R.autoReinitialise&&ue&&clearInterval(ue),i&&b.scrollTop(0)&&A(i,!1),n&&b.scrollLeft(0)&&W(n,!1),b.trigger("jsp-initialised",[K||N])}function y(){te.height(oe+"px"),$=0,t=R.verticalGutter+te.outerWidth(),I.width(F-t-ve);try{0===ee.position().left&&I.css("margin-left",t+"px")}catch(e){}}function k(){q.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){le-=me(this).outerWidth()}),ae.width(le+"px"),_=0}function C(e,t,o,i){var n="before",s="after";(t="os"==t?/Mac/.test(navigator.platform)?"after":"split":t)==n?s=t:t==s&&(n=t,t=o,o=i,i=t),e[n](o)[s](i)}function T(e,t,o){return function(){return function(e,t,o,i){o=me(o).addClass("jspActive");var n,s,r=!0,a=function(){0!==e&&je.scrollByX(e*R.arrowButtonSpeed),0!==t&&je.scrollByY(t*R.arrowButtonSpeed),s=setTimeout(a,r?R.initialDelay:R.arrowRepeatFreq),r=!1};a(),n=i?"mouseout.jsp":"mouseup.jsp",(i=i||me("html")).bind(n,function(){o.removeClass("jspActive"),s&&clearTimeout(s),s=null,i.unbind(n)})}(e,t,this,o),this.blur(),!1}}function B(){ae&&ae.unbind("mousedown.jsp"),te&&te.unbind("mousedown.jsp")}function D(){me("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Q&&Q.removeClass("jspActive"),J&&J.removeClass("jspActive")}function x(e,t){var o,i,n,s;N&&(e<0?e=0:U<e&&(e=U),o=new me.Event("jsp-will-scroll-y"),b.trigger(o,[e]),o.isDefaultPrevented()||(i=0===(o=e||0),n=o==U,s=-(e/U)*(E-L),(t=void 0===t?R.animateScroll:t)?je.animate(Q,"top",e,H,function(){b.trigger("jsp-user-scroll-y",[-s,i,n])}):(Q.css("top",e),H(e),b.trigger("jsp-user-scroll-y",[-s,i,n]))))}function H(e){void 0===e&&(e=Q.position().top),q.scrollTop(0);var t,o=0===($=e||0),i=$==U,n=-(e/U)*(E-L);s==o&&a==i||(s=o,a=i,b.trigger("jsp-arrow-change",[s,a,r,l])),t=o,e=i,R.showArrows&&(ne[t?"addClass":"removeClass"]("jspDisabled"),se[e?"addClass":"removeClass"]("jspDisabled")),I.css("top",n),b.trigger("jsp-scroll-y",[-n,o,i]).trigger("scroll")}function P(e,t){var o,i,n,s;K&&(e<0?e=0:Z<e&&(e=Z),o=new me.Event("jsp-will-scroll-x"),b.trigger(o,[e]),o.isDefaultPrevented()||(i=0===(o=e||0),n=o==Z,s=-(e/Z)*(O-F),(t=void 0===t?R.animateScroll:t)?je.animate(J,"left",e,S,function(){b.trigger("jsp-user-scroll-x",[-s,i,n])}):(J.css("left",e),S(e),b.trigger("jsp-user-scroll-x",[-s,i,n]))))}function S(e){void 0===e&&(e=J.position().left),q.scrollTop(0);var t,o=0===(_=e||0),i=_==Z,n=-(e/Z)*(O-F);r==o&&l==i||(r=o,l=i,b.trigger("jsp-arrow-change",[s,a,r,l])),t=o,e=i,R.showArrows&&(pe[t?"addClass":"removeClass"]("jspDisabled"),de[e?"addClass":"removeClass"]("jspDisabled")),I.css("left",n),b.trigger("jsp-scroll-x",[-n,o,i]).trigger("scroll")}function A(e,t){x(e/(E-L)*U,t)}function W(e,t){P(e/(O-F)*Z,t)}function Y(e,t,o){var i,n,s,r,a,l,c,p=0,d=0;try{i=me(e)}catch(e){return}for(r=i.outerHeight(),n=i.outerWidth(),q.scrollTop(0),q.scrollLeft(0);!i.is(".jspPane");)if(p+=i.position().top,d+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;a=(s=M())+L,p<s||t?l=p-R.horizontalGutter:a<p+r&&(l=p-L+r+R.horizontalGutter),isNaN(l)||A(l,o),l=(r=z())+F,d<r||t?c=d-R.horizontalGutter:l<d+n&&(c=d-F+n+R.horizontalGutter),isNaN(c)||W(c,o)}function z(){return-I.position().left}function M(){return-I.position().top}function X(){return!1}var R,I,F,L,q,O,E,V,G,N,K,Q,U,$,J,Z,_,ee,te,t,oe,ie,ne,se,re,ae,le,ce,pe,de,ue,fe,he,je=this,s=!0,r=!0,a=!1,l=!1,o=b.clone(!1,!1).empty(),ge=me.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",ve="border-box"===b.css("box-sizing")?fe=0:(fe=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0));me.extend(je,{reinitialise:function(e){w(e=me.extend({},R,e))},scrollToElement:function(e,t,o){Y(e,t,o)},scrollTo:function(e,t,o){W(e,o),A(t,o)},scrollToX:function(e,t){W(e,t)},scrollToY:function(e,t){A(e,t)},scrollToPercentX:function(e,t){W(e*(O-F),t)},scrollToPercentY:function(e,t){A(e*(E-L),t)},scrollBy:function(e,t,o){je.scrollByX(e,o),je.scrollByY(t,o)},scrollByX:function(e,t){P((z()+Math[e<0?"floor":"ceil"](e))/(O-F)*Z,t)},scrollByY:function(e,t){x((M()+Math[e<0?"floor":"ceil"](e))/(E-L)*U,t)},positionDragX:function(e,t){P(e,t)},positionDragY:function(e,t){x(e,t)},animate:function(e,t,o,i,n){var s={};s[t]=o,e.animate(s,{duration:R.animateDuration,easing:R.animateEase,queue:!1,step:i,complete:n})},getContentPositionX:z,getContentPositionY:M,getContentWidth:function(){return O},getContentHeight:function(){return E},getPercentScrolledX:function(){return z()/(O-F)},getPercentScrolledY:function(){return M()/(E-L)},getIsScrollableH:function(){return K},getIsScrollableV:function(){return N},getContentPane:function(){return I},scrollToBottom:function(e){x(U,e)},hijackInternalLinks:me.noop,destroy:function(){var e,t;e=M(),t=z(),b.removeClass("jspScrollable").unbind(".jsp"),I.unbind(".jsp"),b.replaceWith(o.append(I.children())),o.scrollTop(e),o.scrollLeft(t),ue&&clearInterval(ue)}}),w(e)}return o=me.extend({},me.fn.jScrollPane.defaults,o),me.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed}),this.each(function(){var e=me(this),t=e.data("jsp");t?t.reinitialise(o):(me("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new i(e,o),e.data("jsp",t))})},me.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});
!function(t){var e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.html2canvas=t())}(function(){return function o(r,i,s){function a(n,t){if(!i[n]){if(!r[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}e=i[n]={exports:{}};r[n][0].call(e.exports,function(t){var e=r[n][1][t];return a(e||t)},e,e.exports,o,r,i,s)}return i[n].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,L,M){!function(P){!function(t){function y(t){throw RangeError(g[t])}function n(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function e(t,e){return n(t.split(p),e).join(".")}function w(t){for(var e,n,o=[],r=0,i=t.length;r<i;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<i?56320==(64512&(n=t.charCodeAt(r++)))?o.push(((1023&e)<<10)+(1023&n)+65536):(o.push(e),r--):o.push(e);return o}function f(t){return n(t,function(t){var e="";return 65535<t&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+O(t)}).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function v(t,e,n){var o=0;for(t=n?R(t/l):t>>1,t+=R(t/e);m*k>>1<t;o+=E)t=R(t/m);return R(o+(m+1)*t/(t+h))}function o(t){var e,n,o,r,i,s,a,c=[],h=t.length,l=0,d=S,u=C,p=t.lastIndexOf(I);for(p<0&&(p=0),n=0;n<p;++n)128<=t.charCodeAt(n)&&y("not-basic"),c.push(t.charCodeAt(n));for(o=0<p?p+1:0;o<h;){for(r=l,i=1,s=E;h<=o&&y("invalid-input"),a=t.charCodeAt(o++),(E<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:E)||a>R((x-l)/i))&&y("overflow"),l+=a*i,!(a<(a=s<=u?T:u+k<=s?k:s-u));s+=E)i>R(x/(a=E-a))&&y("overflow"),i*=a;u=v(l-r,e=c.length+1,0==r),R(l/e)>x-d&&y("overflow"),d+=R(l/e),l%=e,c.splice(l++,0,d)}return f(c)}function r(t){for(var e,n,o,r,i,s,a,c,h,l,d,u=[],p=(t=w(t)).length,f=S,g=C,m=e=0;m<p;++m)(c=t[m])<128&&u.push(O(c));for(n=o=u.length,o&&u.push(I);n<p;){for(r=x,m=0;m<p;++m)f<=(c=t[m])&&c<r&&(r=c);for(r-f>R((x-e)/(h=n+1))&&y("overflow"),e+=(r-f)*h,f=r,m=0;m<p;++m)if((c=t[m])<f&&++e>x&&y("overflow"),c==f){for(i=e,s=E;!(i<(a=s<=g?T:g+k<=s?k:s-g));s+=E)d=i-a,l=E-a,u.push(O(b(a+d%l,0))),i=R(d/l);u.push(O(b(i,0))),g=v(e,h,n==o),e=0,++n}++e,++f}return u.join("")}var i="object"==typeof M&&M,s="object"==typeof L&&L&&L.exports==i&&L,a="object"==typeof P&&P;a.global!==a&&a.window!==a||(t=a);var c,x=2147483647,E=36,T=1,k=26,h=38,l=700,C=72,S=128,I="-",d=/^xn--/,u=/[^ -~]/,p=/\x2E|\u3002|\uFF0E|\uFF61/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=E-T,R=Math.floor,O=String.fromCharCode,A={version:"1.2.4",ucs2:{decode:w,encode:f},decode:o,encode:r,toASCII:function(t){return e(t,function(t){return u.test(t)?"xn--"+r(t):t})},toUnicode:function(t){return e(t,function(t){return d.test(t)?o(t.slice(4).toLowerCase()):t})}};if(0,i&&!i.nodeType)if(s)s.exports=A;else for(c in A)A.hasOwnProperty(c)&&(i[c]=A[c]);else t.punycode=A}(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e){function r(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),o=t.firstChild;o;)!0!==e&&1===o.nodeType&&"SCRIPT"===o.nodeName||n.appendChild(r(o,e)),o=o.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?function(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){i("Unable to copy canvas content from",e,t)}}(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}var i=t("./log");e.exports=function(i,t,e,n,s,a,c){var h=r(i.documentElement,s.javascriptEnabled),l=t.createElement("iframe");return l.className="html2canvas-container",l.style.visibility="hidden",l.style.position="fixed",l.style.left="-10000px",l.style.top="0px",l.style.border="0",l.width=e,l.height=n,l.scrolling="no",t.body.appendChild(l),new Promise(function(e){var t,n,o,r=l.contentWindow.document;l.contentWindow.onload=l.onload=function(){var t=setInterval(function(){0<r.body.childNodes.length&&(function t(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var n=e.firstChild;n;)t(n),n=n.nextSibling}}(r.documentElement),clearInterval(t),"view"===s.type&&(l.contentWindow.scrollTo(a,c),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.contentWindow.scrollY===c&&l.contentWindow.scrollX===a||(r.documentElement.style.top=-c+"px",r.documentElement.style.left=-a+"px",r.documentElement.style.position="absolute")),e(l))},50)},r.open(),r.write("<!DOCTYPE html><html></html>"),n=a,o=c,!(t=i).defaultView||n===t.defaultView.pageXOffset&&o===t.defaultView.pageYOffset||t.defaultView.scrollTo(n,o),r.replaceChild(r.adoptNode(h),r.documentElement),r.close()})}},{"./log":13}],3:[function(t,e){function n(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}n.prototype.darken=function(t){t=1-t;return new n([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),3<t.length&&(this.a=t[3])),Array.isArray(t)};var o=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(t){var e;return null!==(e=t.match(o))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var r=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(t){var e=null;return null!==(e=t.match(r))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var i=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;n.prototype.rgb=function(t){var e;return null!==(e=t.match(i))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;n.prototype.rgba=function(t){var e;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(t){t=t.toLowerCase();var e=a[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return!(this.r=this.g=this.b=this.a=0);return!!e},n.prototype.isColor=!0;var a={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=n},{}],4:[function(t,e){function n(t,e){var n,o,r=T++;if((e=e||{}).logging&&(w.options.logging=!0,w.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:g,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var i=null!=e.width?e.width:window.innerWidth,s=null!=e.height?e.height:window.innerHeight;return v((n=t,(o=document.createElement("a")).href=n,o.href=o.href,o),e.proxy,document,i,s,e).then(function(t){return u(t.contentWindow.document.documentElement,t,e,i,s)})}var a,c,h,l,d,t=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return t.setAttribute(E+r,r),a=t.ownerDocument,c=e,h=t.ownerDocument.defaultView.innerWidth,l=t.ownerDocument.defaultView.innerHeight,d=r,b(a,a,h,l,c,a.defaultView.pageXOffset,a.defaultView.pageYOffset).then(function(t){w("Document cloned");var e=E+d,n="["+e+"='"+d+"']";a.querySelector(n).removeAttribute(e);var e=t.contentWindow,o=e.document.querySelector(n);return Promise.resolve("function"!=typeof c.onclone||c.onclone(e.document)).then(function(){return u(o,t,c,h,l)})}).then(function(t){return"function"==typeof e.onrendered&&(w("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function u(n,o,r,t,e){var i,s,a=o.contentWindow,c=new f(a.document),h=new m(r,c),l=x(n),s="view"===r.type?t:(s=a.document,Math.max(Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),Math.max(s.body.offsetWidth,s.documentElement.offsetWidth),Math.max(s.body.clientWidth,s.documentElement.clientWidth))),i="view"===r.type?e:(i=a.document,Math.max(Math.max(i.body.scrollHeight,i.documentElement.scrollHeight),Math.max(i.body.offsetHeight,i.documentElement.offsetHeight),Math.max(i.body.clientHeight,i.documentElement.clientHeight))),d=new r.renderer(s,i,h,r,document);return new y(n,d,c,h,r).ready.then(function(){var t,e;return w("Finished rendering"),t="view"===r.type?p(d.canvas,{width:d.canvas.width,height:d.canvas.height,top:0,left:0,x:0,y:0}):n===a.document.body||n===a.document.documentElement||null!=r.canvas?d.canvas:p(d.canvas,{width:(null!=r.width?r:l).width,height:(null!=r.height?r:l).height,top:l.top,left:l.left,x:0,y:0}),e=o,r.removeContainer&&(e.parentNode.removeChild(e),w("Cleaned up container")),t})}function p(t,e){var n=document.createElement("canvas"),o=Math.min(t.width-1,Math.max(0,e.left)),r=Math.min(t.width,Math.max(1,e.left+e.width)),i=Math.min(t.height-1,Math.max(0,e.top)),s=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;r-=o,s-=i;return w("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",r,"height:",s),w("Resulting crop with width",e.width,"and height",e.height,"with x",o,"and y",i),n.getContext("2d").drawImage(t,o,i,r,s,e.x,e.y,r,s),n}var f=t("./support"),g=t("./renderers/canvas"),m=t("./imageloader"),y=t("./nodeparser"),o=t("./nodecontainer"),w=t("./log"),r=t("./utils"),b=t("./clone"),v=t("./proxy").loadUrlDocument,x=r.getBounds,E="data-html2canvas-node",T=0;n.CanvasRenderer=g,n.NodeContainer=o,n.log=w,n.utils=r;r="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:n;e.exports=r},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e){function o(t){var n;this.src=t,r("DummyImageContainer for",t),this.promise&&this.image||(r("Initiating DummyImageContainer"),o.prototype.image=new Image,n=this.image,o.prototype.promise=new Promise(function(t,e){n.onload=t,n.onerror=e,n.src=i(),!0===n.complete&&t(n)}))}var r=t("./log"),i=t("./utils").smallImage;e.exports=o},{"./log":13,"./utils":26}],6:[function(t,e){var s=t("./utils").smallImage;e.exports=function(t,e){var n=document.createElement("div"),o=document.createElement("img"),r=document.createElement("span"),i="Hidden Text";n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin=0,n.style.padding=0,document.body.appendChild(n),o.src=s(),o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",r.style.fontFamily=t,r.style.fontSize=e,r.style.margin=0,r.style.padding=0,r.appendChild(document.createTextNode(i)),n.appendChild(r),n.appendChild(o),e=o.offsetTop-r.offsetTop+1,n.removeChild(r),n.appendChild(document.createTextNode(i)),n.style.lineHeight="normal",o.style.verticalAlign="super",o=o.offsetTop-n.offsetTop+1,document.body.removeChild(n),this.baseline=e,this.lineWidth=1,this.middle=o}},{"./utils":26}],7:[function(t,e){function n(){this.data={}}var o=t("./font");n.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new o(t,e)),this.data[t+"-"+e]},e.exports=n},{"./font":6}],8:[function(i,t){function e(e,t,n){this.image=null,this.src=e;var o=this,r=s(e);this.promise=(t?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(n.proxy,r,n)).then(function(t){return i("./core")(t.contentWindow.document.documentElement,{type:"view",width:t.width,height:t.height,proxy:n.proxy,javascriptEnabled:n.javascriptEnabled,removeContainer:n.removeContainer,allowTaint:n.allowTaint,imageTimeout:n.imageTimeout/2})}).then(function(t){return o.image=t})}var s=i("./utils").getBounds,r=i("./proxy").loadUrlDocument;e.prototype.proxyLoad=function(t,e,n){var o=this.src;return r(o.src,t,o.ownerDocument,e.width,e.height,n)},t.exports=e},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e){function n(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}n.TYPES={LINEAR:1,RADIAL:2},n.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=n},{}],10:[function(t,e){e.exports=function(n,o){this.src=n,this.image=new Image;var r=this;this.tainted=null,this.promise=new Promise(function(t,e){r.image.onload=t,r.image.onerror=e,o&&(r.image.crossOrigin="anonymous"),r.image.src=n,!0===r.image.complete&&t(r.image)})}},{}],11:[function(t,e){function n(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var i=t("./log"),o=t("./imagecontainer"),r=t("./dummyimagecontainer"),s=t("./proxyimagecontainer"),a=t("./framecontainer"),c=t("./svgcontainer"),h=t("./svgnodecontainer"),l=t("./lineargradientcontainer"),d=t("./webkitgradientcontainer"),u=t("./utils").bind;n.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},n.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},n.prototype.addImage=function(n,o){return function(e){e.args.forEach(function(t){this.imageExists(n,t)||(n.splice(0,0,o.call(this,e)),i("Added image #"+n.length,"string"==typeof t?t.substring(0,100):t))},this)}},n.prototype.hasImageBackground=function(t){return"none"!==t.method},n.prototype.loadImage=function(t){if("url"!==t.method)return"linear-gradient"===t.method?new l(t):"gradient"===t.method?new d(t):"svg"===t.method?new h(t.args[0],this.support.svg):"IFRAME"===t.method?new a(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new r(t);t=t.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new o(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||!0===this.options.allowTaint||this.isSVG(t)?new o(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(t,!0):this.options.proxy?new s(t,this.options.proxy):new r(t):new c(t)},n.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||c.prototype.isInline(t)},n.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},n.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},n.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},n.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){return new r(e.src).promise.then(function(t){e.image=t})})},n.prototype.get=function(e){var n=null;return this.images.some(function(t){return(n=t).src===e})?n:null},n.prototype.fetch=function(t){return this.images=t.reduce(u(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(e,n){e.promise.then(function(){i("Succesfully loaded image #"+(n+1),e)},function(t){i("Failed loading image #"+(n+1),e,t)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),i("Finished searching images"),this},n.prototype.timeout=function(n,o){var r,t=Promise.race([n.promise,new Promise(function(t,e){r=setTimeout(function(){i("Timed out loading image",n),e(n)},o)})]).then(function(t){return clearTimeout(r),t});return t.catch(function(){clearTimeout(r)}),t},e.exports=n},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e){function n(t){o.apply(this,arguments),this.type=o.TYPES.LINEAR;var e=n.REGEXP_DIRECTION.test(t.args[0])||!o.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,o=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=o,this.y1=n;break;case"center":break;default:n=.01*parseFloat(t,10);if(isNaN(n))break;0===e?(this.y0=n,this.y1=1-this.y0):(this.x0=n,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(o.REGEXP_COLORSTOP),n=+e[2],t=0==n?"%":e[3];return{color:new r(e[1]),stop:"%"===t?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(n,o){null===n.stop&&this.colorStops.slice(o).some(function(t,e){return null!==t.stop&&(n.stop=(t.stop-this.colorStops[o-1].stop)/(e+1)+this.colorStops[o-1].stop,!0)},this)},this)}var o=t("./gradientcontainer"),r=t("./color");n.prototype=Object.create(o.prototype),n.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=n},{"./color":3,"./gradientcontainer":9}],13:[function(t,e){var n=function(){n.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-n.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};n.options={logging:!1},e.exports=n},{}],14:[function(t,e){function n(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function s(t){return-1!==t.toString().indexOf("%")}function o(t){return t.replace("px","")}function r(t){return parseFloat(t)}var i=t("./color"),t=t("./utils"),a=t.getBounds,c=t.parseBackgrounds,h=t.offsetBounds;n.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},n.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},n.prototype.assignStack=function(t){(this.stack=t).children.push(this)},n.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},n.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},n.prototype.prefixedCss=function(e){var n=this.css(e);return void 0===n&&["webkit","moz","ms","o"].some(function(t){return void 0!==(n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)))},this),void 0===n?null:n},n.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},n.prototype.cssInt=function(t){t=parseInt(this.css(t),10);return isNaN(t)?0:t},n.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new i(this.css(t)))},n.prototype.cssFloat=function(t){t=parseFloat(this.css(t));return isNaN(t)?0:t},n.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},n.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},n.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=c(this.css("backgroundImage")))},n.prototype.cssList=function(t,e){t=(this.css(t)||"").split(",");return t=1===(t=(t=t[e||0]||t[0]||"auto").trim().split(" ")).length?[t[0],s(t[0])?"auto":t[0]]:t},n.prototype.parseBackgroundSize=function(t,e,n){var o,r=this.cssList("backgroundSize",n);if(s(r[0]))o=t.width*parseFloat(r[0])/100;else{if(/contain|cover/.test(r[0])){var i=t.width/t.height,n=e.width/e.height;return i<n^"contain"===r[0]?{width:t.height*n,height:t.height}:{width:t.width,height:t.width/n}}o=parseInt(r[0],10)}return t="auto"===r[0]&&"auto"===r[1]?e.height:"auto"===r[1]?o/e.width*e.height:s(r[1])?t.height*parseFloat(r[1])/100:parseInt(r[1],10),{width:o="auto"===r[0]?t/e.height*e.width:o,height:t}},n.prototype.parseBackgroundPosition=function(t,e,n,o){var r=this.cssList("backgroundPosition",n),n=s(r[0])?(t.width-(o||e).width)*(parseFloat(r[0])/100):parseInt(r[0],10),o="auto"===r[1]?n/e.width*e.height:s(r[1])?(t.height-(o||e).height)*parseFloat(r[1])/100:parseInt(r[1],10);return{left:n="auto"===r[0]?o/e.height*e.width:n,top:o}},n.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},n.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),o=0;n&&o<n.length;o++){var r=n[o].match(this.TEXT_SHADOW_VALUES);e.push({color:new i(r[0]),offsetX:r[1]?parseFloat(r[1].replace("px","")):0,offsetY:r[2]?parseFloat(r[2].replace("px","")):0,blur:r[3]?r[3].replace("px",""):0})}return e},n.prototype.parseTransform=function(){var t,e;return this.transformData||(this.hasTransform()?(t=this.parseBounds(),(e=this.prefixedCss("transformOrigin").split(" ").map(o).map(r))[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}):this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]}),this.transformData},n.prototype.parseTransformMatrix=function(){var t;return this.transformMatrix||(t=(t=this.prefixedCss("transform"))?function(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){t=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}(t.match(this.MATRIX_PROPERTY)):null,this.transformMatrix=t||[1,0,0,1,0,0]),this.transformMatrix},n.prototype.parseBounds=function(){return this.bounds||(this.bounds=(this.hasTransform()?h:a)(this.node))},n.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},n.prototype.getValue=function(){var t,e=this.node.value||"";return"SELECT"===this.node.tagName?e=(t=(t=this.node).options[t.selectedIndex||0])&&t.text||"":"password"===this.node.type&&(e=Array(e.length+1).join("•")),0===e.length?this.node.placeholder||"":e},n.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,n.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,n.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,n.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=n},{"./color":3,"./utils":26}],15:[function(t,e){function n(t,e,n,o,r){R("Starting NodeParser"),this.renderer=e,this.options=r,this.range=null,this.support=n,this.renderQueue=[],this.stack=new B(!0,1,t.ownerDocument,null);var i=new A(t,null);r.background&&e.rectangle(0,0,e.width,e.height,new N(r.background)),t===t.ownerDocument.documentElement&&(n=new A(i.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null),e.rectangle(0,0,e.width,e.height,n.color("backgroundColor"))),i.visibile=i.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=I([i].concat(this.getChildren(i)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new M,R("Fetched nodes, total:",this.nodes.length),R("Calculate overflow clips"),this.calculateOverflowClips(),R("Start fetching images"),this.images=o.fetch(this.nodes.filter(E)),this.ready=this.images.ready.then(D(function(){return R("Images loaded, starting parsing"),R("Creating stacking contexts"),this.createStackingContexts(),R("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),R("Render queue created with "+this.renderQueue.length+" items"),new Promise(D(function(t){r.async?"function"==typeof r.async?r.async.call(this,this.renderQueue,t):0<this.renderQueue.length?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function o(t){return t.parent&&t.parent.clip.length}function a(){}function c(s,a,c,h){return s.map(function(t,e){if(0<t.width){var n=a.left,o=a.top,r=a.width,i=a.height-s[2].width;switch(e){case 0:i=s[0].width,t.args=d({c1:[n,o],c2:[n+r,o],c3:[n+r-s[1].width,o+i],c4:[n+s[3].width,o+i]},h[0],h[1],c.topLeftOuter,c.topLeftInner,c.topRightOuter,c.topRightInner);break;case 1:n=a.left+a.width-s[1].width,r=s[1].width,t.args=d({c1:[n+r,o],c2:[n+r,o+i+s[2].width],c3:[n,o+i],c4:[n,o+s[0].width]},h[1],h[2],c.topRightOuter,c.topRightInner,c.bottomRightOuter,c.bottomRightInner);break;case 2:o=o+a.height-s[2].width,i=s[2].width,t.args=d({c1:[n+r,o+i],c2:[n,o+i],c3:[n+s[3].width,o],c4:[n+r-s[3].width,o]},h[2],h[3],c.bottomRightOuter,c.bottomRightInner,c.bottomLeftOuter,c.bottomLeftInner);break;case 3:r=s[3].width,t.args=d({c1:[n,o+i+s[2].width],c2:[n,o],c3:[n+r,o+s[0].width],c4:[n+r,o+i]},h[3],h[0],c.bottomLeftOuter,c.bottomLeftInner,c.topLeftOuter,c.topLeftInner)}}return t})}function y(t,e,n,o){var r=(Math.sqrt(2)-1)/3*4,i=n*r,r=o*r,n=t+n,o=e+o;return{topLeft:l({x:t,y:o},{x:t,y:o-r},{x:n-i,y:e},{x:n,y:e}),topRight:l({x:t,y:e},{x:t+i,y:e},{x:n,y:o-r},{x:n,y:o}),bottomRight:l({x:n,y:e},{x:n,y:e+r},{x:t+i,y:o},{x:t,y:o}),bottomLeft:l({x:n,y:o},{x:n-i,y:o},{x:t,y:e+r},{x:t,y:e})}}function h(t,e,n){var o=t.left,r=t.top,i=t.width,s=t.height,a=e[0][0]<i/2?e[0][0]:i/2,c=e[0][1]<s/2?e[0][1]:s/2,h=e[1][0]<i/2?e[1][0]:i/2,l=e[1][1]<s/2?e[1][1]:s/2,d=e[2][0]<i/2?e[2][0]:i/2,u=e[2][1]<s/2?e[2][1]:s/2,p=e[3][0]<i/2?e[3][0]:i/2,f=e[3][1]<s/2?e[3][1]:s/2,g=i-h,m=s-u,t=i-d,e=s-f;return{topLeftOuter:y(o,r,a,c).topLeft.subdivide(.5),topLeftInner:y(o+n[3].width,r+n[0].width,Math.max(0,a-n[3].width),Math.max(0,c-n[0].width)).topLeft.subdivide(.5),topRightOuter:y(o+g,r,h,l).topRight.subdivide(.5),topRightInner:y(o+Math.min(g,i+n[3].width),r+n[0].width,g>i+n[3].width?0:h-n[3].width,l-n[0].width).topRight.subdivide(.5),bottomRightOuter:y(o+t,r+m,d,u).bottomRight.subdivide(.5),bottomRightInner:y(o+Math.min(t,i-n[3].width),r+Math.min(m,s+n[0].width),Math.max(0,d-n[1].width),u-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:y(o,r+e,p,f).bottomLeft.subdivide(.5),bottomLeftInner:y(o+n[3].width,r+e,Math.max(0,p-n[3].width),f-n[2].width).bottomLeft.subdivide(.5)}}function l(i,s,a,c){function h(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}return{start:i,startControl:s,endControl:a,end:c,subdivide:function(t){var e=h(i,s,t),n=h(s,a,t),o=h(a,c,t),r=h(e,n,t),n=h(n,o,t),t=h(r,n,t);return[l(i,e,r,t),l(t,n,o,c)]},curveTo:function(t){t.push(["bezierCurve",s.x,s.y,a.x,a.y,c.x,c.y])},curveToReversed:function(t){t.push(["bezierCurve",a.x,a.y,s.x,s.y,i.x,i.y])}}}function d(t,e,n,o,r,i,s){var a=[];return 0<e[0]||0<e[1]?(a.push(["line",o[1].start.x,o[1].start.y]),o[1].curveTo(a)):a.push(["line",t.c1[0],t.c1[1]]),0<n[0]||0<n[1]?(a.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(a),a.push(["line",s[0].end.x,s[0].end.y]),s[0].curveToReversed(a)):(a.push(["line",t.c2[0],t.c2[1]]),a.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(a.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(a)):a.push(["line",t.c4[0],t.c4[1]]),a}function s(t,e,n,o,r,i,s){0<e[0]||0<e[1]?(t.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(t),o[1].curveTo(t)):t.push(["line",i,s]),(0<n[0]||0<n[1])&&t.push(["line",r[0].start.x,r[0].start.y])}function u(t){return t.cssInt("zIndex")<0}function p(t){return 0<t.cssInt("zIndex")}function f(t){return 0===t.cssInt("zIndex")}function g(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function m(t){return t instanceof B}function w(t){return 0<t.node.data.trim().length}function r(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function b(t){return"static"!==t.css("position")}function v(t){return"none"!==t.css("float")}function x(t){var e=this;return function(){return!t.apply(e,arguments)}}function E(t){return t.node.nodeType===Node.ELEMENT_NODE}function i(t){return!0===t.isPseudoElement}function T(t){return t.node.nodeType===Node.TEXT_NODE}function k(t){return parseInt(t,10)}function C(t){return t.width}function S(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function I(t){return[].concat.apply([],t)}var R=t("./log"),O=t("punycode"),A=t("./nodecontainer"),P=t("./textcontainer"),L=t("./pseudoelementcontainer"),M=t("./fontmetrics"),N=t("./color"),B=t("./stackingcontext"),t=t("./utils"),D=t.bind,_=t.getBounds,F=t.parseBackgrounds,W=t.offsetBounds;n.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){var e,n;E(t)?(i(t)&&t.appendToDOM(),t.borders=this.parseBorders(t),e="hidden"===t.css("overflow")?[t.borders.clip]:[],(n=t.parseClip())&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=o(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,i(t)&&t.cleanDOM()):T(t)&&(t.clip=o(t)?t.parent.clip:[]),i(t)||(t.bounds=null)},this)},n.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(D(function(){this.asyncRenderer(t,e)},this),0)},n.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+L.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+L.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},n.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},n.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},n.prototype.getPseudoElements=function(t){var e,n=[[t]];return t.node.nodeType===Node.ELEMENT_NODE&&(e=this.getPseudoElement(t,":before"),t=this.getPseudoElement(t,":after"),e&&n.push(e),t&&n.push(t)),I(n)},n.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var o,r=(o=n.content,(r=o.substr(0,1))===o.substr(o.length-1)&&r.match(/'|"/)?o.substr(1,o.length-2):o),o="url"===r.substr(0,3),i=document.createElement(o?"img":"html2canvaspseudoelement"),e=new L(i,t,e),s=n.length-1;0<=s;s--){var a=n.item(s).replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")});i.style[a]=n[a]}if(i.className=L.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+L.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return i.src=F(r)[0].args[0],[e];var r=document.createTextNode(r);return i.appendChild(r),[e,new P(r,e)]},n.prototype.getChildren=function(n){return I([].filter.call(n.node.childNodes,r).map(function(t){var e=[new(t.nodeType===Node.TEXT_NODE?P:A)(t,n)].filter(S);return t.nodeType===Node.ELEMENT_NODE&&e.length&&"TEXTAREA"!==t.tagName?e[0].isElementVisible()?e.concat(this.getChildren(e[0])):[]:e},this))},n.prototype.newStackingContext=function(t,e){var n=new B(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n),(e?n.getParentStack(this):n.parent.stack).contexts.push(n),t.stack=n},n.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){var e,n;E(t)&&(this.isRootElement(t)||t.getOpacity()<1||(n=(e=t).css("position"),"auto"!==(-1!==["absolute","relative","fixed"].indexOf(n)?e.css("zIndex"):"auto"))||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):E(t)&&(b(t)&&f(t)||-1!==["inline-block","inline-table"].indexOf(t.css("display"))||v(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},n.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},n.prototype.isRootElement=function(t){return null===t.parent},n.prototype.sortStackingContexts=function(t){var n;t.contexts.sort((n=t.contexts.slice(0),function(t,e){return t.cssInt("zIndex")+n.indexOf(t)/n.length-(e.cssInt("zIndex")+n.indexOf(e)/n.length)})),t.contexts.forEach(this.sortStackingContexts,this)},n.prototype.parseTextBounds=function(r){return function(t,e,n){if("none"!==r.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!r.parent.hasTransform()){var o=n.slice(0,e).join("").length;return this.getRangeBounds(r.node,o,t.length)}if(r.node&&"string"==typeof r.node.data){e=r.node.splitText(t.length),o=this.getWrapperBounds(r.node,r.parent.hasTransform());return r.node=e,o}}else this.support.rangeBounds&&!r.parent.hasTransform()||(r.node=r.node.splitText(t.length));return{}}},n.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),o=t.parentNode,r=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),o.replaceChild(n,t);e=(e?W:_)(n);return o.replaceChild(r,n),e},n.prototype.getRangeBounds=function(t,e,n){var o=this.range||(this.range=t.ownerDocument.createRange());return o.setStart(t,e),o.setEnd(t,e+n),o.getBoundingClientRect()},n.prototype.parse=function(t){var e=t.contexts.filter(u),n=t.children.filter(E),o=n.filter(x(v)),r=o.filter(x(b)).filter(x(g)),i=n.filter(x(b)).filter(v),s=o.filter(x(b)).filter(g),n=t.contexts.concat(o.filter(b)).filter(f),o=t.children.filter(T).filter(w),t=t.contexts.filter(p);e.concat(r).concat(i).concat(s).concat(n).concat(o).concat(t).forEach(function(t){this.renderQueue.push(t),m(t)&&(this.parse(t),this.renderQueue.push(new a))},this)},n.prototype.paint=function(t){try{t instanceof a?this.renderer.ctx.restore():T(t)?(i(t.parent)&&t.parent.appendToDOM(),this.paintText(t),i(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(R(t),this.options.strict)throw t}},n.prototype.paintNode=function(t){m(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},n.prototype.paintElement=function(e){var n=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,n,e.borders.borders.map(C))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var t=this.images.get(e.node);t?this.renderer.renderImage(e,n,e.borders,t):R("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":t=this.images.get(e.node.src);t?this.renderer.renderImage(e,n,e.borders,t):R("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,n,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},n.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),o={width:n-1,height:n-1,top:e.top,left:e.left},e=[3,3],r=[e,e,e,e],i=[1,1,1,1].map(function(t){return{color:new N("#A5A5A5"),width:t}}),s=h(o,r,i);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(o.left+1,o.top+1,o.width-2,o.height-2,new N("#DEDEDE")),this.renderer.renderBorders(c(i,o,s,r)),t.node.checked&&(this.renderer.font(new N("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",o.left+n/6,o.top+n-1))},this)},n.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new N("#DEDEDE"),1,new N("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new N("#424242"))},this)},n.prototype.paintFormValue=function(e){var t,n,o,r=e.getValue();0<r.length&&(t=e.node.ownerDocument,n=t.createElement("html2canvaswrapper"),["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(t){try{n.style[t]=e.css(t)}catch(t){R("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}}),o=e.parseBounds(),n.style.position="fixed",n.style.left=o.left+"px",n.style.top=o.top+"px",n.textContent=r,t.body.appendChild(n),this.paintText(new P(n.firstChild,e)),t.body.removeChild(n))},n.prototype.paintText=function(n){n.applyTextTransform();var t=O.ucs2.decode(n.node.data),o=this.options.letterRendering&&!/^(normal|none|0px)$/.test(n.parent.css("letterSpacing"))||/[^\u0000-\u00ff]/.test(n.node.data)?t.map(function(t){return O.ucs2.encode([t])}):function(t){for(var e,n=[],o=0,r=!1;t.length;)-1!==[32,13,10,9,45].indexOf(t[o])===r?((e=t.splice(0,o)).length&&n.push(O.ucs2.encode(e)),r=!r,o=0):o++,o>=t.length&&((e=t.splice(0,o)).length&&n.push(O.ucs2.encode(e)));return n}(t),e=n.parent.fontWeight(),r=n.parent.css("fontSize"),i=n.parent.css("fontFamily"),t=n.parent.parseTextShadows();this.renderer.font(n.parent.color("color"),n.parent.css("fontStyle"),n.parent.css("fontVariant"),e,r,i),t.length?this.renderer.fontShadow(t[0].color,t[0].offsetX,t[0].offsetY,t[0].blur):this.renderer.clearShadow(),this.renderer.clip(n.parent.clip,function(){o.map(this.parseTextBounds(n),this).forEach(function(t,e){t&&(this.renderer.text(o[e],t.left,t.bottom),this.renderTextDecoration(n.parent,t,this.fontMetrics.getMetrics(i,r)))},this)},this)},n.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var H={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};n.prototype.parseBorders=function(r){var e,t=r.parseBounds(),n=(e=r,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){t=e.css("border"+t+"Radius").split(" ");return t.length<=1&&(t[1]=t[0]),t.map(k)})),o=["Top","Right","Bottom","Left"].map(function(t,e){var n=r.css("border"+t+"Style"),o=r.color("border"+t+"Color");"inset"===n&&o.isBlack()&&(o=new N([255,255,255,o.a]));e=H[n]?H[n][e]:null;return{width:r.cssInt("border"+t+"Width"),color:e?o[e[0]](e[1]):o,args:null}}),i=h(t,n,o);return{clip:this.parseBackgroundClip(r,i,o,n,t),borders:c(o,t,i,n)}},n.prototype.parseBackgroundClip=function(t,e,n,o,r){var i=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":s(i,o[0],o[1],e.topLeftInner,e.topRightInner,r.left+n[3].width,r.top+n[0].width),s(i,o[1],o[2],e.topRightInner,e.bottomRightInner,r.left+r.width-n[1].width,r.top+n[0].width),s(i,o[2],o[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-n[1].width,r.top+r.height-n[2].width),s(i,o[3],o[0],e.bottomLeftInner,e.topLeftInner,r.left+n[3].width,r.top+r.height-n[2].width);break;default:s(i,o[0],o[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),s(i,o[1],o[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),s(i,o[2],o[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),s(i,o[3],o[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return i},e.exports=n},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){function a(t,e,n){var o="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var r=s(o),t=c(e,t,r);return o?h(t):i(n,t,r).then(function(t){return u(t.content)})}function i(r,i,s){return new Promise(function(e,n){function o(){delete window.html2canvas.proxy[s],r.body.removeChild(t)}var t=r.createElement("script");window.html2canvas.proxy[s]=function(t){o(),e(t)},t.src=i,t.onerror=function(t){o(),n(t)},r.body.appendChild(t)})}function s(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++r+"_"+Math.round(1e5*Math.random())}function c(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}var h=t("./xhr"),o=t("./utils"),l=t("./log"),d=t("./clone"),u=o.decode64,r=0;n.Proxy=a,n.ProxyURL=function(t,e,n){var o="crossOrigin"in new Image,r=s(o),t=c(e,t,r);return o?Promise.resolve(t):i(n,t,r).then(function(t){return"data:"+t.type+";base64,"+t.content})},n.loadUrlDocument=function(t,e,n,o,r,i){return new a(t,e,window.document).then((s=t,function(e){var n,t=new DOMParser;try{n=t.parseFromString(e,"text/html")}catch(t){l("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(t){l("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var o=n.querySelector("base");return o&&o.href.host||((o=n.createElement("base")).href=s,n.head.insertBefore(o,n.head.firstChild)),n})).then(function(t){return d(t,n,o,r,i,0,0)});var s}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e){var i=t("./proxy").ProxyURL;e.exports=function(n,o){var t=document.createElement("a");t.href=n,n=t.href,this.src=n,this.image=new Image;var r=this;this.promise=new Promise(function(t,e){r.image.crossOrigin="Anonymous",r.image.onload=t,r.image.onerror=e,new i(n,o,document).then(function(t){r.image.src=t}).catch(e)})}},{"./proxy":16}],18:[function(t,e){function n(t,e,n){o.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}var o=t("./nodecontainer");n.prototype.cloneTo=function(t){n.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(n.prototype=Object.create(o.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},n.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},n.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",n.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=n},{"./nodecontainer":14}],19:[function(t,e){function n(t,e,n,o,r){this.width=t,this.height=e,this.images=n,this.options=o,this.document=r}var a=t("./log");n.prototype.renderImage=function(t,e,n,o){var r=t.cssInt("paddingLeft"),i=t.cssInt("paddingTop"),s=t.cssInt("paddingRight"),t=t.cssInt("paddingBottom"),n=n.borders,s=e.width-(n[1].width+n[3].width+r+s),t=e.height-(n[0].width+n[2].width+i+t);this.drawImage(o,0,0,o.image.width||s,o.image.height||t,e.left+r+n[3].width,e.top+i+n[0].width,s,t)},n.prototype.renderBackground=function(t,e,n){0<e.height&&0<e.width&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},n.prototype.renderBackgroundColor=function(t,e){t=t.color("backgroundColor");t.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,t)},n.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},n.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},n.prototype.renderBackgroundImage=function(r,i,s){r.parseBackgroundImages().reverse().forEach(function(t,e,n){switch(t.method){case"url":var o=this.images.get(t.args[0]);o?this.renderBackgroundRepeating(r,i,o,n.length-(e+1),s):a("Error loading background-image",t.args[0]);break;case"linear-gradient":case"gradient":o=this.images.get(t.value);o?this.renderBackgroundGradient(o,i,s):a("Error loading background-image",t.args[0]);break;case"none":break;default:a("Unknown background-image type",t.args[0])}},this)},n.prototype.renderBackgroundRepeating=function(t,e,n,o,r){var i=t.parseBackgroundSize(e,n.image,o),s=t.parseBackgroundPosition(e,n.image,o,i);switch(t.parseBackgroundRepeat(o)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,s,i,e,e.left+r[3],e.top+s.top+r[0],99999,i.height,r);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,s,i,e,e.left+s.left+r[3],e.top+r[0],i.width,99999,r);break;case"no-repeat":this.backgroundRepeatShape(n,s,i,e,e.left+s.left+r[3],e.top+s.top+r[0],i.width,i.height,r);break;default:this.renderBackgroundRepeat(n,s,i,{top:e.top,left:e.left},r[3],r[0])}},e.exports=n},{"./log":13}],20:[function(t,e){function n(t,e){r.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",t,"x",e)}function o(t){return 0<t.length}var r=t("../renderer"),i=t("../lineargradientcontainer"),s=t("../log");(n.prototype=Object.create(r.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},n.prototype.rectangle=function(t,e,n,o,r){this.setFillStyle(r).fillRect(t,e,n,o)},n.prototype.circle=function(t,e,n,o){this.setFillStyle(o),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},n.prototype.circleStroke=function(t,e,n,o,r,i){this.circle(t,e,n,o),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},n.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},n.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},n.prototype.drawImage=function(t,e,n,o,r,i,s,a,c){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,o,r,i,s,a,c)},n.prototype.clip=function(t,e,n){this.ctx.save(),t.filter(o).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},n.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){("rect"===t[0]?this.ctx.rect:this.ctx[0===e?"moveTo":t[0]+"To"]).apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},n.prototype.font=function(t,e,n,o,r,i){this.setFillStyle(t).font=[e,n,o,r,i].join(" ").split(",")[0]},n.prototype.fontShadow=function(t,e,n,o){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",o)},n.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},n.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},n.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},n.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},n.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},n.prototype.backgroundRepeatShape=function(t,e,n,o,r,i,s,a,c){i=[["line",Math.round(r),Math.round(i)],["line",Math.round(r+s),Math.round(i)],["line",Math.round(r+s),Math.round(a+i)],["line",Math.round(r),Math.round(a+i)]];this.clip([i],function(){this.renderBackgroundRepeat(t,e,n,o,c[3],c[0])},this)},n.prototype.renderBackgroundRepeat=function(t,e,n,o,r,i){r=Math.round(o.left+e.left+r),i=Math.round(o.top+e.top+i);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(r,i),this.ctx.fill(),this.ctx.translate(-r,-i)},n.prototype.renderBackgroundGradient=function(t,e){var n;t instanceof i&&(n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1),t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,n))},n.prototype.resizeImage=function(t,e){var n=t.image;if(n.width===e.width&&n.height===e.height)return n;t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),t},e.exports=n},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e){function n(t,e,n,o){r.call(this,n,o),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var r=t("./nodecontainer");(n.prototype=Object.create(r.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=n},{"./nodecontainer":14}],22:[function(t,e){function n(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(t){var e,n,o=!1;return t.createRange&&((e=t.createRange()).getBoundingClientRect&&((n=t.createElement("boundtest")).style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(o=!0),t.body.removeChild(n))),o},n.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},n.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=n},{}],23:[function(t,e){function n(t){this.src=t,this.image=null;var n=this;this.promise=this.hasFabric().then(function(){return n.isInline(t)?Promise.resolve(n.inlineFormatting(t)):o(t)}).then(function(e){return new Promise(function(t){window.html2canvas.svg.fabric.loadSVGFromString(e,n.createCanvas.call(n,t))})})}var o=t("./xhr"),r=t("./utils").decode64;n.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},n.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},n.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},n.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},n.prototype.createCanvas=function(o){var r=this;return function(t,e){var n=new window.html2canvas.svg.fabric.StaticCanvas("c");r.image=n.lowerCanvasEl,n.setWidth(e.width).setHeight(e.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(t,e)).renderAll(),o(n.lowerCanvasEl)}},n.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):r(t)},e.exports=n},{"./utils":26,"./xhr":28}],24:[function(t,e){function n(n,t){this.src=n,this.image=null;var o=this;this.promise=t?new Promise(function(t,e){o.image=new Image,o.image.onload=t,o.image.onerror=e,o.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(n),!0===o.image.complete&&t(o.image)}):this.hasFabric().then(function(){return new Promise(function(t){window.html2canvas.svg.fabric.parseSVGDocument(n,o.createCanvas.call(o,t))})})}t=t("./svgcontainer");n.prototype=Object.create(t.prototype),e.exports=n},{"./svgcontainer":23}],25:[function(t,e){function n(t,e){r.call(this,t,e)}function o(t,e,n){return 0<t.length?e+n.toUpperCase():void 0}var r=t("./nodecontainer");(n.prototype=Object.create(r.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},n.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,o);case"uppercase":return e.toUpperCase();default:return e}},e.exports=n},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},n.decode64=function(t){for(var e,n,o,r,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=t.length,c="",h=0;h<a;h+=4)o=s.indexOf(t[h])<<2|(i=s.indexOf(t[h+1]))>>4,r=(15&i)<<4|(e=s.indexOf(t[h+2]))>>2,i=(3&e)<<6|(n=s.indexOf(t[h+3])),c+=64===e?String.fromCharCode(o):64===n||-1===n?String.fromCharCode(o,r):String.fromCharCode(o,r,i);return c},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){function e(){d&&((n='"'===n.substr(0,1)?n.substr(1,n.length-2):n)&&l.push(n),"-"===d.substr(0,1)&&0<(r=d.indexOf("-",1)+1)&&(o=d.substr(0,r),d=d.substr(r)),a.push({prefix:o,method:d.toLowerCase(),value:i,args:l,image:null})),l=[],d=o=n=i=""}var n,o,r,i,s,a=[],c=0,h=0,l=[],d=o=n=i="";return t.split("").forEach(function(t){if(!(0===c&&-1<" \r\n\t".indexOf(t))){switch(t){case'"':s?s===t&&(s=null):s=t;break;case"(":if(s)break;if(0===c)return c=1,void(i+=t);h++;break;case")":if(s)break;if(1===c){if(0===h)return c=0,i+=t,void e();h--}break;case",":if(s)break;if(0===c)return void e();if(1===c&&0===h&&!d.match(/^url$/i))return l.push(n),n="",void(i+=t)}i+=t,0===c?d+=t:n+=t}}),e(),a}},{}],27:[function(t,e){function n(t){o.apply(this,arguments),this.type="linear"===t.args[0]?o.TYPES.LINEAR:o.TYPES.RADIAL}var o=t("./gradientcontainer");n.prototype=Object.create(o.prototype),e.exports=n},{"./gradientcontainer":9}],28:[function(t,e){e.exports=function(o){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("GET",o),n.onload=function(){200===n.status?t(n.responseText):e(new Error(n.statusText))},n.onerror=function(){e(new Error("Network Error"))},n.send()})}},{}]},{},[4])(4)});
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(b,_){function T(){return new Date(Date.UTC.apply(Date,arguments))}function M(){var t=new Date;return T(t.getFullYear(),t.getMonth(),t.getDate())}function t(t){return function(){return this[t].apply(this,arguments)}}function U(t,e){b(t).data("datepicker",this),this._process_options(e),this.dates=new i,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=b(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=b(x.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()}var e,i=(e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,a=this.length;i<a;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(t){t&&(b.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var t=new i;return t.replace(this),t}},function(){var t=[];return t.push.apply(t,arguments),b.extend(t,e),t});U.prototype={constructor:U,_resolveViewName:function(t,e){return 0===t||"days"===t||"month"===t?0:1===t||"months"===t||"year"===t?1:2===t||"years"===t||"decade"===t?2:3===t||"decades"===t||"century"===t?3:4===t||"centuries"===t||"millennium"===t?4:e!==_&&e},_check_template:function(t){try{return t===_||""===t?!1:(t.match(/[<>]/g)||[]).length<=0||0<b(t).length}catch(t){return!1}},_process_options:function(t){this._o=b.extend({},this._o,t);var e=this.o=b.extend({},this._o),i=e.language;F[i]||(i=i.split("-")[0],F[i]||(i=l.language)),e.language=i,e.startView=this._resolveViewName(e.startView,0),e.minViewMode=this._resolveViewName(e.minViewMode,0),e.maxViewMode=this._resolveViewName(e.maxViewMode,4),e.startView=Math.min(e.startView,e.maxViewMode),e.startView=Math.max(e.startView,e.minViewMode),!0!==e.multidate&&(e.multidate=Number(e.multidate)||!1,!1!==e.multidate&&(e.multidate=Math.max(0,e.multidate))),e.multidateSeparator=String(e.multidateSeparator),e.weekStart%=7,e.weekEnd=(e.weekStart+6)%7;var a=x.parseFormat(e.format);e.startDate!==-1/0&&(e.startDate?e.startDate instanceof Date?e.startDate=this._local_to_utc(this._zero_time(e.startDate)):e.startDate=x.parseDate(e.startDate,a,e.language,e.assumeNearbyYear):e.startDate=-1/0),e.endDate!==1/0&&(e.endDate?e.endDate instanceof Date?e.endDate=this._local_to_utc(this._zero_time(e.endDate)):e.endDate=x.parseDate(e.endDate,a,e.language,e.assumeNearbyYear):e.endDate=1/0),e.daysOfWeekDisabled=e.daysOfWeekDisabled||[],b.isArray(e.daysOfWeekDisabled)||(e.daysOfWeekDisabled=e.daysOfWeekDisabled.split(/[,\s]*/)),e.daysOfWeekDisabled=b.map(e.daysOfWeekDisabled,function(t){return parseInt(t,10)}),e.daysOfWeekHighlighted=e.daysOfWeekHighlighted||[],b.isArray(e.daysOfWeekHighlighted)||(e.daysOfWeekHighlighted=e.daysOfWeekHighlighted.split(/[,\s]*/)),e.daysOfWeekHighlighted=b.map(e.daysOfWeekHighlighted,function(t){return parseInt(t,10)}),e.datesDisabled=e.datesDisabled||[],b.isArray(e.datesDisabled)||(e.datesDisabled=[e.datesDisabled]),e.datesDisabled=b.map(e.datesDisabled,function(t){return x.parseDate(t,a,e.language,e.assumeNearbyYear)});var s=String(e.orientation).toLowerCase().split(/\s+/g),n=e.orientation.toLowerCase(),s=b.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)});if(e.orientation={x:"auto",y:"auto"},n&&"auto"!==n)if(1===s.length)switch(s[0]){case"top":case"bottom":e.orientation.y=s[0];break;case"left":case"right":e.orientation.x=s[0]}else n=b.grep(s,function(t){return/^left|right$/.test(t)}),e.orientation.x=n[0]||"auto",n=b.grep(s,function(t){return/^top|bottom$/.test(t)}),e.orientation.y=n[0]||"auto";e.defaultViewDate?(t=e.defaultViewDate.year||(new Date).getFullYear(),i=e.defaultViewDate.month||0,n=e.defaultViewDate.day||1,e.defaultViewDate=T(t,i,n)):e.defaultViewDate=M()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,a,s=0;s<t.length;s++)e=t[s][0],2===t[s].length?(i=_,a=t[s][1]):3===t[s].length&&(i=t[s][1],a=t[s][2]),e.on(a,i)},_unapplyEvents:function(t){for(var e,i,a,s=0;s<t.length;s++)e=t[s][0],2===t[s].length?(a=_,i=t[s][1]):3===t[s].length&&(a=t[s][1],i=t[s][2]),e.off(i,a)},_buildEvents:function(){var t={keyup:b.proxy(function(t){-1===b.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:b.proxy(this.keydown,this),paste:b.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=b.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.inputField,t],[this.component,{click:b.proxy(this.show,this)}]]:this._events=[[this.element,{click:b.proxy(this.show,this),keydown:b.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:b.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:b.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":b.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:b.proxy(this.click,this)}],[b(window),{resize:b.proxy(this.place,this)}],[b(document),{mousedown:b.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,e){e=e||this.dates.get(-1),e=this._utc_to_local(e);this.element.trigger({type:t,date:e,dates:b.map(this.dates,this._utc_to_local),format:b.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return x.formatDate(i,e,this.o.language)},this)})},show:function(){return this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&b(this.element).blur(),this)},hide:function(){return this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide")),this},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var e;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==b.inArray("text/plain",t.originalEvent.clipboardData.types))e=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;e=window.clipboardData.getData("Text")}this.setDate(e),this.update(),t.preventDefault()},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return b.map(this.dates,this._utc_to_local)},getUTCDates:function(){return b.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return void 0!==t?new Date(t):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=b.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=b.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,b.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:t("setDates"),setUTCDate:t("setUTCDates"),remove:t("destroy"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(e){e===_&&(e=this.o.format);var i=this.o.language;return b.map(this.dates,function(t){return x.formatDate(t,e,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),e=this.picker.outerHeight(),i=b(this.o.container),a=i.width(),s=("body"===this.o.container?b(document):i).scrollTop(),n=i.offset(),o=[];this.element.parents().each(function(){var t=b(this).css("z-index");"auto"!==t&&0!==t&&o.push(parseInt(t))});var r=Math.max.apply(Math,o)+this.o.zIndexOffset,h=(this.component?this.component.parent():this.element).offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),i=h.left-n.left,n=h.top-n.top;"body"!==this.o.container&&(n+=s),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(i-=t-d)):h.left<0?(this.picker.addClass("datepicker-orient-left"),i-=h.left-10):a<i+t?(this.picker.addClass("datepicker-orient-right"),i+=d-t):this.picker.addClass("datepicker-orient-left");t=this.o.orientation.y;return"auto"===t&&(t=-s+n-e<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+t),"top"===t?n-=e+parseInt(this.picker.css("padding-top")):n+=l,this.o.rtl?(d=a-(i+d),this.picker.css({top:n,right:d,zIndex:r})):this.picker.css({top:n,left:i,zIndex:r}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),i=[],e=!1;return arguments.length?(b.each(arguments,b.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),e=!0):(i=(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=b.map(i,b.proxy(function(t){return x.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=b.grep(i,b.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,e?this.setValue():i.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var t=this.o.weekStart,e="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1}),e+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)e+='<th class="dow',-1<b.inArray(t,this.o.daysOfWeekDisabled)&&(e+=" disabled"),e+='">'+F[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",i=0;i<12;)e+='<span class="month'+(t&&t.getMonth()===i?" focused":"")+'">'+F[this.o.language].monthsShort[i++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=b.map(t,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var e=[],i=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),s=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<a?e.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>a)&&e.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&e.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()&&e.push("today"),-1!==this.dates.contains(t)&&e.push("active"),this.dateWithinRange(t)||e.push("disabled"),this.dateIsDisabled(t)&&e.push("disabled","disabled-date"),-1!==b.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&e.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&e.push("range"),-1!==b.inArray(t.valueOf(),this.range)&&e.push("selected"),t.valueOf()===this.range[0]&&e.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&e.push("range-end")),e},_fill_yearsView:function(t,e,i,a,s,n,o,r){var h,l,d,c,u,p="",t=this.picker.find(t),i=parseInt(s/i,10)*i,f=parseInt(n/a,10)*a,g=parseInt(o/a,10)*a,D=b.map(this.dates,function(t){return parseInt(t.getUTCFullYear()/a,10)*a});for(t.find(".datepicker-switch").text(i+"-"+(i+9*a)),h=i-a,l=-1;l<11;l+=1)d=[e],c=null,-1===l?d.push("old"):10===l&&d.push("new"),-1!==b.inArray(h,D)&&d.push("active"),(h<f||g<h)&&d.push("disabled"),h===this.viewDate.getFullYear()&&d.push("focused"),r!==b.noop&&((u=r(new Date(h,0,1)))===_?u={}:"boolean"==typeof u?u={enabled:u}:"string"==typeof u&&(u={classes:u}),!1===u.enabled&&d.push("disabled"),u.classes&&(d=d.concat(u.classes.split(/\s+/))),u.tooltip&&(c=u.tooltip)),p+='<span class="'+d.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+h+"</span>",h+=a;t.find("td").html(p)},fill:function(){var t,e=new Date(this.viewDate),i=e.getUTCFullYear(),a=e.getUTCMonth(),s=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,n=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,o=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,r=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,h=F[this.o.language].today||F.en.today||"",l=F[this.o.language].clear||F.en.clear||"",d=F[this.o.language].titleFormat||F.en.titleFormat;if(!isNaN(i)&&!isNaN(a)){this.picker.find(".datepicker-days .datepicker-switch").text(x.formatDate(e,d,this.o.language)),this.picker.find("tfoot .today").text(h).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(l).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var c=T(i,a-1,28),a=x.getDaysInMonth(c.getUTCFullYear(),c.getUTCMonth());c.setUTCDate(a),c.setUTCDate(a-(c.getUTCDay()-this.o.weekStart+7)%7);var u=new Date(c);c.getUTCFullYear()<100&&u.setUTCFullYear(c.getUTCFullYear()),u.setUTCDate(u.getUTCDate()+42);for(var p,f,u=u.valueOf(),g=[];c.valueOf()<u;)c.getUTCDay()===this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)&&(p=new Date(+c+(this.o.weekStart-c.getUTCDay()-7)%7*864e5),f=new Date(Number(p)+(11-p.getUTCDay())%7*864e5),p=new Date(Number(p=T(f.getUTCFullYear(),0,1))+(11-p.getUTCDay())%7*864e5),f=(f-p)/864e5/7+1,g.push('<td class="cw">'+f+"</td>")),(p=this.getClassNames(c)).push("day"),this.o.beforeShowDay!==b.noop&&((f=this.o.beforeShowDay(this._utc_to_local(c)))===_?f={}:"boolean"==typeof f?f={enabled:f}:"string"==typeof f&&(f={classes:f}),!1===f.enabled&&p.push("disabled"),f.classes&&(p=p.concat(f.classes.split(/\s+/))),f.tooltip&&(t=f.tooltip)),p=b.isFunction(b.uniqueSort)?b.uniqueSort(p):b.unique(p),g.push('<td class="'+p.join(" ")+'"'+(t?' title="'+t+'"':"")+">"+c.getUTCDate()+"</td>"),t=null,c.getUTCDay()===this.o.weekEnd&&g.push("</tr>"),c.setUTCDate(c.getUTCDate()+1);this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var D,a=F[this.o.language].monthsTitle||F.en.monthsTitle||"Months",y=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?a:i).end().find("span").removeClass("active");b.each(this.dates,function(t,e){e.getUTCFullYear()===i&&y.eq(e.getUTCMonth()).addClass("active")}),(i<s||o<i)&&y.addClass("disabled"),i===s&&y.slice(0,n).addClass("disabled"),i===o&&y.slice(r+1).addClass("disabled"),this.o.beforeShowMonth!==b.noop&&(D=this,b.each(y,function(t,e){t=new Date(i,t,1),t=D.o.beforeShowMonth(t);t===_?t={}:"boolean"==typeof t?t={enabled:t}:"string"==typeof t&&(t={classes:t}),!1!==t.enabled||b(e).hasClass("disabled")||b(e).addClass("disabled"),t.classes&&b(e).addClass(t.classes),t.tooltip&&b(e).prop("title",t.tooltip)})),this._fill_yearsView(".datepicker-years","year",10,1,i,s,o,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,i,s,o,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,i,s,o,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){var e,i,a,s,n,o;t.preventDefault(),t.stopPropagation(),(e=b(t.target)).hasClass("datepicker-switch")&&this.showMode(1);var t=e.closest(".prev, .next");0<t.length&&(t=x.modes[this.viewMode].navStep*(t.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,t),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,t),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),e.hasClass("today")&&!e.hasClass("day")&&(this.showMode(-2),this._setDate(M(),"linked"===this.o.todayBtn?null:"view")),e.hasClass("clear")&&this.clearDates(),e.hasClass("disabled")||(e.hasClass("day")&&(i=parseInt(e.text(),10)||1,a=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),e.hasClass("old")&&(0===s?(s=11,--a,o=n=!0):(--s,n=!0)),e.hasClass("new")&&(11===s?(a+=1,o=n=!(s=0)):(s+=1,n=!0)),this._setDate(T(a,s,i)),o&&this._trigger("changeYear",this.viewDate),n&&this._trigger("changeMonth",this.viewDate)),e.hasClass("month")&&(this.viewDate.setUTCDate(1),i=1,s=e.parent().find("span").index(e),a=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(T(a,s,i)),this.showMode()):this.showMode(-1),this.fill()),(e.hasClass("year")||e.hasClass("decade")||e.hasClass("century"))&&(this.viewDate.setUTCDate(1),i=1,s=0,a=parseInt(e.text(),10)||0,this.viewDate.setUTCFullYear(a),e.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(T(a,s,i))),e.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(T(a,s,i))),e.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(T(a,s,i))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&b(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||1<this.o.multidate||this.o.toggleActive)&&this.dates.remove(e):(!1===this.o.multidate&&this.dates.clear(),this.dates.push(t)),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var i=new Date(t);return i.setUTCDate(t.getUTCDate()+e),i},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!(i=t)||isNaN(i.getTime()))return this.o.defaultViewDate;var i;if(!e)return t;var a,s,n=new Date(t.valueOf()),o=n.getUTCDate(),r=n.getUTCMonth(),h=Math.abs(e);if(e=0<e?1:-1,1===h)s=-1===e?function(){return n.getUTCMonth()===r}:function(){return n.getUTCMonth()!==a},a=r+e,n.setUTCMonth(a),(a<0||11<a)&&(a=(a+12)%12);else{for(var l=0;l<h;l++)n=this.moveMonth(n,e);a=n.getUTCMonth(),n.setUTCDate(o),s=function(){return a!==n.getUTCMonth()}}for(;s();)n.setUTCDate(--o),n.setUTCMonth(a);return n},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,i){do{if(t=this[i](t,e),!this.dateWithinRange(t))return!1}while(i="moveDay",this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(t){return-1!==b.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(i){return this.weekOfDateIsDisabled(i)||0<b.grep(this.o.datesDisabled,function(t){return e=t,(t=i).getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate();var e}).length},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,i,a=!1,s=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(i=this.moveAvailableDate(s,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(i=this.moveAvailableDate(s,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?i=this.moveAvailableDate(s,e,"moveDay"):this.weekOfDateIsDisabled(s)||(i=this.moveAvailableDate(s,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),i=this.moveAvailableDate(s,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),i=this.moveAvailableDate(s,e,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;s=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(s),a=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}a&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())}else 40===t.keyCode&&(this.show(),t.stopPropagation())},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+x.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};function h(t,e){b(t).data("datepicker",this),this.element=b(t),this.inputs=b.map(e.inputs,function(t){return t.jquery?t[0]:t}),delete e.inputs,s.call(b(this.inputs),e).on("changeDate",b.proxy(this.dateUpdated,this)),this.pickers=b.map(this.inputs,function(t){return b(t).data("datepicker")}),this.updateDates()}h.prototype={updateDates:function(){this.dates=b.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var i=b.map(this.dates,function(t){return t.valueOf()});b.each(this.pickers,function(t,e){e.setRange(i)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var e=b(t.target).data("datepicker");if(void 0!==e){var i=e.getUTCDate(),t=b.inArray(t.target,this.inputs),a=t-1,s=t+1,n=this.inputs.length;if(-1!==t){if(b.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[a])for(;0<=a&&i<this.dates[a];)this.pickers[a--].setUTCDate(i);else if(i>this.dates[s])for(;s<n&&i>this.dates[s];)this.pickers[s++].setUTCDate(i);this.updateDates(),delete this.updating}}}},remove:function(){b.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var a=b.fn.datepicker,s=function(n){var o,r=Array.apply(null,arguments);if(r.shift(),this.each(function(){var t,e,i=b(this),a=i.data("datepicker"),s="object"==typeof n&&n;a||(t=function(t,e){function i(t,e){return e.toLowerCase()}var a,s,n=b(t).data(),o={},r=new RegExp("^"+e.toLowerCase()+"([A-Z])");for(s in e=new RegExp("^"+e.toLowerCase()),n)e.test(s)&&(a=s.replace(r,i),o[a]=n[s]);return o}(this,"date"),e=function(t){var i={};if(F[t]||(t=t.split("-")[0],F[t])){var a=F[t];return b.each(d,function(t,e){e in a&&(i[e]=a[e])}),i}}(b.extend({},l,t,s).language),s=b.extend({},l,e,t,s),a=i.hasClass("input-daterange")||s.inputs?(b.extend(s,{inputs:s.inputs||i.find("input").toArray()}),new h(this,s)):new U(this,s),i.data("datepicker",a)),"string"==typeof n&&"function"==typeof a[n]&&(o=a[n].apply(a,r))}),o===_||o instanceof U||o instanceof h)return this;if(1<this.length)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return o};b.fn.datepicker=s;var l=b.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:b.noop,beforeShowMonth:b.noop,beforeShowYear:b.noop,beforeShowDecade:b.noop,beforeShowCentury:b.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},d=b.fn.datepicker.locale_opts=["format","rtl","weekStart"];b.fn.datepicker.Constructor=U;var F=b.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},x={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,x.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),t=t.match(this.validParts);if(!e||!e.length||!t||0===t.length)throw new Error("Invalid date format.");return{separators:e,parts:t}},parseDate:function(t,e,i,a){function s(t,e){return!0===e&&(e=10),t<100&&((t+=2e3)>(new Date).getFullYear()+e&&(t-=100)),t}function n(){var t=this.slice(0,d[k].length),e=d[k].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!t)return _;if(t instanceof Date)return t;if((e="string"==typeof e?x.parseFormat(e):e).toValue)return e.toValue(t,e,i);var o,r,h,l=/([\-+]\d+)([dmwy])/,d=t.match(/([\-+]\d+)([dmwy])/g),c={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},u={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t)){for(t=new Date,k=0;k<d.length;k++)o=l.exec(d[k]),r=parseInt(o[1]),h=c[o[2]],t=U.prototype[h](t,r);return T(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}if(void 0!==u[t]&&(d=(t=u[t]).match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t))){for(t=new Date,k=0;k<d.length;k++)o=l.exec(d[k]),r=parseInt(o[1]),h=c[o[2]],t=U.prototype[h](t,r);return T(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}d=t&&t.match(this.nonpunctuation)||[],t=new Date;var p,f,g={},D=["yyyy","yy","M","MM","m","mm","d","dd"],y={yyyy:function(t,e){return t.setUTCFullYear(a?s(e,a):e)},yy:function(t,e){return t.setUTCFullYear(a?s(e,a):e)},m:function(t,e){if(isNaN(t))return t;for(--e;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};y.M=y.MM=y.mm=y.m,y.dd=y.d,t=M();var m=e.parts.slice();if(d.length!==m.length&&(m=b(m).filter(function(t,e){return-1!==b.inArray(e,D)}).toArray()),d.length===m.length){for(var v,w,k=0,C=m.length;k<C;k++){if(p=parseInt(d[k],10),o=m[k],isNaN(p))switch(o){case"MM":f=b(F[i].months).filter(n),p=b.inArray(f[0],F[i].months)+1;break;case"M":f=b(F[i].monthsShort).filter(n),p=b.inArray(f[0],F[i].monthsShort)+1}g[o]=p}for(k=0;k<D.length;k++)(w=D[k])in g&&!isNaN(g[w])&&(v=new Date(t),y[w](v,g[w]),isNaN(v)||(t=v))}return t},formatDate:function(t,e,i){if(!t)return"";if((e="string"==typeof e?x.parseFormat(e):e).toDisplay)return e.toDisplay(t,e,i);var a={d:t.getUTCDate(),D:F[i].daysShort[t.getUTCDay()],DD:F[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:F[i].monthsShort[t.getUTCMonth()],MM:F[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m,t=[];for(var s=b.extend([],e.separators),n=0,o=e.parts.length;n<=o;n++)s.length&&t.push(s.shift()),t.push(a[e.parts[n]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};x.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+x.headTemplate+"<tbody></tbody>"+x.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+x.headTemplate+x.contTemplate+x.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+x.headTemplate+x.contTemplate+x.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+x.headTemplate+x.contTemplate+x.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+x.headTemplate+x.contTemplate+x.footTemplate+"</table></div></div>",b.fn.datepicker.DPGlobal=x,b.fn.datepicker.noConflict=function(){return b.fn.datepicker=a,this},b.fn.datepicker.version="1.6.4",b(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var e=b(this);e.data("datepicker")||(t.preventDefault(),s.call(e,"show"))}),b(function(){s.call(b('[data-provide="datepicker-inline"]'))})});
jQuery.fn.datepicker.dates.ar={days:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"],daysShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت","أحد"],daysMin:["ح","ن","ث","ع","خ","ج","س","ح"],months:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthsShort:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],today:"هذا اليوم",rtl:!0},jQuery.fn.datepicker.dates.az={days:["Bazar","Bazar ertəsi","Çərşənbə axşamı","Çərşənbə","Cümə axşamı","Cümə","Şənbə"],daysShort:["B.","B.e","Ç.a","Ç.","C.a","C.","Ş."],daysMin:["B.","B.e","Ç.a","Ç.","C.a","C.","Ş."],months:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],monthsShort:["Yan","Fev","Mar","Apr","May","İyun","İyul","Avq","Sen","Okt","Noy","Dek"],today:"Bu gün",weekStart:1},jQuery.fn.datepicker.dates.bg={days:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"],daysShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб"],daysMin:["Н","П","В","С","Ч","П","С"],months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthsShort:["Ян","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Ное","Дек"],today:"днес"},jQuery.fn.datepicker.dates.bs={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],daysMin:["N","Po","U","Sr","Č","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Danas",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.ca={days:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],daysShort:["Diu","Dil","Dmt","Dmc","Dij","Div","Dis"],daysMin:["dg","dl","dt","dc","dj","dv","ds"],months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],monthsShort:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],today:"Avui",monthsTitle:"Mesos",clear:"Esborrar",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.cs={days:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],daysShort:["Ned","Pon","Úte","Stř","Čtv","Pát","Sob"],daysMin:["Ne","Po","Út","St","Čt","Pá","So"],months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],monthsShort:["Led","Úno","Bře","Dub","Kvě","Čer","Čnc","Srp","Zář","Říj","Lis","Pro"],today:"Dnes",clear:"Vymazat",weekStart:1,format:"dd.m.yyyy"},jQuery.fn.datepicker.dates.cy={days:["Sul","Llun","Mawrth","Mercher","Iau","Gwener","Sadwrn"],daysShort:["Sul","Llu","Maw","Mer","Iau","Gwe","Sad"],daysMin:["Su","Ll","Ma","Me","Ia","Gwe","Sa"],months:["Ionawr","Chewfror","Mawrth","Ebrill","Mai","Mehefin","Gorfennaf","Awst","Medi","Hydref","Tachwedd","Rhagfyr"],monthsShort:["Ion","Chw","Maw","Ebr","Mai","Meh","Gor","Aws","Med","Hyd","Tach","Rha"],today:"Heddiw"},jQuery.fn.datepicker.dates.da={days:["søndag","mandag","tirsdag","onsdag","torsdag","fredag","lørdag"],daysShort:["søn","man","tir","ons","tor","fre","lør"],daysMin:["sø","ma","ti","on","to","fr","lø"],months:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],monthsShort:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],today:"I Dag",clear:"Nulstil"},jQuery.fn.datepicker.dates.de={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",monthsTitle:"Monate",clear:"Löschen",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.el={days:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],daysShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],daysMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα"],months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthsShort:["Ιαν","Φεβ","Μαρ","Απρ","Μάι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],today:"Σήμερα",clear:"Καθαρισμός",weekStart:1,format:"d/m/yyyy"},jQuery.fn.datepicker.dates["en-AU"]={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",monthsTitle:"Months",clear:"Clear",weekStart:1,format:"d/mm/yyyy"},jQuery.fn.datepicker.dates["en-GB"]={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",monthsTitle:"Months",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.eo={days:["dimanĉo","lundo","mardo","merkredo","ĵaŭdo","vendredo","sabato"],daysShort:["dim.","lun.","mar.","mer.","ĵaŭ.","ven.","sam."],daysMin:["d","l","ma","me","ĵ","v","s"],months:["januaro","februaro","marto","aprilo","majo","junio","julio","aŭgusto","septembro","oktobro","novembro","decembro"],monthsShort:["jan.","feb.","mar.","apr.","majo","jun.","jul.","aŭg.","sep.","okt.","nov.","dec."],today:"Hodiaŭ",clear:"Nuligi",weekStart:1,format:"yyyy-mm-dd"},jQuery.fn.datepicker.dates.es={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",monthsTitle:"Meses",clear:"Borrar",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.et={days:["Pühapäev","Esmaspäev","Teisipäev","Kolmapäev","Neljapäev","Reede","Laupäev"],daysShort:["Pühap","Esmasp","Teisip","Kolmap","Neljap","Reede","Laup"],daysMin:["P","E","T","K","N","R","L"],months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],monthsShort:["Jaan","Veebr","Märts","Apr","Mai","Juuni","Juuli","Aug","Sept","Okt","Nov","Dets"],today:"Täna",clear:"Tühjenda",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.eu={days:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"],daysShort:["Ig","Al","Ar","Az","Og","Ol","Lr"],daysMin:["Ig","Al","Ar","Az","Og","Ol","Lr"],months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],monthsShort:["Urt","Ots","Mar","Api","Mai","Eka","Uzt","Abu","Ira","Urr","Aza","Abe"],today:"Gaur"},jQuery.fn.datepicker.dates.fa={days:["یک‌شنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه","یک‌شنبه"],daysShort:["یک","دو","سه","چهار","پنج","جمعه","شنبه","یک"],daysMin:["ی","د","س","چ","پ","ج","ش","ی"],months:["ژانویه","فوریه","مارس","آوریل","مه","ژوئن","ژوئیه","اوت","سپتامبر","اکتبر","نوامبر","دسامبر"],monthsShort:["ژان","فور","مار","آور","مه","ژون","ژوی","اوت","سپت","اکت","نوا","دسا"],today:"امروز",clear:"پاک کن",weekStart:1,format:"yyyy/mm/dd"},jQuery.fn.datepicker.dates.fi={days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],daysShort:["sun","maa","tii","kes","tor","per","lau"],daysMin:["su","ma","ti","ke","to","pe","la"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],monthsShort:["tam","hel","maa","huh","tou","kes","hei","elo","syy","lok","mar","jou"],today:"tänään",clear:"Tyhjennä",weekStart:1,format:"d.m.yyyy"},jQuery.fn.datepicker.dates.fo={days:["Sunnudagur","Mánadagur","Týsdagur","Mikudagur","Hósdagur","Fríggjadagur","Leygardagur"],daysShort:["Sun","Mán","Týs","Mik","Hós","Frí","Ley"],daysMin:["Su","Má","Tý","Mi","Hó","Fr","Le"],months:["Januar","Februar","Marts","Apríl","Mei","Juni","Juli","August","Septembur","Oktobur","Novembur","Desembur"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"Í Dag",clear:"Reinsa"},jQuery.fn.datepicker.dates.fr={days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],daysMin:["D","L","Ma","Me","J","V","S"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fév","Mar","Avr","Mai","Jui","Jul","Aou","Sep","Oct","Nov","Déc"],today:"Aujourd'hui",monthsTitle:"Mois",clear:"Effacer",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.fr={days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],daysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],daysMin:["d","l","ma","me","j","v","s"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthsShort:["janv.","févr.","mars","avril","mai","juin","juil.","août","sept.","oct.","nov.","déc."],today:"Aujourd'hui",monthsTitle:"Mois",clear:"Effacer",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.gl={days:["Domingo","Luns","Martes","Mércores","Xoves","Venres","Sábado"],daysShort:["Dom","Lun","Mar","Mér","Xov","Ven","Sáb"],daysMin:["Do","Lu","Ma","Me","Xo","Ve","Sa"],months:["Xaneiro","Febreiro","Marzo","Abril","Maio","Xuño","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],monthsShort:["Xan","Feb","Mar","Abr","Mai","Xun","Xul","Ago","Sep","Out","Nov","Dec"],today:"Hoxe",clear:"Limpar",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.he={days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת","ראשון"],daysShort:["א","ב","ג","ד","ה","ו","ש","א"],daysMin:["א","ב","ג","ד","ה","ו","ש","א"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthsShort:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],today:"היום",rtl:!0},jQuery.fn.datepicker.dates.hr={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthsShort:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],today:"Danas"},jQuery.fn.datepicker.dates.hu={days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],daysShort:["vas","hét","ked","sze","csü","pén","szo"],daysMin:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],monthsShort:["jan","feb","már","ápr","máj","jún","júl","aug","sze","okt","nov","dec"],today:"ma",weekStart:1,clear:"töröl",titleFormat:"yyyy. MM",format:"yyyy.mm.dd"},jQuery.fn.datepicker.dates.hy={days:["Կիրակի","Երկուշաբթի","Երեքշաբթի","Չորեքշաբթի","Հինգշաբթի","Ուրբաթ","Շաբաթ"],daysShort:["Կրկ","Երկ","Երք","Չրք","Հնգ","Ուր","Շբթ"],daysMin:["Կրկ","Երկ","Երք","Չրք","Հնգ","Ուր","Շբթ"],months:["Հունվար","Փետրվար","Մարտ","Ապրիլ","Մայիս","Հունիս","Հուլիս","Օգոստոս","Սեպտեմբեր","Հոկտեմբեր","Նոյեմբեր","Դեկտեմբեր"],monthsShort:["Հուն","Փետ","Մար","Ապր","Մայ","Հնս","Հլս","Օգս","Սեպ","Հոկ","Նմբ","Դեկ"],today:"Այսօր",clear:"Ջնջել",format:"dd.mm.yyyy",weekStart:1},jQuery.fn.datepicker.dates.id={days:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],daysShort:["Mgu","Sen","Sel","Rab","Kam","Jum","Sab"],daysMin:["Mg","Sn","Sl","Ra","Ka","Ju","Sa"],months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],today:"Hari Ini",clear:"Kosongkan"},jQuery.fn.datepicker.dates.is={days:["Sunnudagur","Mánudagur","Þriðjudagur","Miðvikudagur","Fimmtudagur","Föstudagur","Laugardagur"],daysShort:["Sun","Mán","Þri","Mið","Fim","Fös","Lau"],daysMin:["Su","Má","Þr","Mi","Fi","Fö","La"],months:["Janúar","Febrúar","Mars","Apríl","Maí","Júní","Júlí","Ágúst","September","Október","Nóvember","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Maí","Jún","Júl","Ágú","Sep","Okt","Nóv","Des"],today:"Í Dag"},jQuery.fn.datepicker.dates.it={days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",clear:"Cancella",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.it={days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",monthsTitle:"Mesi",clear:"Cancella",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.ja={days:["日曜","月曜","火曜","水曜","木曜","金曜","土曜"],daysShort:["日","月","火","水","木","金","土"],daysMin:["日","月","火","水","木","金","土"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",format:"yyyy/mm/dd",titleFormat:"yyyy年mm月",clear:"クリア"},jQuery.fn.datepicker.dates.ka={days:["კვირა","ორშაბათი","სამშაბათი","ოთხშაბათი","ხუთშაბათი","პარასკევი","შაბათი"],daysShort:["კვი","ორშ","სამ","ოთხ","ხუთ","პარ","შაბ"],daysMin:["კვ","ორ","სა","ოთ","ხუ","პა","შა"],months:["იანვარი","თებერვალი","მარტი","აპრილი","მაისი","ივნისი","ივლისი","აგვისტო","სექტემბერი","ოქტომები","ნოემბერი","დეკემბერი"],monthsShort:["იან","თებ","მარ","აპრ","მაი","ივნ","ივლ","აგვ","სექ","ოქტ","ნოე","დეკ"],today:"დღეს",clear:"გასუფთავება",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.kh={days:["អាទិត្យ","ចន្ទ","អង្គារ","ពុធ","ព្រហស្បតិ៍","សុក្រ","សៅរ៍","អាទិត្យ"],daysShort:["អា.ទិ","ចន្ទ","អង្គារ","ពុធ","ព្រ.ហ","សុក្រ","សៅរ៍","អា.ទិ"],daysMin:["អា.ទិ","ចន្ទ","អង្គារ","ពុធ","ព្រ.ហ","សុក្រ","សៅរ៍","អា.ទិ"],months:["មករា","កុម្ភះ","មិនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"],monthsShort:["មករា","កុម្ភះ","មិនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"],today:"ថ្ងៃនេះ",clear:"សំអាត"},jQuery.fn.datepicker.dates.kk={days:["Жексенбі","Дүйсенбі","Сейсенбі","Сәрсенбі","Бейсенбі","Жұма","Сенбі"],daysShort:["Жек","Дүй","Сей","Сәр","Бей","Жұм","Сен"],daysMin:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"],months:["Қаңтар","Ақпан","Наурыз","Сәуір","Мамыр","Маусым","Шілде","Тамыз","Қыркүйек","Қазан","Қараша","Желтоқсан"],monthsShort:["Қаң","Ақп","Нау","Сәу","Мам","Мау","Шіл","Там","Қыр","Қаз","Қар","Жел"],today:"Бүгін",weekStart:1},jQuery.fn.datepicker.dates.ko={days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],daysShort:["일","월","화","수","목","금","토"],daysMin:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthsShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],today:"오늘",clear:"삭제",format:"yyyy-mm-dd",titleFormat:"yyyy년mm월",weekStart:0},jQuery.fn.datepicker.dates.kr={days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],daysShort:["일","월","화","수","목","금","토"],daysMin:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthsShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},jQuery.fn.datepicker.dates.lt={days:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis"],daysShort:["S","Pr","A","T","K","Pn","Š"],daysMin:["Sk","Pr","An","Tr","Ke","Pn","Št"],months:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthsShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gru"],today:"Šiandien",monthsTitle:"Mėnesiai",clear:"Išvalyti",weekStart:1,format:"yyyy-mm-dd"},jQuery.fn.datepicker.dates.lv={days:["Svētdiena","Pirmdiena","Otrdiena","Trešdiena","Ceturtdiena","Piektdiena","Sestdiena"],daysShort:["Sv","P","O","T","C","Pk","S"],daysMin:["Sv","Pr","Ot","Tr","Ce","Pk","Se"],months:["Janvāris","Februāris","Marts","Aprīlis","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jūn","Jūl","Aug","Sep","Okt","Nov","Dec"],today:"Šodien",weekStart:1},jQuery.fn.datepicker.dates.me={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas",weekStart:1,clear:"Izbriši",format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.mk={days:["Недела","Понеделник","Вторник","Среда","Четврток","Петок","Сабота"],daysShort:["Нед","Пон","Вто","Сре","Чет","Пет","Саб"],daysMin:["Не","По","Вт","Ср","Че","Пе","Са"],months:["Јануари","Февруари","Март","Април","Мај","Јуни","Јули","Август","Септември","Октомври","Ноември","Декември"],monthsShort:["Јан","Фев","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Ное","Дек"],today:"Денес",format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.mn={days:["Ням","Даваа","Мягмар","Лхагва","Пүрэв","Баасан","Бямба"],daysShort:["Ням","Дав","Мяг","Лха","Пүр","Баа","Бям"],daysMin:["Ня","Да","Мя","Лх","Пү","Ба","Бя"],months:["Хулгана","Үхэр","Бар","Туулай","Луу","Могой","Морь","Хонь","Бич","Тахиа","Нохой","Гахай"],monthsShort:["Хул","Үхэ","Бар","Туу","Луу","Мог","Мор","Хон","Бич","Тах","Нох","Гах"],today:"Өнөөдөр",clear:"Тодорхой",format:"yyyy.mm.dd",weekStart:1},jQuery.fn.datepicker.dates.ms={days:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],daysShort:["Aha","Isn","Sel","Rab","Kha","Jum","Sab"],daysMin:["Ah","Is","Se","Ra","Kh","Ju","Sa"],months:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ogo","Sep","Okt","Nov","Dis"],today:"Hari Ini",clear:"Bersihkan"},jQuery.fn.datepicker.dates.nb={days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"I Dag",format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates["nl-BE"]={days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],daysShort:["zo","ma","di","wo","do","vr","za"],daysMin:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthsShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],today:"Vandaag",monthsTitle:"Maanden",clear:"Leegmaken",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.nl={days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],daysShort:["zo","ma","di","wo","do","vr","za"],daysMin:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthsShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],today:"Vandaag",monthsTitle:"Maanden",clear:"Wissen",weekStart:1,format:"dd-mm-yyyy"},jQuery.fn.datepicker.dates.no={days:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],daysShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],daysMin:["Sø","Ma","Ti","On","To","Fr","Lø"],months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],today:"I dag",clear:"Nullstill",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.pl={days:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"],daysShort:["niedz.","pon.","wt.","śr.","czw.","piąt.","sob."],daysMin:["ndz.","pn.","wt.","śr.","czw.","pt.","sob."],months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],monthsShort:["sty.","lut.","mar.","kwi.","maj","cze.","lip.","sie.","wrz.","paź.","lis.","gru."],today:"dzisiaj",weekStart:1,clear:"wyczyść",format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates["pt-BR"]={days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",monthsTitle:"Meses",clear:"Limpar",format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.pt={days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",monthsTitle:"Meses",clear:"Limpar",format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.ro={days:["Duminică","Luni","Marţi","Miercuri","Joi","Vineri","Sâmbătă"],daysShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],daysMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthsShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],today:"Astăzi",clear:"Șterge",weekStart:1},jQuery.fn.datepicker.dates["rs-latin"]={days:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sre","Čet","Pet","Sub"],daysMin:["N","Po","U","Sr","Č","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.rs={days:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],daysShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],daysMin:["Н","По","У","Ср","Ч","Пе","Су"],months:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthsShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],today:"Данас",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.ru={days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вск","Пнд","Втр","Срд","Чтв","Птн","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",format:"dd.mm.yyyy",weekStart:1},jQuery.fn.datepicker.dates.sk={days:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],daysShort:["Ned","Pon","Uto","Str","Štv","Pia","Sob"],daysMin:["Ne","Po","Ut","St","Št","Pia","So"],months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],today:"Dnes",clear:"Vymazať",weekStart:1,format:"d.m.yyyy"},jQuery.fn.datepicker.dates.sl={days:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],daysShort:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"],daysMin:["Ne","Po","To","Sr","Če","Pe","So"],months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danes"},jQuery.fn.datepicker.dates.sq={days:["E Diel","E Hënë","E Martē","E Mërkurë","E Enjte","E Premte","E Shtunë"],daysShort:["Die","Hën","Mar","Mër","Enj","Pre","Shtu"],daysMin:["Di","Hë","Ma","Më","En","Pr","Sht"],months:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nëntor","Dhjetor"],monthsShort:["Jan","Shk","Mar","Pri","Maj","Qer","Korr","Gu","Sht","Tet","Nën","Dhjet"],today:"Sot"},jQuery.fn.datepicker.dates["sr-latin"]={days:["Nedelja","Ponedeljak","Utorak","Sreda","Četvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sre","Čet","Pet","Sub"],daysMin:["N","Po","U","Sr","Č","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.sr={days:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],daysShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],daysMin:["Н","По","У","Ср","Ч","Пе","Су"],months:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthsShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],today:"Данас",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.sv={days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],daysShort:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],daysMin:["Sö","Må","Ti","On","To","Fr","Lö"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Idag",format:"yyyy-mm-dd",weekStart:1,clear:"Rensa"},jQuery.fn.datepicker.dates.sw={days:["Jumapili","Jumatatu","Jumanne","Jumatano","Alhamisi","Ijumaa","Jumamosi"],daysShort:["J2","J3","J4","J5","Alh","Ij","J1"],daysMin:["2","3","4","5","A","I","1"],months:["Januari","Februari","Machi","Aprili","Mei","Juni","Julai","Agosti","Septemba","Oktoba","Novemba","Desemba"],monthsShort:["Jan","Feb","Mac","Apr","Mei","Jun","Jul","Ago","Sep","Okt","Nov","Des"],today:"Leo"},jQuery.fn.datepicker.dates.th={days:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"],daysShort:["อา","จ","อ","พ","พฤ","ศ","ส","อา"],daysMin:["อา","จ","อ","พ","พฤ","ศ","ส","อา"],months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthsShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],today:"วันนี้"},jQuery.fn.datepicker.dates.tr={days:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],daysShort:["Pz","Pzt","Sal","Çrş","Prş","Cu","Cts"],daysMin:["Pz","Pzt","Sa","Çr","Pr","Cu","Ct"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthsShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],today:"Bugün",clear:"Temizle",weekStart:1,format:"dd.mm.yyyy"},jQuery.fn.datepicker.dates.uk={days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],daysShort:["Нед","Пнд","Втр","Срд","Чтв","Птн","Суб"],daysMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Cічень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthsShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],today:"Сьогодні",clear:"Очистити",format:"dd.mm.yyyy",weekStart:1},jQuery.fn.datepicker.dates.vi={days:["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"],daysShort:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],daysMin:["CN","T2","T3","T4","T5","T6","T7"],months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],monthsShort:["Th1","Th2","Th3","Th4","Th5","Th6","Th7","Th8","Th9","Th10","Th11","Th12"],today:"Hôm nay",clear:"Xóa",format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"清除",format:"yyyy年mm月dd日",titleFormat:"yyyy年mm月",weekStart:1},jQuery.fn.datepicker.dates["zh-TW"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["週日","週一","週二","週三","週四","週五","週六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今天",format:"yyyy年mm月dd日",weekStart:1,clear:"清除"};
SVGPathElement.prototype.getPathData&&SVGPathElement.prototype.setPathData||function(){function n(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}var a={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},r=-1!==window.navigator.userAgent.indexOf("MSIE ");n.prototype={parseSegment:function(){var e=this._string[this._currentIndex],t=a[e]||null;if(null===t){if(null===this._prevCommand)return null;if(null===(t=("+"===e||"-"===e||"."===e||"0"<=e&&e<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;var s=null,e=(this._prevCommand=t).toUpperCase();return"H"===e||"V"===e?s=[this._parseNumber()]:"M"===e||"L"===e||"T"===e?s=[this._parseNumber(),this._parseNumber()]:"S"===e||"Q"===e?s=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===e?s=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===e?s=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===e&&(this._skipOptionalSpaces(),s=[]),null===s||0<=s.indexOf(null)?null:{type:t,values:s}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return a[e]||null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,s=1,a=0,n=1,r=1,u=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,n=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var i=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==i)for(var l=this._currentIndex-1,h=1;i<=l;)t+=h*(this._string[l]-"0"),--l,h*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)s*=10,a+=(this._string.charAt(this._currentIndex)-"0")/s,this._currentIndex+=1}if(this._currentIndex!==u&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,r=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var p=t+a;return p*=n,e&&(p*=Math.pow(10,r*e)),u===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),p)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}};function s(e){if(!e||0===e.length)return[];var t=new n(e),s=[];if(t.initialCommandIsMoveTo())for(;t.hasMoreData();){var a=t.parseSegment();if(null===a)break;s.push(a)}return s}function u(e){return e.map(function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}})}function i(e){var v=[],_=null,c=null,o=null,d=null,y=null,x=null,I=null;return e.forEach(function(e){var t,s,a,n,r,u,i,l,h,p;"M"===e.type?(a=e.values[0],n=e.values[1],v.push({type:"M",values:[a,n]}),d=x=a,y=I=n):"C"===e.type?(h=e.values[0],p=e.values[1],t=e.values[2],s=e.values[3],a=e.values[4],n=e.values[5],v.push({type:"C",values:[h,p,t,s,a,n]}),c=t,o=s,d=a,y=n):"L"===e.type?(a=e.values[0],n=e.values[1],v.push({type:"L",values:[a,n]}),d=a,y=n):"H"===e.type?(a=e.values[0],v.push({type:"L",values:[a,y]}),d=a):"V"===e.type?(n=e.values[0],v.push({type:"L",values:[d,n]}),y=n):"S"===e.type?(t=e.values[0],s=e.values[1],a=e.values[2],n=e.values[3],u="C"===_||"S"===_?(r=d+(d-c),y+(y-o)):(r=d,y),v.push({type:"C",values:[r,u,t,s,a,n]}),c=t,o=s,d=a,y=n):"T"===e.type?(a=e.values[0],n=e.values[1],p="Q"===_||"T"===_?(h=d+(d-c),y+(y-o)):(h=d,y),r=d+2*(h-d)/3,u=y+2*(p-y)/3,i=a+2*(h-a)/3,l=n+2*(p-n)/3,v.push({type:"C",values:[r,u,i,l,a,n]}),c=h,o=p,d=a,y=n):"Q"===e.type?(h=e.values[0],p=e.values[1],a=e.values[2],n=e.values[3],r=d+2*(h-d)/3,u=y+2*(p-y)/3,i=a+2*(h-a)/3,l=n+2*(p-n)/3,v.push({type:"C",values:[r,u,i,l,a,n]}),c=h,o=p,d=a,y=n):"A"===e.type?(u=Math.abs(e.values[0]),i=Math.abs(e.values[1]),l=e.values[2],h=e.values[3],p=e.values[4],a=e.values[5],n=e.values[6],0===u||0===i?(v.push({type:"C",values:[d,y,a,n,a,n]}),d=a,y=n):d===a&&y===n||(A(d,y,a,n,u,i,l,h,p).forEach(function(e){v.push({type:"C",values:e})}),d=a,y=n)):"Z"===e.type&&(v.push(e),d=x,y=I),_=e.type}),v}var l=SVGPathElement.prototype.setAttribute,h=SVGPathElement.prototype.removeAttribute,c=window.Symbol?Symbol():"__cachedPathData",o=window.Symbol?Symbol():"__cachedNormalizedPathData",A=function(e,t,s,a,n,r,u,i,l,h){function p(e,t,s){return{x:e*Math.cos(s)-t*Math.sin(s),y:e*Math.sin(s)+t*Math.cos(s)}}var v,_,c=Math.PI*u/180,o=[];h?(g=h[0],b=h[1],m=h[2],f=h[3]):(e=(v=p(e,t,-c)).x,t=v.y,1<(_=(y=(e-(s=(d=p(s,a,-c)).x))/2)*y/(n*n)+(x=(t-(a=d.y))/2)*x/(r*r))&&(n*=_=Math.sqrt(_),r*=_),_=(v=n*n)*(d=r*r)-v*x*x-d*y*y,d=v*x*x+d*y*y,m=(d=(i===l?-1:1)*Math.sqrt(Math.abs(_/d)))*n*x/r+(e+s)/2,f=d*-r*y/n+(t+a)/2,g=Math.asin(parseFloat(((t-f)/r).toFixed(9))),b=Math.asin(parseFloat(((a-f)/r).toFixed(9))),e<m&&(g=Math.PI-g),s<m&&(b=Math.PI-b),g<0&&(g=2*Math.PI+g),b<0&&(b=2*Math.PI+b),l&&b<g&&(g-=2*Math.PI),!l&&g<b&&(b-=2*Math.PI));var d,y,x=b-g;Math.abs(x)>120*Math.PI/180&&(I=b,d=s,y=a,b=l&&g<b?g+120*Math.PI/180*1:g+120*Math.PI/180*-1,s=m+n*Math.cos(b),a=f+r*Math.sin(b),o=A(s,a,d,y,n,r,u,0,l,[b,I,m,f]));var x=b-g,l=Math.cos(g),I=Math.sin(g),m=Math.cos(b),f=Math.sin(b),g=Math.tan(x/4),b=4/3*n*g,x=4/3*r*g,g=[e,t],l=[e+b*I,t-x*l],m=[s+b*f,a-x*m],a=[s,a];if(l[0]=2*g[0]-l[0],l[1]=2*g[1]-l[1],h)return[l,m,a].concat(o);for(var o=[l,m,a].concat(o),M=[],S=0;S<o.length;S+=3){n=p(o[S][0],o[S][1],c),r=p(o[S+1][0],o[S+1][1],c);var V=p(o[S+2][0],o[S+2][1],c);M.push([n.x,n.y,r.x,r.y,V.x,V.y])}return M};SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[c]=null,this[o]=null),l.call(this,e,t)},SVGPathElement.prototype.removeAttribute=function(e,t){"d"===e&&(this[c]=null,this[o]=null),h.call(this,e)},SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize){if(this[o])return u(this[o]);this[c]?t=u(this[c]):(t=s(this.getAttribute("d")||""),this[c]=u(t));e=i((l=[],_=v=p=h=null,t.forEach(function(e){var t,s,a,n,r,u,i=e.type;"M"===i?(r=e.values[0],u=e.values[1],l.push({type:"M",values:[r,u]}),h=v=r,p=_=u):"m"===i?(r=h+e.values[0],u=p+e.values[1],l.push({type:"M",values:[r,u]}),h=v=r,p=_=u):"L"===i?(r=e.values[0],u=e.values[1],l.push({type:"L",values:[r,u]}),h=r,p=u):"l"===i?(r=h+e.values[0],u=p+e.values[1],l.push({type:"L",values:[r,u]}),h=r,p=u):"C"===i?(t=e.values[0],s=e.values[1],a=e.values[2],n=e.values[3],r=e.values[4],u=e.values[5],l.push({type:"C",values:[t,s,a,n,r,u]}),h=r,p=u):"c"===i?(t=h+e.values[0],s=p+e.values[1],a=h+e.values[2],n=p+e.values[3],r=h+e.values[4],u=p+e.values[5],l.push({type:"C",values:[t,s,a,n,r,u]}),h=r,p=u):"Q"===i?(t=e.values[0],s=e.values[1],r=e.values[2],u=e.values[3],l.push({type:"Q",values:[t,s,r,u]}),h=r,p=u):"q"===i?(t=h+e.values[0],s=p+e.values[1],r=h+e.values[2],u=p+e.values[3],l.push({type:"Q",values:[t,s,r,u]}),h=r,p=u):"A"===i?(r=e.values[5],u=e.values[6],l.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],r,u]}),h=r,p=u):"a"===i?(r=h+e.values[5],u=p+e.values[6],l.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],r,u]}),h=r,p=u):"H"===i?(r=e.values[0],l.push({type:"H",values:[r]}),h=r):"h"===i?(r=h+e.values[0],l.push({type:"H",values:[r]}),h=r):"V"===i?(u=e.values[0],l.push({type:"V",values:[u]}),p=u):"v"===i?(u=p+e.values[0],l.push({type:"V",values:[u]}),p=u):"S"===i?(a=e.values[0],n=e.values[1],r=e.values[2],u=e.values[3],l.push({type:"S",values:[a,n,r,u]}),h=r,p=u):"s"===i?(a=h+e.values[0],n=p+e.values[1],r=h+e.values[2],u=p+e.values[3],l.push({type:"S",values:[a,n,r,u]}),h=r,p=u):"T"===i?(r=e.values[0],u=e.values[1],l.push({type:"T",values:[r,u]}),h=r,p=u):"t"===i?(r=h+e.values[0],u=p+e.values[1],l.push({type:"T",values:[r,u]}),h=r,p=u):"Z"!==i&&"z"!==i||(l.push({type:"Z",values:[]}),h=v,p=_)}),l));return this[o]=u(e),e}if(this[c])return u(this[c]);var l,h,p,v,_,t=s(this.getAttribute("d")||"");return this[c]=u(t),t},SVGPathElement.prototype.setPathData=function(e){if(0===e.length)r?this.setAttribute("d",""):this.removeAttribute("d");else{for(var t="",s=0,a=e.length;s<a;s+=1){var n=e[s];0<s&&(t+=" "),t+=n.type,n.values&&0<n.values.length&&(t+=" "+n.values.join(" "))}this.setAttribute("d",t)}},SVGRectElement.prototype.getPathData=function(e){var t=this.x.baseVal.value,s=this.y.baseVal.value,a=this.width.baseVal.value,n=this.height.baseVal.value,r=(this.hasAttribute("rx")?this.rx:this.ry).baseVal.value,u=(this.hasAttribute("ry")?this.ry:this.rx).baseVal.value,s=(s=[{type:"M",values:[t+(r=a/2<r?a/2:r),s]},{type:"H",values:[t+a-r]},{type:"A",values:[r,u=n/2<u?n/2:u,0,0,1,t+a,s+u]},{type:"V",values:[s+n-u]},{type:"A",values:[r,u,0,0,1,t+a-r,s+n]},{type:"H",values:[t+r]},{type:"A",values:[r,u,0,0,1,t,s+n-u]},{type:"V",values:[s+u]},{type:"A",values:[r,u,0,0,1,t+r,s]},{type:"Z",values:[]}]).filter(function(e){return"A"!==e.type||0!==e.values[0]&&0!==e.values[1]});return s=e&&!0===e.normalize?i(s):s},SVGCircleElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,s=this.cy.baseVal.value,a=this.r.baseVal.value,s=[{type:"M",values:[t+a,s]},{type:"A",values:[a,a,0,0,1,t,s+a]},{type:"A",values:[a,a,0,0,1,t-a,s]},{type:"A",values:[a,a,0,0,1,t,s-a]},{type:"A",values:[a,a,0,0,1,t+a,s]},{type:"Z",values:[]}];return s=e&&!0===e.normalize?i(s):s},SVGEllipseElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,s=this.cy.baseVal.value,a=this.rx.baseVal.value,n=this.ry.baseVal.value,s=[{type:"M",values:[t+a,s]},{type:"A",values:[a,n,0,0,1,t,s+n]},{type:"A",values:[a,n,0,0,1,t-a,s]},{type:"A",values:[a,n,0,0,1,t,s-n]},{type:"A",values:[a,n,0,0,1,t+a,s]},{type:"Z",values:[]}];return s=e&&!0===e.normalize?i(s):s},SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var s=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[s.x,s.y]})}return e},SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var s=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[s.x,s.y]})}return e.push({type:"Z",values:[]}),e}}();